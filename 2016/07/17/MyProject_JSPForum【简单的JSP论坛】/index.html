<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.css.network/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="MyProject," />





  <link rel="alternate" href="/atom.xml" title="Suvan" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="记录6.61.JS注册验证，部分特效2.计时器　　 a.现在时间　　 b.今天还剩下多少秒  6.71.JS调整　　 a.获取手机验证码倒计时　　 b.调整高级选项 2.注册功能_1　　 a.尝试在jsp页面，接收html注册页面，用户填写的注册信息(表单提交)，　　 b.添加基本的数据验证。  6.81.注册功能_2　　 a.连接数据库(MySQL)　　 b.验证用户名的唯一性　　 c.储存注册">
<meta name="keywords" content="MyProject">
<meta property="og:type" content="article">
<meta property="og:title" content="JSPForum【简单的JSP论坛】">
<meta property="og:url" content="http://suvan-l.github.io/2016/07/17/MyProject_JSPForum【简单的JSP论坛】/index.html">
<meta property="og:site_name" content="Suvan">
<meta property="og:description" content="记录6.61.JS注册验证，部分特效2.计时器　　 a.现在时间　　 b.今天还剩下多少秒  6.71.JS调整　　 a.获取手机验证码倒计时　　 b.调整高级选项 2.注册功能_1　　 a.尝试在jsp页面，接收html注册页面，用户填写的注册信息(表单提交)，　　 b.添加基本的数据验证。  6.81.注册功能_2　　 a.连接数据库(MySQL)　　 b.验证用户名的唯一性　　 c.储存注册">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2016-12-05T03:09:27.597Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JSPForum【简单的JSP论坛】">
<meta name="twitter:description" content="记录6.61.JS注册验证，部分特效2.计时器　　 a.现在时间　　 b.今天还剩下多少秒  6.71.JS调整　　 a.获取手机验证码倒计时　　 b.调整高级选项 2.注册功能_1　　 a.尝试在jsp页面，接收html注册页面，用户填写的注册信息(表单提交)，　　 b.添加基本的数据验证。  6.81.注册功能_2　　 a.连接数据库(MySQL)　　 b.验证用户名的唯一性　　 c.储存注册">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://suvan-l.github.io/2016/07/17/MyProject_JSPForum【简单的JSP论坛】/"/>





  <title>JSPForum【简单的JSP论坛】 | Suvan</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Suvan</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Bolgs</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://suvan-l.github.io/2016/07/17/MyProject_JSPForum【简单的JSP论坛】/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liushuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/suvan.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Suvan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JSPForum【简单的JSP论坛】</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-17T09:25:43+08:00">
                2016-07-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MyProject/" itemprop="url" rel="index">
                    <span itemprop="name">MyProject</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  6,498
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  29
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h1><h2 id="6-6"><a href="#6-6" class="headerlink" title="6.6"></a>6.6</h2><p>1.JS注册验证，部分特效<br>2.计时器<br>　　 a.现在时间<br>　　 b.今天还剩下多少秒</p>
<hr>
<h2 id="6-7"><a href="#6-7" class="headerlink" title="6.7"></a>6.7</h2><p>1.JS调整<br>　　 a.获取手机验证码倒计时<br>　　 b.调整高级选项</p>
<p>2.注册功能_1<br>　　 a.尝试在jsp页面，接收html注册页面，用户填写的注册信息(表单提交)，<br>　　 b.添加基本的数据验证。</p>
<hr>
<h2 id="6-8"><a href="#6-8" class="headerlink" title="6.8"></a>6.8</h2><p>1.注册功能_2<br>　　 a.连接数据库(MySQL)<br>　　 b.验证用户名的唯一性<br>　　 c.储存注册信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">a的实现~~~~~~~~~~~~~~~~~~~~~~~~~</div><div class="line">1.使NetBeens连接mysql数据库，创建Web Project</div><div class="line">将MySQL的驱动程序jar包(mysql-connector-java-5.1.38-bin)，复制到，项目---&gt;库---&gt;JDK1.8中</div><div class="line"></div><div class="line">2.</div></pre></td></tr></table></figure>
<p>   Connection con=null;//声明连接对象<br>    Statement st=null;//声明语句对象<br>    ResultSet rs =null;//声明结果集对象–结果集<br>//注册驱动程序<br>        Class.forName(“com.mysql.jdbc.Driver”);<br>//获取数据库连接;<br>        con=DriverManager.getConnection(“jdbc:mysql://127.0.0.1:3306/imooc”,”用户名”,”用户密码”);<br>//创建Statement对象<br>        st=con.createStatement();<br>//执行查询语句并得到结果(字符串内的SQL语句结尾可以不写；)<br>        String sql=”SELECT * FROM imooc.items wh”;<br>        rs=st.executeQuery(sql);  </p>
<p>rs.next() //向后移动游标，初始状态游标是位于第一行之前的<br>rs.getString(“name”);  //读取当前列，name字段的记录值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">3.记得try...catch...</div><div class="line"></div><div class="line"></div><div class="line">4.关闭资源</div><div class="line"></div><div class="line">    rs.close();</div><div class="line">    st.close();</div><div class="line">    con.close();</div><div class="line"></div><div class="line"></div><div class="line">&gt;注意点：</div><div class="line">&gt;&gt;1.Statement st =con.createStatement();</div><div class="line">&gt;&gt;</div><div class="line">&gt;&gt;2.Statement st =con.createStatement(游标类型，上锁类型);</div><div class="line">&gt;&gt;&gt;游标类型：只读，可更新</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt;上锁类型：</div><div class="line">&gt;&gt;&gt;1.只能向前(默认，只能用next向前移动)</div><div class="line">&gt;&gt;&gt;2.游标可随意滚动,不反映数据的变化(他人修改不敏感)</div><div class="line">&gt;&gt;&gt;3.游标可随意滚动，反映数据的变化(他人修改敏感)</div></pre></td></tr></table></figure>
<hr>
<p>b实现</p>
<p>1.mysql创建数据库forumproject(论坛项目)</p>
<p>2.使用Navicat for MySQL工具</p>
<p>3.设计表结构<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">编号 INT 主键,自增</div><div class="line">用户名：VARCHAR(19) 唯一约束，非空</div><div class="line">密码:   VARCHAR(14)  非空</div><div class="line">性别:   CHAR(1)  1代表男，2代表女</div><div class="line">生日：  DATE</div><div class="line">所在地：VARCHAR(15) 非空</div><div class="line">邮箱：  VARCHAR(20) 非空</div><div class="line">手机号码：CHAR(11)  非空</div><div class="line">通信地址：VARCHAR(50)</div><div class="line">爱好：    VARCHAR(20);</div><div class="line">用户注册时间： DATETIME  默认值 </div><div class="line"></div><div class="line"></div><div class="line">CREATE TABLE user(             </div><div class="line">    num INT  AUTO_INCREMENT primary key,</div><div class="line">    username VARCHAR(19) UNIQUE KEY,</div><div class="line">    userpassword VARCHAR(14)  NOT NULL,</div><div class="line">    usersex  CHAR(1) NOT NULL,  </div><div class="line">    userbirthday DATE NOT NULL,</div><div class="line">    useraddcpc VARCHAR(15)  NOT NULL,</div><div class="line">    useremail  VARCHAR(20)  NOT NULL,</div><div class="line">    userphone VARCHAR(15) NOT NULL,</div><div class="line">    useraddr   VARCHAR(20),</div><div class="line">    userhobbys VARCHAR(20),</div><div class="line">    registertime DATETIME DEFAULT NOW()</div><div class="line">)ENGINE = innoDB;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>注意点：</p>
<blockquote>
<p>a.储存手机号用varchar</p>
<p>b.DATE类型(系统默认时间)默认值可以设置sysdate()和nowdate()<br>now() 在执行开始时值就得到了<br>sysdate() 在函数执行时动态得到值。</p>
</blockquote>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">//检测用户的唯一性</div><div class="line">String sql =&quot;SELECT username FROM user WHERE username=&apos;&quot;+username+&quot;&apos;&quot;;</div><div class="line">                          </div><div class="line">rs=st.executeQuery(sql);</div><div class="line">if(rs!=null)&#123;</div><div class="line">    if(rs.next())&#123;</div><div class="line">         out.print(&quot;&lt;h3&gt;&quot;+username+&quot;用户名已被使用，请改用其他名字&lt;/h3&gt;&quot;);</div><div class="line">    &#125;else&#123;</div><div class="line">        out.print(&quot;&lt;h3&gt;恭喜，这个用户名&quot;+username+&quot;，可以使用！&lt;/h3&gt;&quot;);</div><div class="line">    &#125;</div><div class="line">                                </div><div class="line">&#125;else&#123;</div><div class="line">    error =error+&quot;________4.结果集未获取到数据;&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>实现c</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">//用户名可以使用，执行插入操作</div><div class="line">if(error.equals(&quot;&quot;))&#123; //数据检测与用户名唯一都通过的话，报错信息err为&quot;&quot;</div><div class="line">                                       </div><div class="line">     //合并日期</div><div class="line">    String userbirthday=dateyear+&quot;-&quot;+datemonth+&quot;-&quot;+dateday;</div><div class="line">    //合并所在地</div><div class="line">     String useraddcpc =addcountry+&quot;国&quot;+addprovince+&quot;省&quot;+addcity+&quot;市&quot;;</div><div class="line">    //合并爱好</div><div class="line">    String userhobbysAND=&quot;&quot;;</div><div class="line">    for(int i=0;i&lt;userhobbys.length;i++)&#123;</div><div class="line">        if(i==userhobbys.length-1)&#123;</div><div class="line">            userhobbysAND+=userhobbys[i];</div><div class="line">            break;</div><div class="line">        &#125;   </div><div class="line">        userhobbysAND+=userhobbys[i]+&quot;,&quot;;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    sql=&quot;INSERT INTO user(username,userpassword,usersex,&quot;</div><div class="line">         + &quot;userbirthday,useraddcpc,useremail,userphone,useraddr,userhobbys)&quot;</div><div class="line">         + &quot;VALUES&quot;;</div><div class="line">    sql +=&quot; (&apos;&quot;+username+&quot;&apos;,&apos;&quot;+userpassword+&quot;&apos;,&apos;&quot;+usersex+&quot;&apos;,&apos;&quot;+userbirthday</div><div class="line">             +&quot;&apos;,&apos;&quot;+useraddcpc+&quot;&apos;,&apos;&quot;+useremail+&quot;&apos;,&apos;&quot;+userphone+&quot;&apos;,&apos;&quot;+useraddr</div><div class="line">             +&quot;&apos;,&apos;&quot;+userhobbysAND+&quot;&apos;)&quot;;</div><div class="line">                                       </div><div class="line">     //执行记录的插入操作，并将结果保存在execResult (1)返回行计数 (2)返回0</div><div class="line">     int execResult =st.executeUpdate(sql);</div><div class="line">                                       </div><div class="line">     if(execResult&gt;0)&#123;</div><div class="line">         out.print(&quot;&lt;h2&gt;恭喜，注册成功&lt;/h2&gt;&quot;);</div><div class="line">     &#125;else&#123;</div><div class="line">         out.print(&quot;&lt;h2&gt;Sorry，注册失败&lt;/h2&gt;&quot;);</div><div class="line">          error =error+&quot;________5.注册失败;&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="6-9"><a href="#6-9" class="headerlink" title="6.9"></a>6.9</h2><p>1.注册功能_3<br>　　 a.尝试PreparedStatement接口,对SQL语句进行优化<br>　　 b.页面跳转控制</p>
<hr>
<p>实现1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">a.</div><div class="line">sql=&quot;INSERT INTO user(username,userpassword,usersex,&quot;</div><div class="line">+ &quot;userbirthday,useraddcpc,useremail,userphone,useraddr,userhobbys)&quot;</div><div class="line">+ &quot;VALUES (?,?,?,?,?,?,?,?,?)&quot;;</div><div class="line"></div><div class="line">//创建预编译对象，载入SQL语句</div><div class="line">pst=con.prepareStatement(sql);</div><div class="line"></div><div class="line">pst.setString(1, username);</div><div class="line">pst.setString(2,userpassword);</div><div class="line">pst.setString(3,usersex);</div><div class="line">pst.setString(4,userbirthday);</div><div class="line">pst.setString(5,useraddcpc);</div><div class="line">pst.setString(6,useremail);</div><div class="line">pst.setString(7,userphone);</div><div class="line">pst.setString(8,useraddr);</div><div class="line">pst.setString(9,userhobbysAND);</div><div class="line"></div><div class="line">//执行记录的插入操作，将数据插入表中，并将结果保存在execResult (1)返回行计数 (2)返回0</div><div class="line">int execResult =pst.executeUpdate();</div><div class="line"></div><div class="line">b.</div><div class="line">1.请求转发(同一个请求，多次转发，请求转发后面的代码不会被执行)</div><div class="line">1-1.HTML传值</div><div class="line">  &lt;jsp:forward page=&quot;registerSuccess.jsp&quot;&gt;</div><div class="line">                            &lt;jsp:param name=&quot;utpye&quot; value=&quot;happy&quot; /&gt;</div><div class="line">                        &lt;/jsp:forward&gt;</div><div class="line"></div><div class="line">1-2.URL传值</div><div class="line">http://localhost:8084/JSPForumProject/jsp/register.jsp?msg=100</div><div class="line"></div><div class="line">1-3.Jave的请求转发</div><div class="line"> request.getRequestDispatcher(&quot;registerSuccess.jsp&quot;).forward(request,response);</div><div class="line"></div><div class="line"></div><div class="line">2.请求重定向(发出新请求，上次请求的会丢失)</div><div class="line">2.1.直接跳转</div><div class="line">response.sendRedirect(&quot;registerFail.jsp&quot;);  </div><div class="line"></div><div class="line">2.2 5秒后再跳转 (HTTP消息头,秒数;url=重定向网页的url)</div><div class="line"> response.setHeader(&quot;refresh&quot;,&quot;5;url=registerSuccess.jsp&quot;);</div></pre></td></tr></table></figure></p>
<blockquote>
<p>注意：</p>
<blockquote>
<p>1.response.sendRedirect方法后，页面的其他代码仍然会被执行。因此，若需要终止剩余代码的执行，可在该语句后跟随一个return语句</p>
<p>2.请求转发的话，页面后面的代码不会执行</p>
<p>3.注意：html页面，无法接收jsp：forward发的request请求</p>
</blockquote>
</blockquote>
<hr>
<h2 id="6-10-未完成"><a href="#6-10-未完成" class="headerlink" title="6.10(未完成)"></a>6.10(未完成)</h2><p>1.登录页面优化</p>
<p>2.登录功能_1<br>　　a.连接数据库<br>　　b.验证用户输入的用户名和密码是否正确</p>
<hr>
<h2 id="6-11"><a href="#6-11" class="headerlink" title="6.11"></a>6.11</h2><p>1.登录功能_1<br>　　a.尝试连接数据库</p>
<hr>
<h2 id="6-12"><a href="#6-12" class="headerlink" title="6.12"></a>6.12</h2><p>1.登陆界面<br>　　a.JS验证<br>　　　　　　。用户名密码不能为空，点击登录的时候进行检测<br>　　b.登录界面优化</p>
<p>2.登录功能_2<br>　　a.验证用户输入的用户名和密码是否正确</p>
<blockquote>
<p>注意:</p>
<blockquote>
<p>1.用java.sql.Statement的executequery（）方法查询的结果集永远不会返回null，可以用rs.next（）方法来判断有没结果集，因为一个结果集最初将游标定位在第一行的前面。而不用rs==null,这样没有效果</p>
<p>2.Select语句用Statement比较方便，Insert语句用PreoaredStatement
　　</p>
</blockquote>
</blockquote>
<hr>
<h2 id="6-13"><a href="#6-13" class="headerlink" title="6.13"></a>6.13</h2><p>1.登录界面功能_3<br>　　a.在会话期间维持用户的登录信息(session验证)<br>    b.在index.jsp页面使用静态包含<br><code>&lt;%@include file=&quot;../jsp_include/index_bottom.jsp&quot; %&gt;</code></p>
<blockquote>
<p>注意：</p>
<blockquote>
<p>1.使用inclue指令或者jsp:include&gt;动作均可以包含其他文件的内容</p>
<p>2.include指令只能静态包含一个文件的内容，而jsp:include&gt;动作则可以在执行时包含一个页面的执行结果</p>
<p>3.&gt;jsp:include&gt;动作可以结合jsp:param&gt;动作向包含的页面传递参数</p>
</blockquote>
</blockquote>
<hr>
<p>2.登录界面优化<br>　　a.分离index.html和index.jsp<br>　　b.index.jsp的(右上角登录注册模块)改为欢迎用户XXX</p>
<hr>
<p>3.添加计时器<br>　　a.使用JavaScript在登录成功和注册成功页面,<br>　　　　添加页面跳转倒计时;</p>
<hr>
<h2 id="6-14"><a href="#6-14" class="headerlink" title="6.14"></a>6.14</h2><p>1.登录功能_4<br>　　 a.在线会员名单的显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">  //从application对象中取出名称为namelist的属性，保存到向量visitors中</div><div class="line">    Vector visitors=(Vector)application.getAttribute(&quot;namelist&quot;);</div><div class="line"></div><div class="line">    if(visitors ==null)&#123;//判断向量是否为空</div><div class="line">        visitors=new Vector();</div><div class="line">         application.setAttribute(&quot;namelist&quot;,visitors);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">     boolean unique=true;</div><div class="line">    for(int i=0;i&lt;visitors.size();i++)&#123;  </div><div class="line">        //遍历向量，看是否存在重复的用户名</div><div class="line">         if(((String)visitors.get(i)).equals(username))&#123;</div><div class="line">            unique=false;</div><div class="line">            break;</div><div class="line">         &#125;                       </div><div class="line">    &#125;</div><div class="line"></div><div class="line">    if(unique)&#123;</div><div class="line">        visitors.add(username);</div><div class="line">        // 将指定元素添加到此向量的末尾。</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">//显示在线的用户</div><div class="line"></div><div class="line">String name=null,showAllUsername=&quot;&quot;;</div><div class="line">    //从application对象取出名单列表</div><div class="line">    Vector visitors=(Vector)application.getAttribute(&quot;namelist&quot;);</div><div class="line">            </div><div class="line">    if(visitors!=null)&#123;//判断名单是否为空</div><div class="line">        Iterator it= visitors.iterator(); //创建迭代器</div><div class="line">                </div><div class="line">    while(it.hasNext())&#123;   //遍历所有用户名单，并且将所有用户名取出后连接成一个字符串</div><div class="line">            name =(String)it.next();</div><div class="line">            showAllUsername +=&quot; &quot;+name+&quot;, &quot;;</div><div class="line">    &#125;</div><div class="line">                </div><div class="line">    if(!showAllUsername.equals(&quot;&quot;))&#123;   //显示在线名单</div><div class="line">        out.println(&quot;&lt;p&gt;在线会员:&quot;+showAllUsername+&quot;&lt;/p&gt;&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>b.退出登录状态<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//从application对象中去去除在线名单</div><div class="line">  Vector visitors=(Vector)application.getAttribute(&quot;namelist&quot;);</div><div class="line"></div><div class="line">  visitors.remove(session.getAttribute(&quot;username&quot;));</div><div class="line">          </div><div class="line">   //从session对象中清除用户名</div><div class="line">  session.removeAttribute(&quot;username&quot;);</div></pre></td></tr></table></figure></p>
<hr>
<p>　　 c.使用Cookie完成自动登录功能</p>
<hr>
<h2 id="6-15"><a href="#6-15" class="headerlink" title="6.15"></a>6.15</h2><p>1.帖子浏览功能的实现_1</p>
<p>　　 a.显示所有帖子的概要信息</p>
<p>a-1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//设计帖子信息表----------</div><div class="line">帖子ID: INT 主键，自增</div><div class="line">主题：VARCHAR(15) 非空</div><div class="line">作者：VARCHAR(10) 非空,唯一</div><div class="line">发表日期: DATETIME  默认值</div><div class="line">回复数：INT</div><div class="line">点击数：INT </div><div class="line">最后更新时间 (当前更新时间)</div><div class="line"></div><div class="line">CREATE TABLE article(</div><div class="line">    artid INT AUTO_INCREMENT PRIMARY KEY,</div><div class="line">    arttheme VARCHAR(50)  UNIQUE KEY NOT NULL,</div><div class="line">    artauthor VARCHAR(10) NOT NULL,</div><div class="line">    pubdate  DATETIME DEFAULT NOW(),</div><div class="line">    replynum INT DEFAULT 0,</div><div class="line">    clicknum INT DEFAULT 0,</div><div class="line">    upddate DATETIME DEFAULT NOW()</div><div class="line">)ENGINE = innoDB;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>注意：</p>
<blockquote>
<p>1.mysql不需要是主键也可以自增的。只要字段是数字类型的 int float double之类的</p>
<p>2.mysql中每个表只能设置一个自增字段<br>3.修改列名<br><code>ALTER TABLE article CHANGE COLUMN updatedate update DATETIME DEFAULT NOW();</code></p>
</blockquote>
</blockquote>
<hr>
<p>a-2.js实现首页模块切换效果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">middleshowfirst.style.display=&quot;block&quot;;</div><div class="line">middleshowsecond.style.display=&quot;none&quot;;</div></pre></td></tr></table></figure></p>
<hr>
<p>a-3 尝试格式化日期输出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;%@page import=&quot;java.sql.*,java.text.*&quot;%&gt;</div><div class="line">     Date pubdate,upddate; //发布时间，更新时间(数据库的Datetime类型)</div><div class="line"></div><div class="line">  /*尝试格式化日期，再输出</div><div class="line">     pubdate=rs.getDate(&quot;pubdate&quot;);//得到Date类型的日期</div><div class="line">     upddate=rs.getDate(&quot;upddate&quot;);</div><div class="line">                            </div><div class="line">     *SimpleDateFormat sdf=new SimpleDateFormat(&quot;yyyy年MM月dd日 &quot;);</div><div class="line">     *pubdateT=sdf.format(pubdate);</div><div class="line">     *upddateT=sdf.format(upddate);</div><div class="line"></div><div class="line"></div><div class="line">方法2：直接接收字符串</div><div class="line">pubdateT=rs.getString(&quot;pubdate&quot;)==null ?</div><div class="line">         &quot;&quot; : rs.getString(&quot;pubdate&quot;).substring(0,16);//截取字符串</div><div class="line"> upddateT=rs.getString(&quot;pubdate&quot;)==null ?</div><div class="line">        &quot;&quot; : rs.getString(&quot;upddate&quot;).substring(0,16);</div></pre></td></tr></table></figure></p>
<hr>
<p>　　<br>　　b.搜索帖子(根据作者或者主题)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">//div搜索模块</div><div class="line">&lt;div id=&quot;middleFindarticle&quot;&gt;</div><div class="line">        &lt;!--自提交，提交当原来(当前)页面 --&gt;</div><div class="line">    &lt;form method=&quot;post&quot; name=&quot;findarticle&quot;&gt; </div><div class="line">        &lt;select name=&quot;keyChoice&quot;&gt;</div><div class="line">            &lt;option value=&quot;arttheme&quot; selected=&quot;selected&quot;&gt;主题&lt;/option&gt;</div><div class="line">            &lt;option value=&quot;artauthor&quot; &gt;作者&lt;/option&gt;</div><div class="line">        &lt;/select&gt;</div><div class="line">        请输入关键字:&lt;input type=&quot;text&quot; name=&quot;keyValue&quot; /&gt;</div><div class="line">                    &lt;input type=&quot;submit&quot; value=&quot;搜索贴子&quot; /&gt;</div><div class="line">    &lt;/form&gt;                        </div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line"></div><div class="line">//确定搜索条件</div><div class="line">&lt;%</div><div class="line">     //确定搜索条件</div><div class="line">         request.setCharacterEncoding(&quot;utf-8&quot;);//设置reuqest信息的编码字符集</div><div class="line">                     </div><div class="line">        String findsql =&quot; &quot;;//确定搜索条件               </div><div class="line">        if(request.getParameter(&quot;keyValue&quot;)!=null)&#123;</div><div class="line">            String keyChoice=request.getParameter(&quot;keyChoice&quot;);</div><div class="line">             String keyValue=request.getParameter(&quot;keyValue&quot;);</div><div class="line">                        </div><div class="line">            /* </div><div class="line">                将得到的表单数据cipher按iso8859-1编码还原成字节数组，再按UTF-8编码重新编译</div><div class="line">                keyValue=new String(keyValue.getBytes(&quot;iso8859-1&quot;),&quot;UTF-8&quot;);</div><div class="line">             */</div><div class="line">            findsql=&quot;WHERE &quot;+keyChoice+&quot; LIKE &apos;%&quot;+keyValue+&quot;%&apos;&quot;;  //模糊查询                         </div><div class="line">        &#125;</div><div class="line">%&gt;</div><div class="line"></div><div class="line">//SQL语句改为</div><div class="line">String sql =&quot;SELECT artid,arttheme,artauthor,&quot;</div><div class="line">          + &quot; pubdate,replynum,clicknum,upddate &quot;</div><div class="line">          + &quot;FROM article &quot;+findsql+&quot; ORDER BY upddate DESC&quot;;//根据upddate进行降序排序</div></pre></td></tr></table></figure></p>
<blockquote>
<p>注意:</p>
<blockquote>
<p>1.Like模糊查询%号后面不要加空格，直接%”+keyChoice</p>
<p>2.搜索贴子的时候，输入中文的话如果没有转码，会出现乱码，所以搜索不到，所有要先转为字节数组，再按UTF-8编码重新编译解释</p>
</blockquote>
</blockquote>
<hr>
<p>c.分页显示——（未完全实现）</p>
<p>出现的问题：</p>
<ul>
<li>查询模块，查询失败</li>
<li>查询之后，分页无法进行</li>
<li>分页完，查询无法进行</li>
</ul>
<hr>
<h2 id="6-16"><a href="#6-16" class="headerlink" title="6.16"></a>6.16</h2><p>1.帖子浏览功能的实现_2</p>
<p>分页功能<br>　　a.根据主题查询，根据作者查询<br>　　b.根据总记录数显示页面，每5条记录1页</p>
<blockquote>
<p>仍然存在未解决问题:</p>
<blockquote>
<p>1.搜索贴子后，展示帖子，如果搜索数量多的话，会出现分页，但是一点击分页，就退出搜索，展示所有帖子</p>
<p>2.登陆后，显示首页模块，然后点击帖子展示，搜索帖子后，先显示贴子展示模块</p>
</blockquote>
</blockquote>
<p>2.优化分页显示模块的CSS</p>
<hr>
<h2 id="6-17"><a href="#6-17" class="headerlink" title="6.17"></a>6.17</h2><p>回帖功能_1<br>　　a.textarea<br>　　b.了解CKeditor(在线编辑器)</p>
<hr>
<h2 id="6-18"><a href="#6-18" class="headerlink" title="6.18"></a>6.18</h2><p>回帖功能_1<br>　　a.使用Ckeditor<br>　　b.可以通过配置config.js定制自己的工具栏</p>
<hr>
<h2 id="6-19"><a href="#6-19" class="headerlink" title="6.19"></a>6.19</h2><p>1.回帖功能，在index.jsp设计回帖模块<br>　　a.将textarea转变为Ckeditor，调节背景，宽度，大小<br>　　b.JS接收Ckeditor的内容（贴子内容）,id,标题,并进行验证</p>
<hr>
<p>2.设计数据表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">回复记录的id(rid) int  主键，自增</div><div class="line">回复标题(rtitle)  VARCHAR(20)非空</div><div class="line">回复内容(rcontent) VARCHAR(200) 5~200 非空</div><div class="line">回复作者(rauthor)  VARCHAR(10) 非空</div><div class="line">对应的主题id(artid)  INT </div><div class="line">回复时间rdate()  DATETIEM 默认插入时间</div><div class="line"></div><div class="line">CREATE TABLE reply(</div><div class="line">    rid INT AUTO_INCREMENT PRIMARY KEY,</div><div class="line">    rtitle VARCHAR(20) NOT NULL,</div><div class="line">    rcontent VARCHAR(200) NOT NULL,</div><div class="line">    rauthor VARCHAR(10) NOT NULL,</div><div class="line">    pid INT NOT NULL,</div><div class="line">    rpddate DATETIME DEFAULT NOW()</div><div class="line">)ENGINE = innoDB;</div></pre></td></tr></table></figure>
<hr>
<p>3.在文章表增加新的一列(放在artauthor后面),最后更新作者<br><code>ALTER table article ADD COLUMN updauthor VARCHAR(10) NOT NULL AFTER artauthor;</code></p>
<hr>
<p>4.在贴子回复模块输入id，标题，回帖内容，验证过后，<br>　　a.插入数据库的reply表中，<br>　　b.并且在贴子展示模块，相应贴子回复数+1，最后回复时间更新</p>
<hr>
<p>5.通过<br><code>rcontent=rcontent.replace(&quot;&lt;/p&gt;&quot;,&quot;&quot;);</code><br>去除ckeditor里回贴内容的p&gt;和/p&gt;标签，再存入数据库</p>
<hr>
<h2 id="6-20"><a href="#6-20" class="headerlink" title="6.20"></a>6.20</h2><p>无</p>
<hr>
<h2 id="6-21"><a href="#6-21" class="headerlink" title="6.21"></a>6.21</h2><p>1.封装MySQL的数据库操作<br>　　在NetBeans工具里,源包——&gt;创建conndb包</p>
<p>　　a.创建保存属性文件condb.properties<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">driver=com.mysql.jdbc.Driver</div><div class="line">url=jdbc:mysql://localhost:3306/forumproject</div><div class="line">dateuser=root</div><div class="line">dateuserpassword=liushuwei</div></pre></td></tr></table></figure></p>
<hr>
<p>　　b.创建类Conndb.java<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line">&lt;%@page import=&quot;conndb.Conndb&quot; %&gt;&lt;!--数据库操作的类 --&gt;</div><div class="line"></div><div class="line">package conndb;</div><div class="line"></div><div class="line">import java.io.InputStream;</div><div class="line">import java.sql.*;</div><div class="line">import java.util.Properties;</div><div class="line"></div><div class="line"></div><div class="line">public class Conndb &#123;</div><div class="line">    private Connection con;</div><div class="line">    private Statement st;</div><div class="line">    </div><div class="line">   //构造函数，在创建Conn类的对象时自动调用</div><div class="line">    public Conndb() throws Exception &#123;</div><div class="line">        Properties ppts = new Properties();</div><div class="line">        InputStream in=Conndb.class.getResourceAsStream(&quot;condb.properties&quot;);//读取属性文件的4个属性</div><div class="line">       ppts.load(in);</div><div class="line">       in.close();</div><div class="line">        </div><div class="line">       String driver=ppts.getProperty(&quot;driver&quot;);</div><div class="line">       String url=ppts.getProperty(&quot;url&quot;);</div><div class="line">       String dateuser=ppts.getProperty(&quot;dateuser&quot;);</div><div class="line">       String dateuserpassword=ppts.getProperty(&quot;dateuserpassword&quot;);</div><div class="line">       </div><div class="line">      </div><div class="line">       Class.forName(driver);//加载驱动类</div><div class="line">       con=DriverManager.getConnection(url,dateuser,dateuserpassword);</div><div class="line">       st=con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);       </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    //executeQuery---执行查询语句</div><div class="line">    public ResultSet executeQuery(String sql)&#123;</div><div class="line">        ResultSet rs=null;</div><div class="line">        try&#123;</div><div class="line">            rs=st.executeQuery(sql);</div><div class="line">        &#125;catch(Exception e)&#123;</div><div class="line">            e.printStackTrace(System.err);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        return rs;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    //executeUpdate方法 --执行对数据库的更新的SQL语句</div><div class="line">    public int executeUpdate(String sql)&#123;</div><div class="line">        try&#123;</div><div class="line">            return st.executeUpdate(sql);</div><div class="line">        &#125;catch(Exception e)&#123;</div><div class="line">            e.printStackTrace(System.err);</div><div class="line">            return 0;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    //创建预编译对象的方法</div><div class="line">    public PreparedStatement prepareStatement(String sql)&#123;</div><div class="line">        try&#123;</div><div class="line">            return con.prepareStatement(sql);</div><div class="line">        &#125;catch(Exception e)&#123;</div><div class="line">            e.printStackTrace(System.err);</div><div class="line">            return null;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    //关闭各项资源的方法---注意要逆向</div><div class="line">    public void close()&#123;</div><div class="line">        try&#123;</div><div class="line">            if(st!=null)</div><div class="line">                st.close();</div><div class="line">        &#125;catch(Exception e)&#123;</div><div class="line">            e.printStackTrace(System.err);</div><div class="line">        &#125;</div><div class="line">         try&#123;</div><div class="line">            if(con!=null)</div><div class="line">                con.close();</div><div class="line">        &#125;catch(Exception e)&#123;</div><div class="line">            e.printStackTrace(System.err);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>1-2.修改register.jsp(注册验证文件)…部分关键代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">Conndb conn=null;</div><div class="line">PreparedStatement pst=null;</div><div class="line">ResultSet rs =null;</div><div class="line"></div><div class="line">try&#123;</div><div class="line">    con = new Conndb();</div><div class="line">    String sql =&quot;SELECT username FROM user WHERE username=&apos;&quot;+username+&quot;&apos;&quot;;</div><div class="line">                          </div><div class="line">    rs=conn.executeQuery(sql);</div><div class="line"></div><div class="line">    pst=conn.prepareStatement(sql);</div><div class="line"></div><div class="line">&#125;catch(Exception e)&#123;</div><div class="line">      e.printStackTrace(System.err);</div><div class="line">&#125;finally&#123;</div><div class="line">    try&#123;</div><div class="line">        if(con!=null)</div><div class="line">        con.close();</div><div class="line">    &#125;catch(Exception e)&#123;</div><div class="line">        e.printStackTrace(System.err);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="6-22"><a href="#6-22" class="headerlink" title="6.22"></a>6.22</h2><p>1.使用JavaBean</p>
<p>a.语法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> &lt;!-- 创建javabean对象user --&gt;</div><div class="line"> &lt;jsp:useBean class=&quot;javabean.User&quot; id=&quot;user&quot; /&gt; </div><div class="line">&lt;!--自动提取用户填的数据,同名传递--&gt;   </div><div class="line">             &lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot; /&gt;</div><div class="line">&lt;jsp:setProperty name=&quot;user&quot; property=&quot;userbirthday&quot;</div><div class="line">                value=&quot;&lt;%=userbirthday%&gt;&quot; /&gt;</div><div class="line"></div><div class="line">&lt;!--使用JSP动作输出oo的username属性值--&gt;</div><div class="line">&lt;jsp:getProperty name=&quot;oo&quot; property=&quot;username&quot; /&gt;</div></pre></td></tr></table></figure></p>
<hr>
<p>b.<br>b-1将注册完成注册功能封装处理逻辑的方法直接编写到实体类JavaBean中<br>b-2当相关操作比较多的时候，可分别设计根据表结构映射得到的实体类（例：User）和封装了与该表相关的数据库处理操作的操作类（例：UserBean）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div></pre></td><td class="code"><pre><div class="line">///////////////////User.java</div><div class="line">/**</div><div class="line"> * 2016.6.22  注册功能，处理用户信息的JavaBean</div><div class="line"> * @author Liu-shuwei</div><div class="line"> */</div><div class="line">package javabean;</div><div class="line"></div><div class="line">public class User&#123;</div><div class="line">   private String username,userpassword, userpasswordtwo,</div><div class="line">                  usersex,userbirthday,</div><div class="line">                  useraddcpc,useremail,userphone,</div><div class="line">                  useraddr,userhobbys;</div><div class="line">   </div><div class="line">  </div><div class="line">    /*</div><div class="line">        所有属性的getter和setter方法</div><div class="line">   */</div><div class="line">    public String getUsername() &#123;</div><div class="line">        return username;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setUsername(String username) &#123;</div><div class="line">        this.username = username;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getUserpassword() &#123;</div><div class="line">        return userpassword;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setUserpassword(String userpassword) &#123;</div><div class="line">        this.userpassword = userpassword;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getUserpasswordtwo() &#123;</div><div class="line">        return userpasswordtwo;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setUserpasswordtwo(String userpasswordtwo) &#123;</div><div class="line">        this.userpasswordtwo = userpasswordtwo;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getUsersex() &#123;</div><div class="line">        return usersex;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setUsersex(String usersex) &#123;</div><div class="line">        this.usersex = usersex;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getUserbirthday() &#123;</div><div class="line">        return userbirthday;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setUserbirthday(String userbirthday) &#123;</div><div class="line">        this.userbirthday = userbirthday;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getUseraddcpc() &#123;</div><div class="line">        return useraddcpc;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setUseraddcpc(String useraddcpc) &#123;</div><div class="line">        this.useraddcpc = useraddcpc;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getUseremail() &#123;</div><div class="line">        return useremail;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setUseremail(String useremail) &#123;</div><div class="line">        this.useremail = useremail;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getUserphone() &#123;</div><div class="line">        return userphone;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setUserphone(String userphone) &#123;</div><div class="line">        this.userphone = userphone;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getUseraddr() &#123;</div><div class="line">        return useraddr;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setUseraddr(String useraddr) &#123;</div><div class="line">        this.useraddr = useraddr;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getUserhobbys() &#123;</div><div class="line">        return userhobbys;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setUserhobbys(String userhobbys) &#123;</div><div class="line">        this.userhobbys = userhobbys;</div><div class="line">    &#125;</div><div class="line">   </div><div class="line">   </div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//////////////////////UserBean.java</div><div class="line"></div><div class="line">/**</div><div class="line"> * 2016.6.22 操作类</div><div class="line"> * @author Liu-shuwei</div><div class="line"> */</div><div class="line">package javabean;</div><div class="line"></div><div class="line">import conndb.Conndb;</div><div class="line">import java.sql.PreparedStatement;</div><div class="line">import java.sql.ResultSet;</div><div class="line">import java.sql.SQLException;</div><div class="line"></div><div class="line"></div><div class="line">public class UserBean &#123;</div><div class="line">     //基本的数据验证</div><div class="line">   public String basicCheck(User u)&#123;</div><div class="line">       </div><div class="line">        String msg=&quot;&quot;; //错误信息</div><div class="line">         if(u.getUsername()==null || u.getUsername().equals(&quot;&quot;)   </div><div class="line">                        || u.getUserpassword()==null || u.getUserpassword().equals(&quot;&quot;))&#123;</div><div class="line">             msg=&quot;________1.用户名和密码不能为空!&quot;;</div><div class="line">         &#125;else if(!u.getUserpassword().equals(u.getUserpasswordtwo()))&#123;</div><div class="line">             msg=&quot;________2.两次输入的密码不一致！&quot;;</div><div class="line">         &#125;</div><div class="line">         </div><div class="line">           if(u.getUsersex()==null || u.getUsersex().equals(&quot;&quot;)</div><div class="line">                        || u.getUseremail()==null || u.getUseremail().equals(&quot;&quot;)</div><div class="line">                        ||u.getUserphone()==null || u.getUserphone().equals(&quot;&quot;))&#123;</div><div class="line">                    msg=&quot;________3.性别，用户邮箱，手机号码不能其中有选项为空&quot;;                </div><div class="line">                &#125;</div><div class="line">         return msg;</div><div class="line">   &#125; </div><div class="line">   </div><div class="line">   //验证用户名唯一性</div><div class="line">   public String uniqueName(String username)&#123;</div><div class="line">          Conndb conn =null;</div><div class="line">          ResultSet rs =null;</div><div class="line">          String msg=&quot;&quot;; //错误信息</div><div class="line">      try&#123;  </div><div class="line">          conn = new Conndb();</div><div class="line">          //检测用户的唯一性</div><div class="line">           String sql =&quot;SELECT username FROM user WHERE username=&apos;&quot;+username+&quot;&apos;&quot;;</div><div class="line">                             </div><div class="line">         rs=conn.executeQuery(sql);       </div><div class="line">         if(rs!=null)&#123;</div><div class="line">             if(rs.next())&#123;</div><div class="line">                  msg=username+&quot;用户名已被使用，请改用其他名字&quot;;</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line">          </div><div class="line">      &#125;catch(Exception e)&#123;</div><div class="line">            e.printStackTrace(System.err);</div><div class="line">      &#125;finally&#123;</div><div class="line">          try&#123;</div><div class="line">              if(rs!=null)</div><div class="line">                  rs.close();</div><div class="line">          &#125;catch(SQLException e)&#123;</div><div class="line">              e.printStackTrace(System.err);</div><div class="line">          &#125;</div><div class="line">          conn.close();</div><div class="line">      &#125;</div><div class="line">      return msg;</div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   //插入插入数据</div><div class="line">   public boolean insert(User u)&#123;</div><div class="line">       boolean sign=false;//判断是否插入成功的标志</div><div class="line">       </div><div class="line">       Conndb conn =null;</div><div class="line">       PreparedStatement pst =null;</div><div class="line">       try&#123;</div><div class="line">           conn = new Conndb();</div><div class="line">         String  sql=&quot;INSERT INTO user(username,userpassword,usersex,&quot;</div><div class="line">                 + &quot;userbirthday,useraddcpc,useremail,userphone,useraddr,userhobbys)&quot;</div><div class="line">                   + &quot;VALUES (?,?,?,?,?,?,?,?,?)&quot;;</div><div class="line">             pst=conn.prepareStatement(sql);                                  </div><div class="line">                  pst.setString(1,u.getUsername());</div><div class="line">                  pst.setString(2,u.getUserpassword());</div><div class="line">                  pst.setString(3,u.getUsersex());</div><div class="line">                  pst.setString(4,u.getUserbirthday());</div><div class="line">                  pst.setString(5,u.getUseraddcpc());</div><div class="line">                  pst.setString(6,u.getUseremail());</div><div class="line">                  pst.setString(7,u.getUserphone());</div><div class="line">                  pst.setString(8,u.getUseraddr());</div><div class="line">                  pst.setString(9,u.getUserhobbys());</div><div class="line">                  </div><div class="line">                  sign=pst.executeUpdate()&gt;0;</div><div class="line">       &#125;catch(Exception e)&#123;</div><div class="line">           e.printStackTrace(System.err);</div><div class="line">       &#125;</div><div class="line">       finally&#123;</div><div class="line">           try&#123;</div><div class="line">               if(pst!=null)</div><div class="line">                   pst.close();</div><div class="line">           &#125;catch(SQLException e)&#123;</div><div class="line">               e.printStackTrace(System.err);</div><div class="line">           &#125;</div><div class="line">           conn.close();</div><div class="line">       &#125;</div><div class="line">       </div><div class="line">       return sign;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//////////////////修改后的register.jsp</div><div class="line">%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%-- 设置页面字符集--%&gt;</div><div class="line">&lt;%@page import=&quot;java.sql.*,java.util.*&quot; %&gt; &lt;%--导入访问数据库需要的包--%&gt;</div><div class="line">&lt;%@page import=&quot;conndb.*,javabean.*&quot; %&gt;&lt;!--数据库操作的类 --&gt;</div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</div><div class="line">        &lt;title&gt;register.jsp页面&lt;/title&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;h1&gt;接收register.html中的用户填写的注册信息,进行验证&lt;/h1&gt;&lt;br&gt;&lt;hr&gt;</div><div class="line">        &lt;h2&gt;这里是提示信息:&lt;/h2&gt;&lt;br&gt;</div><div class="line">            &lt;%</div><div class="line">                </div><div class="line">                //设置请求参数的编码字符集</div><div class="line">                request.setCharacterEncoding(&quot;utf-8&quot;);</div><div class="line">                </div><div class="line">                 /*</div><div class="line">                    1.定义数据类型</div><div class="line">                */  </div><div class="line">                //合并出生日期  (日期格式规定yyyy-MM-dd,不能在面前加中文)</div><div class="line">                String userbirthday=request.getParameter(&quot;dateyear&quot;)+&quot;-&quot;</div><div class="line">                   +request.getParameter(&quot;datemonth&quot;)+&quot;-&quot;</div><div class="line">                   +request.getParameter(&quot;dateday&quot;);</div><div class="line">                //合并所在地</div><div class="line">                String useraddcpc=request.getParameter(&quot;addcountry&quot;)</div><div class="line">                    +request.getParameter(&quot;addprovince&quot;)+&quot;省&quot;</div><div class="line">                     +request.getParameter(&quot;addcity&quot;)+&quot;市&quot;;</div><div class="line">                </div><div class="line">                //合并爱好集合</div><div class="line">                String userhobbys=&quot;&quot;;</div><div class="line">               String [] userhobbysAND=request.getParameterValues(&quot;userhobbys&quot;);</div><div class="line">                                for(int i=0;i&lt;userhobbysAND.length;i++)&#123;</div><div class="line">                                         if(i==userhobbysAND.length-1)&#123;</div><div class="line">                                              userhobbys+=userhobbysAND[i];</div><div class="line">                                              break;</div><div class="line">                                           &#125;   </div><div class="line">                                        userhobbys+=userhobbysAND[i]+&quot;,&quot;;</div><div class="line">                                &#125;</div><div class="line">            %&gt; </div><div class="line"></div><div class="line">             &lt;jsp:useBean class=&quot;javabean.User&quot; id=&quot;user&quot; /&gt; &lt;!-- 创建javabean对象user --&gt;</div><div class="line">             &lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot; /&gt;&lt;!--自动提取用户填的数据,同名传递--&gt;</div><div class="line">             </div><div class="line">             &lt;jsp:setProperty name=&quot;user&quot; property=&quot;userbirthday&quot;</div><div class="line">                              value=&quot;&lt;%=userbirthday%&gt;&quot; /&gt;</div><div class="line">             &lt;jsp:setProperty name=&quot;user&quot; property=&quot;useraddcpc&quot;</div><div class="line">                              value=&quot;&lt;%=useraddcpc%&gt;&quot;/&gt;</div><div class="line">             &lt;jsp:setProperty  name=&quot;user&quot; property=&quot;userhobbys&quot;</div><div class="line">                              value=&quot;&lt;%=userhobbys%&gt;&quot;/&gt;</div><div class="line">                              </div><div class="line">             &lt;%   </div><div class="line">                /**</div><div class="line">                 * 2.服务器端接收客户端输入</div><div class="line">                 *      利用request的getParameter方法得到的值均为String类型。</div><div class="line">                 *      可以将取得的数据转换为数值型，常用方法</div><div class="line">                 *      String sn=&quot;89&quot;,sp=&quot;12.5&quot;;</div><div class="line">                 *      int n=Integer.parseInt(sn);</div><div class="line">                 *      float n=Float.parseFloat(sp);</div><div class="line">                 *         double d= double.parseDouble(sp);</div><div class="line">                 */</div><div class="line"> </div><div class="line">                    </div><div class="line">                       UserBean ub =new UserBean();</div><div class="line">                       String msg=ub.basicCheck(user);//储存错误信息</div><div class="line">                        if(msg.equals(&quot;&quot;))&#123;</div><div class="line">                           msg=ub.uniqueName(user.getUsername());</div><div class="line">                       &#125;</div><div class="line">                       if(msg.equals(&quot;&quot;))&#123;</div><div class="line">                           if(!ub.insert(user))&#123;</div><div class="line">                              msg=&quot;Sorry,注册失败&quot;;</div><div class="line">                           &#125;</div><div class="line">                       &#125;</div><div class="line">                       if(msg.equals(&quot;&quot;))&#123;</div><div class="line">                           out.print(&quot;&lt;h3&gt;恭喜，注册成功,直接跳转到注册成功页面&lt;/h3&gt;&quot;);                </div><div class="line">                            request.getRequestDispatcher(&quot;registerSuccess.jsp&quot;).forward(request,response);                </div><div class="line">                       &#125;else&#123;</div><div class="line">                           out.print(&quot;&lt;h1&gt;注册失败！！&lt;h1&gt;&quot;);</div><div class="line">                       &#125;      </div><div class="line">                  </div><div class="line">            %&gt;</div><div class="line">            &lt;br&gt;&lt;hr&gt;&lt;br&gt;</div><div class="line">             </div><div class="line">            错误信息: &lt;%out.print(msg);%&gt;</div><div class="line">                             </div><div class="line">    &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<hr>
<p>c.注意：<br>c-1在使用jsp:setProperty&gt;动作接收表单数据前，应先加入代码request.setCharacterEncoding(“utf-8”),以便能正确提取中文的请求参数<br>c-2若希望使用jsp:setProperty property=”*” name=”instanceName” /&gt;这种形式为JavaBean实例中的属性赋值时，请求参数必须与JavaBean实例中的属性同名</p>
<hr>
<h2 id="6-23"><a href="#6-23" class="headerlink" title="6.23"></a>6.23</h2><p>1.Servlet和配置web.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> *2016.6.23 认识Servlet</div><div class="line"> * @author Liu-shuwei</div><div class="line"> */</div><div class="line"></div><div class="line">package servlet;</div><div class="line"></div><div class="line">import java.io.*;</div><div class="line">import java.util.Date;</div><div class="line">import javax.servlet.*;</div><div class="line">import javax.servlet.http.*;</div><div class="line"></div><div class="line">public class TryServlet extends HttpServlet&#123;</div><div class="line">    protected void doGet(HttpServletRequest request,HttpServletResponse response)</div><div class="line">                            throws ServletException,IOException&#123;</div><div class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</div><div class="line">        PrintWriter out =response.getWriter(); //out对象代表向客户端发送信息的输出流</div><div class="line">        out.println(&quot;&lt;html&gt;&quot;);</div><div class="line">        out.println(&quot;&lt;head&gt;&quot;);</div><div class="line">        out.println(&quot;&lt;title&gt;一个简单的Serlvet&lt;/title&gt;&quot;);</div><div class="line">        out.println(&quot;&lt;/head&gt;&quot;);</div><div class="line">        out.println(&quot;&lt;body&gt;&quot;);</div><div class="line">        out.println(new Date());</div><div class="line">        out.println(&quot;&lt;br&gt;欢迎来到Serlvet学习区&quot;);</div><div class="line">        out.println(&quot;&lt;/body&gt;&quot;);</div><div class="line">        out.println(&quot;&lt;/html&gt;&quot;);</div><div class="line">        out.flush();</div><div class="line">        out.close();</div><div class="line">        </div><div class="line">        /*</div><div class="line">            会话对象session是HttpSession类型的对象</div><div class="line">        */</div><div class="line">        HttpSession session=request.getSession();</div><div class="line">        /*</div><div class="line">            application为ServletContext类型的对象，</div><div class="line">            不论有多少个客户端在访问，每个应用只有一个application对象</div><div class="line">        */</div><div class="line">        ServletContext application =session.getServletContext();</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    protected void doPost(HttpServletRequest request,HttpServletResponse response)</div><div class="line">                            throws ServletException,IOException&#123;</div><div class="line">            doGet(request,response);                     </div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">///////////////////web.xml的&lt;web-app&gt;和&lt;/web-app&gt;标记间插入以下内容</div><div class="line">&lt;servlet&gt;</div><div class="line">        &lt;servlet-name&gt;OneTry&lt;/servlet-name&gt;</div><div class="line">        &lt;servlet-class&gt;servlet.TryServlet&lt;/servlet-class&gt;</div><div class="line">        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</div><div class="line">&lt;/servlet&gt;</div><div class="line">&lt;servlet-mapping&gt;</div><div class="line">        &lt;servlet-name&gt;OneTry&lt;/servlet-name&gt;</div><div class="line">        &lt;url-pattern&gt;/one&lt;/url-pattern&gt;</div><div class="line">        &lt;!--指定映射路径--&gt;S</div><div class="line">&lt;/servlet-mapping&gt;</div></pre></td></tr></table></figure></p>
<hr>
<p>2.NetBeans配置上下文路径<br>右键项目—-&gt;属性—-&gt;运行—–&gt;调整上下文路径<br>代码获得<br>`  举例：</p>
<p><form action="<%=request.getContextPath()%>/one" method="POST"><br>`</form></p>
<p>3.浏览器的URL地址栏可以直接访问<br><code>http://localhost:8084/JSPForumProject/one</code></p>
<p>4.NetBeans可以创建Servlet，自动生成的代码中，doGet和doPost方法均调用processRequest方法，因而此时无论客户端以GET方式还是POST方式发起请求，都将得到相同的访问结果。getServletInfo方法返回当前关于Servlet的描述信息。</p>
<hr>
<p>5.使用Servlet实现注册功能<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line">///////////注册页面的表单提交改为</div><div class="line">&lt;form action=&quot;&lt;%=request.getContextPath()%&gt;&quot;/CheckRegister&quot; method=&quot;POST&quot;/ &gt;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * 2016.6.23 使用Servlet实现检测注册信息</div><div class="line"> * @author Liu-shuwei</div><div class="line"> */</div><div class="line"></div><div class="line">package servlet;</div><div class="line"></div><div class="line">import javabean.User;</div><div class="line">import javabean.UserBean;</div><div class="line">import java.io.IOException;</div><div class="line">import java.io.PrintWriter;</div><div class="line">import javax.servlet.ServletException;</div><div class="line">import javax.servlet.http.HttpServlet;</div><div class="line">import javax.servlet.http.HttpServletRequest;</div><div class="line">import javax.servlet.http.HttpServletResponse;</div><div class="line">import javax.servlet.RequestDispatcher;</div><div class="line"></div><div class="line"></div><div class="line">public class CheckRegister extends HttpServlet &#123;</div><div class="line">   </div><div class="line">    @Override</div><div class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response)</div><div class="line">    throws ServletException, IOException &#123;</div><div class="line">        doPost(request,response);</div><div class="line">    &#125; </div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response)</div><div class="line">    throws ServletException, IOException &#123;</div><div class="line">        User u=new User();</div><div class="line">        u.setUsername(request.getParameter(&quot;username&quot;));</div><div class="line">        u.setUserpassword(request.getParameter(&quot;userpassword&quot;));</div><div class="line">        u.setUserpasswordtwo(request.getParameter(&quot;userpasswordtwo&quot;));</div><div class="line">        </div><div class="line">        //基本的数据验证</div><div class="line">        UserBean ub =new UserBean();</div><div class="line">        String msg=ub.basicCheck(u);</div><div class="line">        </div><div class="line">        if(msg.equals(&quot;&quot;))</div><div class="line">             msg=ub.uniqueName(u.getUsername());//验证用户唯一性</div><div class="line">        if(msg.equals(&quot;&quot;))&#123;                 </div><div class="line">            u.setUsersex(request.getParameter(&quot;usersex&quot;));</div><div class="line">            u.setUseremail(request.getParameter(&quot;usereamil&quot;));</div><div class="line">            u.setUserphone(request.getParameter(&quot;userphone&quot;));</div><div class="line">            </div><div class="line">            if(!ub.insert(u))&#123;</div><div class="line">                msg=&quot;Sorry,注册失败&quot;;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        request.setAttribute(&quot;msg&quot;, msg);//存储此请求中的属性</div><div class="line">        </div><div class="line">        //请求转发</div><div class="line">        RequestDispatcher rd =request.getRequestDispatcher(&quot;/jsp/registerSuccess.jsp&quot;);</div><div class="line">        rd.forward(request, response);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    @Override</div><div class="line">    public String getServletInfo() &#123;</div><div class="line">        return &quot;Short description&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="6-24"><a href="#6-24" class="headerlink" title="6.24"></a>6.24</h2><p>无</p>
<hr>
<h2 id="6-25"><a href="#6-25" class="headerlink" title="6.25"></a>6.25</h2><p>1.使用Ajax实现用户唯一性的即时检测</p>
<blockquote>
<p>Ajax</p>
<blockquote>
<p>1.是异步JavaSscript和XML(Asynchronous JavaScript and XML)的英文缩写，使用Ajax技术可以改善Web页面的即时交互性，可以实现页面的局部刷新</p>
<p>2.核心钙奶年在于使用XMLHttpRequest对象发送异步请求</p>
</blockquote>
</blockquote>
<hr>
<p>代码实现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">//修改register.html</div><div class="line">/////////////////////1.在head&gt;部分添加</div><div class="line">&lt;script src=&quot;../js/ajax.js&quot;&gt;&lt;/script&gt;</div><div class="line"></div><div class="line">/////////////////////2.的用户名输入部分</div><div class="line">&lt;tr&gt;</div><div class="line">     &lt;td class=&quot;middleformtdfirst&quot;&gt;</div><div class="line">         用户名</div><div class="line">      &lt;/td&gt;</div><div class="line">    &lt;td class=&quot;middleformtdsecond&quot;&gt;</div><div class="line">        &lt;input type=&quot;text&quot; name=&quot;username&quot; id=&quot;username&quot;  class=&quot;middleformtdsecondinput&quot;</div><div class="line">        onmouseover=&quot;inputchangecolor1(this)&quot; </div><div class="line">        onmouseout=&quot;inputchangecolor2(this)&quot;</div><div class="line">        onfocus=&quot; cleanvalue(this)&quot;</div><div class="line">        onblur=&quot;chkuser()&quot;  </div><div class="line">    /&gt;                      &lt;!--这里添加onblur事件--&gt;</div><div class="line">    &lt;/td&gt;</div><div class="line">    &lt;td class=&quot;middleformtdthird&quot;&gt;</div><div class="line">        &lt;span id=&quot;checkusername&quot;&gt;&lt;/span&gt;</div><div class="line">    &lt;/td&gt; </div><div class="line">&lt;/tr&gt;</div><div class="line"></div><div class="line">onFocus事件就是当光标落在文本框中时发生的事件。</div><div class="line">onBlur事件是光标失去焦点时发生的事件。</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">//编写完成异步检测的数个函数，创建ajax.js</div><div class="line">/*当页面载入时，先创建xmlhttp异步传输对象*/</div><div class="line">try&#123;</div><div class="line">    xmlHttp=new ActiveXObject(&quot;Msxml2.XMLTTP&quot;);</div><div class="line">&#125;catch(e)&#123;</div><div class="line">    try&#123;</div><div class="line">        xmlHttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div><div class="line">    &#125;catch(e2)&#123;</div><div class="line">        xmlHttp = false;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">if(!xmlHttp &amp;&amp; typeof XMLHttpRequest !=&apos;undefined&apos;)&#123;</div><div class="line">    </div><div class="line">    //创建XMLHttpRequest对象，之后将利用该对象向服务器发出异步请求</div><div class="line">    xmlHttp = new XMLHttpRequest(); </div><div class="line">&#125;</div><div class="line"></div><div class="line">/*----------各函数的定义------------------*/</div><div class="line"></div><div class="line">//通用函数----通过id获取DOM对象</div><div class="line">function $(id)&#123;</div><div class="line">    obj =document.getElementById(id);</div><div class="line">    return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*</div><div class="line">    函数chkuser,在注册页面，用户输入用户名，光标离开输入框时调用</div><div class="line">    功能：</div><div class="line">        向服务器发起请求，请检查用户名是否重复，并等待查询结果当服务器把处理结果传送回来后，</div><div class="line">        调用updatePageUser函数继续处理</div><div class="line">*/</div><div class="line">function chkuser()&#123;</div><div class="line">    var username=$(&apos;username&apos;).value;</div><div class="line"></div><div class="line">    if(username==null || username==&quot;&quot;)&#123;</div><div class="line">        alert(&apos;用户名不能为空，请输入用户名&apos;);</div><div class="line">        //该方法表示将焦点移动到对象上</div><div class="line">        $(&apos;username&apos;).focus();</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /*</div><div class="line">        设置完成后台检测的url,这里准备检测用户名</div><div class="line">        是否重复的Servlet发起请求，同时传递请求参数name(即需要检测的用户名),</div><div class="line">        该参数需经过编码，因为可能含有中文</div><div class="line">    </div><div class="line">        传参数username，three是在web.xml配置的路径,(../是返回根目录)</div><div class="line">        encodeURI 方法：返回编码为有效的统一资源标识符 (URI) 的字符串。 </div><div class="line">    */</div><div class="line">    var url=&quot;../three?username=&quot;+encodeURI(username); </div><div class="line">                       </div><div class="line">    /*</div><div class="line">        准备向服务器发起请求，设置请求的url，传递数据的方式为GET，第三个参数true表示采用异步请求</div><div class="line">    */</div><div class="line">    xmlHttp.open(&quot;GET&quot;,url,true);</div><div class="line">    </div><div class="line">   //当服务器的状态改变时候,由函数update进行跟踪处理 (指定由函数update跟踪此次请求的执行过程)</div><div class="line">   xmlHttp.onreadystatechange = update;</div><div class="line">   </div><div class="line">   //发出请求</div><div class="line">   xmlHttp.send(null);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">/*</div><div class="line">    函数update</div><div class="line">    功能：</div><div class="line">        根据服务器传回的处理结果，决定在客户端的页面中显示什么信息</div><div class="line">*/</div><div class="line">function update()&#123;</div><div class="line">    </div><div class="line">    /*</div><div class="line">     * 读取服务器发回的响应状态码(xmlHttp对象的readyState属性),判断是否已经完成本次请求</div><div class="line">     *  </div><div class="line">    0：请求未初始化（还没有调用 open()）。</div><div class="line">    1：请求已经建立，但是还没有发送（还没有调用 send()）。</div><div class="line">    2：请求已发送，正在处理中（通常现在可以从响应中获取内容头）。</div><div class="line">    3：请求在处理中；通常响应中已有部分数据可用了，但是服务器还没有完成响应的生成。</div><div class="line">    4：响应已完成；您可以获取并使用服务器的响应了。</div><div class="line"></div><div class="line">     */</div><div class="line">    if(xmlHttp.readyState!=4)&#123;</div><div class="line">        //本次请求未完成,在信息提示区显示提示信息</div><div class="line">        $(&apos;checkusername&apos;).innerHTML=&quot;正在检测...&quot;;</div><div class="line">    &#125;else&#123;</div><div class="line">        //本次请求完成，并传回响应结果</div><div class="line"></div><div class="line">        //读取服务器发回的响应的内容，这里是服务器执行Servlet(ChkUniqueName)后得到的结果(msg---错误信息)</div><div class="line">            var response =xmlHttp.responseText;</div><div class="line">            if(response!=&quot;&quot;)&#123;</div><div class="line">                //若在ChkUniqueName.java中检测用户名重复，则返回结果信息不为空</div><div class="line">                $(&apos;checkusername&apos;).innerHTML=&quot;很抱歉该用户名已被使用，请重新输入&quot;;</div><div class="line"></div><div class="line">                //光标定位在用户名输入框，等待用户重新输入</div><div class="line">                $(&apos;username&apos;).focus();</div><div class="line"></div><div class="line">            &#125;else&#123;</div><div class="line">                //若内</div><div class="line">                $(&apos;checkusername&apos;).innerHTML=&quot;恭喜，该用户名可以使用&quot;;</div><div class="line">            &#125;</div><div class="line">    &#125;</div><div class="line">&#125;//end of function update</div><div class="line"></div><div class="line"></div><div class="line">//////在服务器端执行检测操作的Servlet(ChkUniqueName.java)</div><div class="line">/**</div><div class="line"> * 2016.6.25 Servlet,检测用户名的唯一性,</div><div class="line"> * 只处理GET方式的请求，所以只重写doGet方法</div><div class="line"> * @author Liu-shuwei</div><div class="line"> */</div><div class="line"></div><div class="line">package servlet;</div><div class="line"></div><div class="line">import javabean.User;</div><div class="line">import javabean.UserBean;</div><div class="line"></div><div class="line">import java.io.*;</div><div class="line">import javax.servlet.ServletException;</div><div class="line">import javax.servlet.http.*;</div><div class="line"></div><div class="line">public class ChkUniqueName extends HttpServlet&#123;</div><div class="line">    protected void doGet(HttpServletRequest request,HttpServletResponse response)</div><div class="line">                            throws ServletException,IOException&#123;</div><div class="line">        System.out.println(&quot;正在检测用户唯一性...............ChkUniqueName.java&quot;);</div><div class="line">        </div><div class="line">        //保证浏览器不缓存次次请求的响应内容，这些代码不能省略，否则有可能引起错误的检测结果       </div><div class="line">        response.setHeader(&quot;pargma&quot;, &quot;no-cache&quot;);</div><div class="line">        response.setHeader(&quot;cache-control&quot;,&quot;no-cache,must-revalidate&quot;);</div><div class="line">        response.setHeader(&quot;expires&quot;, &quot;0&quot;);</div><div class="line">        response.setContentType(&quot;text/html;charset=UTF-8&quot;);</div><div class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</div><div class="line">        </div><div class="line">        User u = new User();//创建User类的对象</div><div class="line">        u.setUsername(request.getParameter(&quot;username&quot;));//设置username的属性值为用户所输入的用户名</div><div class="line">        </div><div class="line">        UserBean ub = new UserBean();</div><div class="line">        String msg =ub.uniqueName(u.getUsername());//调用方法，进行用户唯一性验证，结果保存到msg</div><div class="line">        </div><div class="line">        //将检测结果输出到客户端</div><div class="line">        PrintWriter out =response.getWriter();</div><div class="line">        out.print(msg);</div><div class="line">        out.flush();//刷新</div><div class="line">        out.close();//关闭输出流</div><div class="line">        System.out.println(&quot;-----------------检测完毕-----------&quot;);</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">///在WEB-INF目录下的web.xml的web-app&gt;和/web-app&gt;标签之间添加</div><div class="line">&lt;servlet&gt;</div><div class="line">        &lt;servlet-name&gt;ChkUniqueName&lt;/servlet-name&gt;</div><div class="line">        &lt;servlet-class&gt;servlet.ChkUniqueName&lt;/servlet-class&gt;</div><div class="line">    &lt;/servlet&gt;</div><div class="line">    &lt;servlet-mapping&gt;</div><div class="line">        &lt;servlet-name&gt;ChkUniqueName&lt;/servlet-name&gt;   </div><div class="line">        &lt;url-pattern&gt;/three&lt;/url-pattern&gt;   </div><div class="line">    &lt;/servlet-mapping&gt;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="6-26-6-27"><a href="#6-26-6-27" class="headerlink" title="6.26-6.27"></a>6.26-6.27</h2><p>无</p>
<hr>
<h2 id="6-28"><a href="#6-28" class="headerlink" title="6.28"></a>6.28</h2><p>1.在下载了jspsmartupload，还未加入到项目中</p>
<hr>
<h2 id="6-29—–7-31"><a href="#6-29—–7-31" class="headerlink" title="6.29—–7.31"></a>6.29—–7.31</h2><p>无</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/MyProject/" rel="tag"># MyProject</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/06/27/Ecplise_快捷键整理/" rel="next" title="Ecplise_快捷键整理">
                <i class="fa fa-chevron-left"></i> Ecplise_快捷键整理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/08/01/Life_突入奇来的想法【2016.8.1】/" rel="prev" title="Life_突入奇来的想法【2016.8.1】">
                Life_突入奇来的想法【2016.8.1】 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/suvan.png"
               alt="liushuwei" />
          <p class="site-author-name" itemprop="name">liushuwei</p>
           
              <p class="site-description motion-element" itemprop="description">Suvan的博客</p>
          
        </div>
        <nav class="site-state motion-element">
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">59</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">31</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">31</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Suvan-L" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="liushuwei0925@gmail.com" target="_blank" title="Gmail">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Gmail
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="526097449" target="_blank" title="QQ">
                  
                    <i class="fa fa-fw fa-qq"></i>
                  
                  QQ
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#记录"><span class="nav-number">1.</span> <span class="nav-text">记录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6"><span class="nav-number">1.1.</span> <span class="nav-text">6.6</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-7"><span class="nav-number">1.2.</span> <span class="nav-text">6.7</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-8"><span class="nav-number">1.3.</span> <span class="nav-text">6.8</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-9"><span class="nav-number">1.4.</span> <span class="nav-text">6.9</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-10-未完成"><span class="nav-number">1.5.</span> <span class="nav-text">6.10(未完成)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-11"><span class="nav-number">1.6.</span> <span class="nav-text">6.11</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-12"><span class="nav-number">1.7.</span> <span class="nav-text">6.12</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-13"><span class="nav-number">1.8.</span> <span class="nav-text">6.13</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-14"><span class="nav-number">1.9.</span> <span class="nav-text">6.14</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-15"><span class="nav-number">1.10.</span> <span class="nav-text">6.15</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-16"><span class="nav-number">1.11.</span> <span class="nav-text">6.16</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-17"><span class="nav-number">1.12.</span> <span class="nav-text">6.17</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-18"><span class="nav-number">1.13.</span> <span class="nav-text">6.18</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-19"><span class="nav-number">1.14.</span> <span class="nav-text">6.19</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-20"><span class="nav-number">1.15.</span> <span class="nav-text">6.20</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-21"><span class="nav-number">1.16.</span> <span class="nav-text">6.21</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-22"><span class="nav-number">1.17.</span> <span class="nav-text">6.22</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-23"><span class="nav-number">1.18.</span> <span class="nav-text">6.23</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-24"><span class="nav-number">1.19.</span> <span class="nav-text">6.24</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-25"><span class="nav-number">1.20.</span> <span class="nav-text">6.25</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-26-6-27"><span class="nav-number">1.21.</span> <span class="nav-text">6.26-6.27</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-28"><span class="nav-number">1.22.</span> <span class="nav-text">6.28</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-29—–7-31"><span class="nav-number">1.23.</span> <span class="nav-text">6.29—–7.31</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script> <!--博客量统计-->
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liushuwei</span>
</div>


<div class="powered-by">
   
  <!--
    由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
    -->
</div>

<div class="theme-info">
	高调做事,低调做人

  <!-- 主题
    主题 -
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Mist
    </a>
  -->
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
