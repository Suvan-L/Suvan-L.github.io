<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
    
  
  <link href="https://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  

  

  

  

  

  






  

<link href="https://cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="WorkProject," />





  <link rel="alternate" href="/atom.xml" title="Suvan" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="目录  帮助小伙伴们快速开发，总结 6 个通用模版 ，API 文档样式，应根据网站不同进行相应变化，总体设计思路一致  List Detail Params Combine API 文档格式 2017.01.16 新增模板说明 ListCombine（新增） DetailCombine（新增）  1. List12345678910111213141516171819202122232425262">
<meta name="keywords" content="WorkProject">
<meta property="og:type" content="article">
<meta property="og:title" content="标讯快车_通用型 LDPC 模版">
<meta property="og:url" content="http://suvan-l.github.io/2016/08/17/WorkProject_标讯快车_通用型 LDPC 模版/index.html">
<meta property="og:site_name" content="Suvan">
<meta property="og:description" content="目录  帮助小伙伴们快速开发，总结 6 个通用模版 ，API 文档样式，应根据网站不同进行相应变化，总体设计思路一致  List Detail Params Combine API 文档格式 2017.01.16 新增模板说明 ListCombine（新增） DetailCombine（新增）  1. List12345678910111213141516171819202122232425262">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-01-17T02:49:46.118Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="标讯快车_通用型 LDPC 模版">
<meta name="twitter:description" content="目录  帮助小伙伴们快速开发，总结 6 个通用模版 ，API 文档样式，应根据网站不同进行相应变化，总体设计思路一致  List Detail Params Combine API 文档格式 2017.01.16 新增模板说明 ListCombine（新增） DetailCombine（新增）  1. List12345678910111213141516171819202122232425262">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"right","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://suvan-l.github.io/2016/08/17/WorkProject_标讯快车_通用型 LDPC 模版/"/>





  <title>标讯快车_通用型 LDPC 模版 | Suvan</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Suvan</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">blog</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://suvan-l.github.io/2016/08/17/WorkProject_标讯快车_通用型 LDPC 模版/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘淑玮">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/suvan-min.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Suvan">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">标讯快车_通用型 LDPC 模版</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-08-17T11:28:43+08:00">
                2016-08-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/WorkProject/" itemprop="url" rel="index">
                    <span itemprop="name">WorkProject</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  3,810
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  21
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p>  帮助小伙伴们快速开发，总结 6 个通用模版 ，API 文档样式，应根据网站不同进行相应变化，总体设计思路一致</p>
<ol>
<li>List</li>
<li>Detail</li>
<li>Params</li>
<li>Combine</li>
<li>API 文档格式</li>
<li>2017.01.16 新增模板说明</li>
<li>ListCombine（新增）</li>
<li>DetailCombine（新增）</li>
</ol>
<h2 id="1-List"><a href="#1-List" class="headerlink" title="1. List"></a>1. List</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div></pre></td><td class="code"><pre><div class="line">package XN03472;</div><div class="line">import java.net.URL;</div><div class="line">import java.net.URLConnection;</div><div class="line">import java.text.SimpleDateFormat;</div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.Date;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">import org.apache.commons.io.IOUtils;</div><div class="line">import org.w3c.dom.Document;</div><div class="line">import org.w3c.dom.Element;</div><div class="line">import org.w3c.dom.NodeList;</div><div class="line"></div><div class="line">import cn.internetware.phone.extension.response.RspState;</div><div class="line">import cn.internetware.phone.extension.response.TxtRspObject;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtBaseResponse;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtRspHandler;</div><div class="line">import cn.internetware.utils.IO;</div><div class="line">import cn.internetware.utils.Utils;</div><div class="line"></div><div class="line"></div><div class="line">public class ZBList extends TxtRspHandler &#123;</div><div class="line"></div><div class="line">    public class Response extends TxtBaseResponse &#123;</div><div class="line">        List&lt;BranchNew&gt; list = new ArrayList&lt;BranchNew&gt;();</div><div class="line">        String pageCount;</div><div class="line">        //String currentPage;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public class BranchNew &#123;</div><div class="line">        String title;</div><div class="line">        String id;</div><div class="line">        String date;</div><div class="line">        String url;</div><div class="line"></div><div class="line">        public String toString() &#123;</div><div class="line">            return &quot;BranchNew[ title=&quot; + title + &quot;;date=&quot;+date+&quot;;id=&quot; + id +&quot;;url=&quot;+url;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected RspState checkTxtRspContentState(String originTxtRspContent) &#123;</div><div class="line">        return RspState.Login;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected TxtRspObject processTxtRspContent(RspState rspState,</div><div class="line">            String originTxtRspContent) &#123;</div><div class="line">        Response response = new Response();</div><div class="line">        if (rspState == RspState.Login) &#123;</div><div class="line">            try &#123;</div><div class="line">                </div><div class="line">                /* listOne    listSecord   listThird</div><div class="line">                 * ele1         ele2       ele3</div><div class="line">                 */</div><div class="line">                </div><div class="line">                </div><div class="line">                originTxtRspContent=&quot;&lt;div&gt;&quot;+originTxtRspContent+&quot;&lt;/div&gt;&quot;;</div><div class="line">//              System.out.println(originTxtRspContent);</div><div class="line">                Document xmlDoc=Utils.getDocByContent(originTxtRspContent);</div><div class="line">                </div><div class="line">                //获取title，id，url</div><div class="line">                int count=0;</div><div class="line">                NodeList listOne=xmlDoc.getElementsByTagName(&quot;ul&quot;);</div><div class="line">                for (int i = 0; i &lt; listOne.getLength(); i++) &#123; </div><div class="line">                    Element ele1=(Element)listOne.item(i);</div><div class="line">                    </div><div class="line">                    if(&quot;item_list&quot;.equals(ele1.getAttribute(&quot;id&quot;)))&#123;</div><div class="line">                        if(++count!=1) continue;</div><div class="line">                        </div><div class="line">                        NodeList listSecord=ele1.getElementsByTagName(&quot;li&quot;);</div><div class="line">                        if(listSecord!=null)&#123;;</div><div class="line">                            for(int j=0;j&lt;listSecord.getLength();j++)&#123;              </div><div class="line">                                Element ele2=(Element)listSecord.item(j);</div><div class="line"></div><div class="line">                                //没有a标签则退出循环</div><div class="line">                                NodeList a_list=ele2.getElementsByTagName(&quot;A&quot;);</div><div class="line">                                if(a_list.getLength()&lt;1) continue;</div><div class="line">                                </div><div class="line">                                Element a_ele=(Element)ele2.getElementsByTagName(&quot;A&quot;).item(0);</div><div class="line">                                Element span_ele=(Element)ele2.getElementsByTagName(&quot;SPAN&quot;).item(0);</div><div class="line">                                </div><div class="line">                                String title=a_ele.getTextContent().trim();</div><div class="line">//                              title=title.substring(1);</div><div class="line">                                </div><div class="line">                                String href=a_ele.getAttribute(&quot;href&quot;).trim();</div><div class="line">                                String id=href.substring(href.indexOf(&quot;Item/&quot;)+5,href.lastIndexOf(&quot;.&quot;)).trim();</div><div class="line">                                    </div><div class="line">                                String url=getNewPathPrefix()+&quot;/bnuser_3/?&quot;+</div><div class="line">                                                getAdditionalLinkParamStr()+</div><div class="line">                                                &quot;&amp;iw-cmd=03472XNDetail&amp;iw_ir_2=&quot;+id;</div><div class="line">                                </div><div class="line">                                String date=span_ele.getTextContent().trim();</div><div class="line">//                              date=date.substring(1,11);</div><div class="line">                                date=date.substring(date.indexOf(&quot;[&quot;)+1,date.lastIndexOf(&quot;]&quot;));</div><div class="line">//                              Date date_D = (Date) new SimpleDateFormat(&quot;yyyy/MM/dd&quot;).parse(date); </div><div class="line">//                              date = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(date_D);</div><div class="line">                                    </div><div class="line">                                    </div><div class="line">                                    //创建对象</div><div class="line">                                    BranchNew branchNew=new BranchNew();        </div><div class="line">                                    branchNew.title=title;</div><div class="line">                                    branchNew.date=date;        </div><div class="line">                                    branchNew.id=id;            </div><div class="line">                                    branchNew.url=url;</div><div class="line">                                    response.list.add(branchNew);</div><div class="line">                            </div><div class="line">                                    System.out.println(branchNew.toString());</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                //获取总页数</div><div class="line">                int count2=0;</div><div class="line">                String pageCount=null;</div><div class="line">//              pageCount=originTxtRspContent.substring(originTxtRspContent.indexOf(&quot;页次：&quot;)+3);</div><div class="line">//              response.pageCount=pageCount.substring(pageCount.indexOf(&quot;/&quot;)+1,pageCount.indexOf(&quot;每&quot;)).trim().replace(&quot;&amp;nbsp;&quot;,&quot;&quot;);</div><div class="line">                NodeList listThird=xmlDoc.getElementsByTagName(&quot;div&quot;);</div><div class="line">                if(listThird!=null)&#123;</div><div class="line">                    for(int i=0;i&lt;listThird.getLength();i++)&#123;</div><div class="line">                        Element ele3=(Element)listThird.item(i);</div><div class="line">                        </div><div class="line">                        if(&quot;page&quot;.equals(ele3.getAttribute(&quot;class&quot;)))&#123;</div><div class="line">                            if(++count2!=1) continue;</div><div class="line">                            </div><div class="line">                            pageCount=ele3.getTextContent().trim();</div><div class="line">                            pageCount=pageCount.substring(pageCount.indexOf(&quot;共&quot;)+1,pageCount.indexOf(&quot;篇&quot;));</div><div class="line">                            int page=Integer.valueOf(pageCount);</div><div class="line">                            if(page%20==0)</div><div class="line">                                pageCount=String.valueOf(page/20);</div><div class="line">                            else</div><div class="line">                                pageCount=String.valueOf(page/20+1);</div><div class="line">                            response.pageCount=pageCount;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                if(response.pageCount==null)&#123;</div><div class="line">                    response.pageCount=&quot;1&quot;;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                System.out.println(response.pageCount);</div><div class="line">            &#125;catch (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return response;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    final static int TIMEOUT_IN_MS = 100000;</div><div class="line"></div><div class="line">    private static String callApi(String path) &#123;</div><div class="line">        String result = &quot;&quot;;</div><div class="line">        byte[] retBytes = new byte[0];</div><div class="line">        try &#123;</div><div class="line">            URLConnection conn = new URL(path).openConnection();</div><div class="line">            conn.setConnectTimeout(TIMEOUT_IN_MS);</div><div class="line">            conn.setReadTimeout(TIMEOUT_IN_MS);</div><div class="line">            retBytes = IOUtils.toByteArray(conn);</div><div class="line">            result = new String(retBytes, &quot;UTF-8&quot;);</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        ZBList handler = new ZBList();</div><div class="line"></div><div class="line">        try &#123;</div><div class="line">            String originRspContent = IO</div><div class="line">                    .deserializeString(&quot;internetware/bnuser3_3/apis/03472-dcf36ba4a718406786f3adf8c464bca4-XNList/SampleResponse&quot;,&quot;UTF-8&quot;);</div><div class="line">            handler.processRspContent(</div><div class="line">                    handler.checkTxtRspContentState(originRspContent),</div><div class="line">                    originRspContent);</div><div class="line"></div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-Detail"><a href="#2-Detail" class="headerlink" title="2. Detail"></a>2. Detail</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div></pre></td><td class="code"><pre><div class="line">package XN03472;</div><div class="line"></div><div class="line">import org.w3c.dom.Document;</div><div class="line">import org.w3c.dom.Element;</div><div class="line">import org.w3c.dom.NodeList;</div><div class="line"></div><div class="line">import cn.internetware.phone.extension.response.RspState;</div><div class="line">import cn.internetware.phone.extension.response.TxtRspObject;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtBaseResponse;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtRspHandler;</div><div class="line">import cn.internetware.utils.IO;</div><div class="line">import cn.internetware.utils.Utils;</div><div class="line"></div><div class="line">public class ZBDetail extends TxtRspHandler &#123;</div><div class="line">    </div><div class="line">    public class Response extends TxtBaseResponse &#123;</div><div class="line">        String content;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    @Override</div><div class="line">    protected RspState checkTxtRspContentState(String originTxtRspContent) &#123;</div><div class="line">        return RspState.Login;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected TxtRspObject processTxtRspContent(RspState rspState,</div><div class="line">            String originTxtRspContent) &#123;</div><div class="line">        Response response = new Response();</div><div class="line">        if (rspState == RspState.Login) &#123;</div><div class="line">            try &#123;</div><div class="line">                </div><div class="line">                /*listFist </div><div class="line">                 * ele1  </div><div class="line">                 */</div><div class="line">                </div><div class="line">                originTxtRspContent = &quot;&lt;div&gt;&quot; + originTxtRspContent+ &quot;&lt;/div&gt;&quot;;</div><div class="line">//              System.out.println(originTxtRspContent);</div><div class="line">                </div><div class="line">                Document xmlDoc = Utils.getDocByContent(originTxtRspContent);</div><div class="line">                </div><div class="line">                //获取content</div><div class="line">                int count=0;</div><div class="line">                String content=&quot;&quot;;</div><div class="line">                NodeList listFist=xmlDoc.getElementsByTagName(&quot;div&quot;);</div><div class="line">                if(listFist!=null)&#123;</div><div class="line">                    for(int j=0;j&lt;listFist.getLength();j++)&#123;</div><div class="line">                        Element ele1=(Element)listFist.item(j);</div><div class="line">    </div><div class="line">                        if(&quot;fontZoom&quot;.equals(ele1.getAttribute(&quot;id&quot;)))&#123;</div><div class="line">                            if(++count!=1) continue;</div><div class="line">                            </div><div class="line">                            NodeList a_list=ele1.getElementsByTagName(&quot;a&quot;);</div><div class="line">                             if(a_list.getLength()&gt;0)&#123;</div><div class="line">                                 for(int i=0;i&lt;a_list.getLength();i++)&#123;</div><div class="line">                   </div><div class="line">                                     Element a_ele=(Element)a_list.item(i);</div><div class="line">                                     String href=a_ele.getAttribute(&quot;href&quot;);</div><div class="line">                                     </div><div class="line">                                     if(href.indexOf(&quot;http&quot;)!=-1 || href.length()&lt;5)&#123;</div><div class="line">                                         continue;</div><div class="line">                                     &#125;</div><div class="line"></div><div class="line">                                     if(href.indexOf(&quot;/&quot;)&gt;=1)&#123;</div><div class="line">                                          href=href.replaceFirst(&quot;./&quot;,&quot;http://www.ynxy.gov.cn/&quot;);</div><div class="line">                                     &#125;else&#123;</div><div class="line">                                         href=href.replaceFirst(&quot;/&quot;,&quot;http://www.ynxy.gov.cn/&quot;);</div><div class="line">                                     &#125;</div><div class="line">                                     a_ele.setAttribute(&quot;href&quot;, href);</div><div class="line">                                 &#125;</div><div class="line">                             &#125;</div><div class="line">                             </div><div class="line">                             NodeList img_list=ele1.getElementsByTagName(&quot;img&quot;);</div><div class="line">                             if(img_list.getLength()&gt;0)&#123;</div><div class="line">                                 for(int i=0;i&lt;img_list.getLength();i++)&#123;</div><div class="line">                                     Element img_ele=(Element)img_list.item(i);</div><div class="line">                                          </div><div class="line">                                     String src=img_ele.getAttribute(&quot;src&quot;);</div><div class="line">                                     </div><div class="line">                                     if(src.indexOf(&quot;http&quot;)!=-1  || src.length()&lt;5)&#123;</div><div class="line">                                         continue;</div><div class="line">                                     &#125;</div><div class="line"></div><div class="line">                                     if(src.indexOf(&quot;/&quot;)&gt;=1)&#123;</div><div class="line">                                      src=src.replaceFirst(&quot;./&quot;,&quot;http://www.ynxy.gov.cn/&quot;);</div><div class="line">                                    &#125;else&#123;</div><div class="line">                                     src=src.replaceFirst(&quot;/&quot;,&quot;http://www.ynxy.gov.cn/&quot;);</div><div class="line">                                    &#125;</div><div class="line">                                     </div><div class="line">                                     img_ele.setAttribute(&quot;src&quot;, src);</div><div class="line">                                 &#125;</div><div class="line">                             &#125; </div><div class="line">                             </div><div class="line">                             content=Utils.getNodeHtml(ele1);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            </div><div class="line">        </div><div class="line">                 response.content=content;</div><div class="line">                 </div><div class="line">                 //测试输出</div><div class="line">                 System.out.println(response.content);</div><div class="line">           </div><div class="line"></div><div class="line">            &#125;catch (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return response;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        ZBDetail handler = new ZBDetail();</div><div class="line"></div><div class="line">        try &#123;</div><div class="line">            String originRspContent = IO</div><div class="line">                    .deserializeString(&quot;internetware/bnuser3_3/apis/03472-50d1ef5fbcb14e7b9068d099b054575a-XNDetail/SampleResponse&quot;,&quot;UTF-8&quot;);</div><div class="line">            handler.processRspContent(</div><div class="line">                    handler.checkRspContentState(originRspContent),</div><div class="line">                    originRspContent);</div><div class="line">            handler.transformTableToBeImage(originRspContent);</div><div class="line">            // System.out.println(originRspContent);</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="3-Params"><a href="#3-Params" class="headerlink" title="3. Params"></a>3. Params</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div></pre></td><td class="code"><pre><div class="line">import java.net.URL;</div><div class="line">import java.net.URLConnection;</div><div class="line"></div><div class="line">import org.apache.commons.io.IOUtils;</div><div class="line">import org.w3c.dom.Document;</div><div class="line"></div><div class="line">import cn.internetware.phone.extension.response.RspState;</div><div class="line">import cn.internetware.phone.extension.response.TxtRspObject;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtBaseResponse;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtRspHandler;</div><div class="line">import cn.internetware.utils.IO;</div><div class="line">import cn.internetware.utils.Utils;</div><div class="line"></div><div class="line"></div><div class="line">public class ZBParams extends TxtRspHandler &#123;</div><div class="line"></div><div class="line">    public class Response extends TxtBaseResponse &#123;</div><div class="line">        Params params = new Params();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public class Params &#123; </div><div class="line"></div><div class="line">        //分析页面，得出跳页需要的几个请求参数(第一页的表单提交数据，可通过浏览器的F12进行查看)</div><div class="line">        String __CSRFTOKEN;</div><div class="line">        String __VIEWSTATE;</div><div class="line">        String __EVENTTARGET;</div><div class="line">        String __EVENTARGUMENT;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public String toString() &#123;</div><div class="line">            return &quot;Params [__CSRFTOKEN=&quot;+__CSRFTOKEN+&quot;;__VIEWSTATE=&quot; + __VIEWSTATE </div><div class="line">                    + &quot;;__EVENTTARGET=&quot; + __EVENTTARGET </div><div class="line">                    + &quot;;__EVENTARGUMENT=&quot; + __EVENTARGUMENT+ &quot;]&quot;;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    protected RspState checkTxtRspContentState(String originTxtRspContent) &#123;</div><div class="line">        return RspState.Login;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    protected TxtRspObject processTxtRspContent(RspState rspState,</div><div class="line">            String originTxtRspContent) &#123;</div><div class="line">        Response response = new Response();</div><div class="line">        if (rspState == RspState .Login) &#123;</div><div class="line">            try &#123;</div><div class="line">                originTxtRspContent = &quot;&lt;table&gt;&quot; + originTxtRspContent</div><div class="line">                        + &quot;&lt;/table&gt;&quot;;</div><div class="line">                Document xmlDoc = Utils.getDocByContent(originTxtRspContent);</div><div class="line">                </div><div class="line">                //注意要做判断</div><div class="line">                if(xmlDoc.getElementById(&quot;__CSRFTOKEN&quot;)!=null)&#123;</div><div class="line">                    response.params.__CSRFTOKEN = xmlDoc.getElementById(</div><div class="line">                    &quot;__CSRFTOKEN&quot;).getAttribute(&quot;value&quot;);</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                //动态请求</div><div class="line">                if(xmlDoc.getElementById(&quot;__VIEWSTATE&quot;)!=null)&#123;</div><div class="line">                    response.params.__VIEWSTATE = xmlDoc.getElementById(</div><div class="line">                            &quot;__VIEWSTATE&quot;).getAttribute(&quot;value&quot;);</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">  </div><div class="line">                if(xmlDoc.getElementById(&quot;__EVENTTARGET&quot;)!=null)&#123;</div><div class="line">                    response.params.__EVENTTARGET = xmlDoc.getElementById(</div><div class="line">                            &quot;__EVENTTARGET&quot;).getAttribute(&quot;value&quot;);                 </div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                //一般都是，页数</div><div class="line">                if(xmlDoc.getElementById(&quot;__EVENTARGUMENT&quot;)!=null)&#123;</div><div class="line">                    response.params.__EVENTARGUMENT = xmlDoc.getElementById(</div><div class="line">                            &quot;__EVENTARGUMENT&quot;).getAttribute(&quot;value&quot;);               </div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                System.out.println(response.params.toString());</div><div class="line">            &#125; catch (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        //System.out.println(response.params.toString());</div><div class="line">        return response;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    final static int TIMEOUT_IN_MS = 100000;</div><div class="line"></div><div class="line"></div><div class="line">    //访问路径的方法，并返回内容</div><div class="line">    private static String callApi(String path) &#123;</div><div class="line">        String result = &quot;&quot;;</div><div class="line">        byte[] retBytes = new byte[0];</div><div class="line">        try &#123;</div><div class="line">            URLConnection conn = new URL(path).openConnection();</div><div class="line">            conn.setConnectTimeout(TIMEOUT_IN_MS);</div><div class="line">            conn.setReadTimeout(TIMEOUT_IN_MS);</div><div class="line">            retBytes = IOUtils.toByteArray(conn);</div><div class="line">            result = new String(retBytes, &quot;UTF-8&quot;);</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        ZBParams handler = new ZBParams();</div><div class="line">        try &#123;</div><div class="line"></div><div class="line">            //Params的相对路径(第一页)和编码格式</div><div class="line">            String originRspContent = IO</div><div class="line">                    .deserializeString(&quot;internetware/bnuser3/apis/00961-d2390d537d5949a0836b2be693694581-CQWZParams/SampleResponse_1&quot;,&quot;UTF-8&quot;);</div><div class="line">            handler.processRspContent(</div><div class="line">                    handler.checkRspContentState(originRspContent),</div><div class="line">                    originRspContent);</div><div class="line">            // System.out.println(originRspContent);</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            // TODO Auto-generated catch block</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-Combine"><a href="#4-Combine" class="headerlink" title="4. Combine"></a>4. Combine</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div></pre></td><td class="code"><pre><div class="line">import java.io.IOException;</div><div class="line"></div><div class="line">import java.net.MalformedURLException;</div><div class="line">import java.net.URL;</div><div class="line">import java.net.URLConnection;</div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">import org.apache.commons.io.IOUtils;</div><div class="line">import org.json.JSONArray;</div><div class="line">import org.json.JSONObject;</div><div class="line"></div><div class="line">import cn.internetware.phone.extension.reqrsp.IwRequest;</div><div class="line">import cn.internetware.phone.extension.reqrsp.IwResponse;</div><div class="line">import cn.internetware.phone.extension.reqrsp.impl.DefaultIwResponse;</div><div class="line">import cn.internetware.phone.extension.reqrsp.impl.TxtReqRspHandler;</div><div class="line">import cn.internetware.phone.extension.response.RspState;</div><div class="line">import cn.internetware.phone.extension.response.TxtRspObject;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtBaseResponse;</div><div class="line">import cn.internetware.utils.IO;</div><div class="line">import cn.internetware.utils.Utils;</div><div class="line"></div><div class="line">import com.google.common.reflect.TypeToken;</div><div class="line">import com.google.gson.Gson;</div><div class="line"></div><div class="line">public class ZBCombine extends TxtReqRspHandler &#123;</div><div class="line"></div><div class="line">   public class Response extends TxtBaseResponse &#123;</div><div class="line"></div><div class="line">        List&lt;BranchNew&gt; list = new ArrayList&lt;BranchNew&gt;();</div><div class="line">        String pageCount;</div><div class="line">        //String currentPage;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public class BranchNew &#123;</div><div class="line">        String title;</div><div class="line">        String id;</div><div class="line">        String date;</div><div class="line">        String url;</div><div class="line">    </div><div class="line">        </div><div class="line">        public String toString() &#123;</div><div class="line">            return &quot;BranchNew[ title=&quot; + title + &quot;;id=&quot; + id + &quot;;date=&quot; + date+ &quot;;url=&quot; + url+ &quot;]&quot;;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected RspState checkTxtRspContentState(String originTxtRspContent) &#123;</div><div class="line"></div><div class="line">        return RspState.Login;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    protected TxtRspObject processTxtRspContent(RspState rspState,</div><div class="line">            String originTxtRspContent) &#123;</div><div class="line">        Response response = new Response();</div><div class="line">        if (rspState == RspState.Login) &#123;</div><div class="line">            Gson gson = new Gson();</div><div class="line">            Response result = gson.fromJson(originTxtRspContent,</div><div class="line">                    new TypeToken&lt;Response&gt;() &#123;</div><div class="line">                    &#125;.getType());</div><div class="line"></div><div class="line">            response.list = result.list;</div><div class="line">            response.pageCount=result.pageCount;</div><div class="line">            //response.currentPage = result.currentPage;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return response;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    final static int TIMEOUT_IN_MS = 100000;</div><div class="line"></div><div class="line">    //跳转path的方法</div><div class="line">    private static String callApi(String path) &#123;</div><div class="line">        byte[] retBytes = new byte[0];</div><div class="line">        try &#123;</div><div class="line">            URLConnection conn = new URL(path).openConnection();</div><div class="line">            conn.setConnectTimeout(TIMEOUT_IN_MS);</div><div class="line">            conn.setReadTimeout(TIMEOUT_IN_MS);</div><div class="line">            retBytes = IOUtils.toByteArray(conn);</div><div class="line"></div><div class="line">            return new String(retBytes, &quot;UTF-8&quot;);</div><div class="line">        &#125; catch (MalformedURLException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; catch (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return &quot;&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">      public IwResponse sendIwRequest(IwRequest iwRequest) &#123; //iwRequest可以理解为api.xml文档的内容</div><div class="line">        IwResponse iwRsp = null;   </div><div class="line">        try &#123;                   </div><div class="line">            </div><div class="line">            //获取Combine，api.xml里的&quot;__EVENTARGUMENT&quot;请求参数的值，页数</div><div class="line">            String EVENTARGUMENT = iwRequest.getRequestContentParam(&quot;__EVENTARGUMENT&quot;).trim();</div><div class="line">            //获取请求地址路径中，&quot;categoryid&quot;参数的值 (可以理解为获取Combine目录的api.xml参数categoryid的值)</div><div class="line">            String categoryid=iwRequest.getRequestPathParam(&quot;categoryid&quot;).trim();</div><div class="line">            </div><div class="line">            //拼接成跳到Params页的URL，分析页面跳页URL是否只变化请求，内容是否会变(边的话可以考虑配正则)                      这里填写跳转到Params的映射</div><div class="line">            String ahParamsUrl=getNewPathPrefix()+&quot;/?&quot;+getAdditionalLinkParamStr()+&quot;&amp;iw-cmd=01026_1ZJParams&quot; </div><div class="line">                    +&quot;&amp;categoryid=&quot;+categoryid; // w_ir_2是List的api.xml 正则表达式(.*)的内容</div><div class="line"></div><div class="line"></div><div class="line">            //使用Utils工具类的callApi方法，对上面拼接的URL进行跳转，并且将跳转页面的内容，保存在一个字符串变量ahParamsList中</div><div class="line">            String ahParamsList=Utils.callApi(ahParamsUrl);</div><div class="line">        </div><div class="line">            //使用JSOH解析器，解析页面(ahParamsList的内容)，可以理解为解析List的api.xml</div><div class="line">            JSONObject json=new JSONObject(ahParamsList);//保存解析内容</div><div class="line">            JSONObject parms=(JSONObject) json.get(&quot;params&quot;);//取出解析内容中params&gt;标签里的里的参数名和参数值</div><div class="line"></div><div class="line">            //获得&quot;__EVENTVALIDATION&quot;和&quot;__VIEWSTATE&quot;两个请求参数的值</div><div class="line">            String VIEWSTATE=parms.getString(&quot;__VIEWSTATE&quot;);</div><div class="line">            String __EVENTVALIDATION=parms.getString(&quot;__EVENTVALIDATION&quot;);</div><div class="line"></div><div class="line">            </div><div class="line">            //拼接成地址，&amp;后面传递参数，顺序随意 ，(注意EVENTTARGET请求参数的值可能不管哪一页都一样的，所以直接手动固定补上)     这里填写跳转到List的映射</div><div class="line">            String jxCombine=getNewPathPrefix()+&quot;/?&quot;+getAdditionalLinkParamStr()+&quot;&amp;iw-cmd=01026_1ZJList&quot;</div><div class="line">                    +&quot;&amp;iw_ir_2=list&quot;</div><div class="line">                    +&quot;&amp;__VIEWSTATE=&quot;+VIEWSTATE</div><div class="line">                    +&quot;&amp;__EVENTTARGET=ctl00$ContentPlaceHolder5$Pager&quot;   </div><div class="line">                    +&quot;&amp;__EVENTARGUMENT=&quot;+EVENTARGUMENT</div><div class="line">                    +&quot;&amp;__EVENTVALIDATION=&quot;+__EVENTVALIDATION</div><div class="line">                    +&quot;&amp;categoryid=&quot;+categoryid; </div><div class="line">                            //&amp;iw_ir_2是正则表达式，需要补到List的api.xml中的(.*)的内容，CategoryNum=001001001</div><div class="line">            </div><div class="line">            </div><div class="line">            //使用Utils工具类的callApi方法进行跳转操作，跳转之后的内容，保存到result中</div><div class="line">            String result=Utils.callApi(jxCombine);</div><div class="line">            </div><div class="line">            //将result(跳转的内容)，进行转码，变为UTF-8</div><div class="line">            iwRsp =new DefaultIwResponse(null,result.getBytes(&quot;UTF-8&quot;),null,0,&quot;ok&quot;);</div><div class="line"></div><div class="line">                </div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return iwRsp;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    public String getJson(String Content, String ID) &#123;</div><div class="line">        String resultStr = &quot;&quot;;</div><div class="line">        try &#123;</div><div class="line">            if (Content.substring(0, 1) != &quot;[&quot;) &#123;</div><div class="line">                Content = &quot;[&quot; + Content + &quot;]&quot;;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            JSONArray jsonArray = new JSONArray(Content);</div><div class="line">            resultStr = jsonArray.getJSONObject(0).toString();</div><div class="line"></div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            // TODO Auto-generated catch block</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return resultStr;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h3 id="配置List-Parms正则表达式"><a href="#配置List-Parms正则表达式" class="headerlink" title="配置List,Parms正则表达式"></a>配置List,Parms正则表达式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">iw_ir_2=....</div><div class="line"></div><div class="line">&lt;request-path&gt;/wzweb/jyxx/001001/001001001/MoreInfo.aspx&lt;/request-path&gt;</div><div class="line">    &lt;params&gt;</div><div class="line">      &lt;param&gt;</div><div class="line">        &lt;name&gt;CategoryNum&lt;/name&gt;</div><div class="line">        &lt;value&gt;001001001&lt;/value&gt;</div><div class="line">      &lt;/param&gt;</div><div class="line">    &lt;/params&gt;</div><div class="line">    &lt;alternative-params&gt;</div><div class="line">      &lt;params&gt;</div><div class="line">        &lt;param&gt;</div><div class="line">          &lt;name&gt;CategoryNum&lt;/name&gt;</div><div class="line">          &lt;value&gt;001001001&lt;/value&gt;</div><div class="line">        &lt;/param&gt;</div><div class="line">      &lt;/params&gt;</div><div class="line">    &lt;/alternative-params&gt;</div><div class="line">    &lt;request-uri-replacement-pattern&gt;&lt;![CDATA[(/wzweb/jyxx/001001/)(.*)(/MoreInfo.aspx)]]&gt;&lt;/request-uri-replacement-pattern&gt;</div></pre></td></tr></table></figure>
<hr>
<h3 id="Combine的api-xml要修改成"><a href="#Combine的api-xml要修改成" class="headerlink" title="Combine的api.xml要修改成"></a>Combine的api.xml要修改成</h3><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;api-type&gt;natural&lt;/api-type&gt;</div><div class="line">            变为</div><div class="line">&lt;api-type&gt;artificial&lt;/api-type&gt;</div></pre></td></tr></table></figure>
<hr>
<h2 id="5-API文档格式"><a href="#5-API文档格式" class="headerlink" title="5. API文档格式"></a>5. API文档格式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">01026-江北区公共资源交易中心</div><div class="line"></div><div class="line"></div><div class="line">数据来源：</div><div class="line">原网站：http://www.jbggjy.cn/</div><div class="line"></div><div class="line"></div><div class="line">入库编码（01026）</div><div class="line">招标公告： 网址.....</div><div class="line">中标公告：网址。。。。</div><div class="line"></div><div class="line"></div><div class="line">招标公告：</div><div class="line">列表（__EVENTARGUMENT为页数，从1开始）：</div><div class="line"></div><div class="line">内容(infoid为id)：</div><div class="line"></div><div class="line"></div><div class="line">中标公告：</div><div class="line">列表（__EVENTARGUMENT为页数，从1开始）：</div><div class="line"></div><div class="line">内容：(infoid为id)：</div></pre></td></tr></table></figure>
<h2 id="6-2017-01-16-新增模板说明"><a href="#6-2017-01-16-新增模板说明" class="headerlink" title="6. 2017.01.16 新增模板说明"></a>6. 2017.01.16 新增模板说明</h2><p>整合将list，Detail转换成listCombine，DetailCombine</p>
<p>优点：<br>    1.可以通过URL自定义传参,设置全局变量【例如获取当前访问的URL】<br>    2.不用配置正则，通过代码转换跳页【page=1 转换为 index_1 】<br>    3.list本质就是1次callApi然后进行解析，现在listCombine自定义URL去callApi,高度解耦<br>    4.可本地测试，也可以开启代理测试<br>    5.自控制URL,可将入库代码的判断操作移植到接口代码里,保证入库代码的原始性</p>
<p>适用范围<br>    1.list,Detail能做的<br>    2.需要获取api.xml的内容进行解析<br>    3.Detial页链接不完整，附件链接需要当前动态URL</p>
<hr>
<p><br><br></p>
<h2 id="7-ListCombine"><a href="#7-ListCombine" class="headerlink" title="7. ListCombine"></a>7. ListCombine</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div></pre></td><td class="code"><pre><div class="line">package DS00908;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">import org.w3c.dom.Document;</div><div class="line">import org.w3c.dom.Element;</div><div class="line">import org.w3c.dom.NodeList;</div><div class="line"></div><div class="line">import cn.internetware.phone.extension.reqrsp.IwRequest;</div><div class="line">import cn.internetware.phone.extension.reqrsp.IwResponse;</div><div class="line">import cn.internetware.phone.extension.reqrsp.impl.DefaultIwResponse;</div><div class="line">import cn.internetware.phone.extension.reqrsp.impl.TxtReqRspHandler;</div><div class="line">import cn.internetware.phone.extension.response.RspState;</div><div class="line">import cn.internetware.phone.extension.response.TxtRspObject;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtBaseResponse;</div><div class="line">import cn.internetware.utils.IO;</div><div class="line">import cn.internetware.utils.Utils;</div><div class="line"></div><div class="line">public class DSListCombine extends TxtReqRspHandler &#123;</div><div class="line"></div><div class="line">    </div><div class="line">    String type = null;  //类型</div><div class="line"></div><div class="line">    </div><div class="line">   //构建bean</div><div class="line">   public class Response extends TxtBaseResponse &#123;</div><div class="line">        List&lt;BranchNew&gt; list = new ArrayList&lt;BranchNew&gt;();</div><div class="line">        String pageCount;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">   //构建bean对象</div><div class="line">    public class BranchNew &#123;</div><div class="line">        String title;</div><div class="line">        String id;</div><div class="line">        String date;</div><div class="line">        String url;</div><div class="line">    </div><div class="line">        </div><div class="line">        public String toString() &#123;</div><div class="line">            return &quot;BranchNew[ title=&quot; + title + &quot;;id=&quot; + id + &quot;;date=&quot; + date+ &quot;;url=&quot; + url+ &quot;]&quot;;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected RspState checkTxtRspContentState(String originTxtRspContent) &#123;</div><div class="line">        return RspState.Login;  //默认登录状态</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    /*第二步：解析页面，获取list*/</div><div class="line">    protected TxtRspObject processTxtRspContent(RspState rspState,</div><div class="line">            String originTxtRspContent) &#123;</div><div class="line">        Response response = new Response();</div><div class="line"></div><div class="line">        if (rspState == RspState.Login) &#123;</div><div class="line">                try &#123;</div><div class="line">            </div><div class="line">                    //A-处理文件内容</div><div class="line">                        //A-1 补齐标签</div><div class="line">                       </div><div class="line">                        //A-2 转换为DOM节点</div><div class="line">                        Document xmlDoc = Utils.getDocByContent(originTxtRspContent);</div><div class="line">                    </div><div class="line">                        </div><div class="line">                    //B-获取标题(title),标识(id),链接地址(url),日期(data)</div><div class="line">                        int count = 0;                                                          //计数器1</div><div class="line">                        NodeList listFirst = xmlDoc.getElementsByTagName(&quot;div&quot;); </div><div class="line">                        for (int i = 0, length = listFirst.getLength(); i &lt; length; i++) &#123; </div><div class="line">                            Element ele1 = (Element)listFirst.item(i);</div><div class="line">                         </div><div class="line">                            if(&quot;newsList&quot;.equals(ele1.getAttribute(&quot;class&quot;)))&#123;  </div><div class="line">                                if(++count != 1) continue;                                      //选择第n个符合条件的ele1</div><div class="line">                                </div><div class="line">                                NodeList listSecond = ele1.getElementsByTagName(&quot;li&quot;);    </div><div class="line">                                if(listSecond == null || listSecond.getLength()&lt;1 )&#123;            //NodeList空判断</div><div class="line">                                    continue;</div><div class="line">                                &#125;</div><div class="line">                                </div><div class="line">                                for(int j = 0,length2 = listSecond.getLength(); j &lt; length2; j++)&#123;               </div><div class="line">                                    Element ele2 = (Element)listSecond.item(j);</div><div class="line">     </div><div class="line">                                     //&lt;1&gt;条件判断</div><div class="line">                                     if(ele2.getElementsByTagName(&quot;A&quot;).getLength() &lt; 1)&#123;continue;&#125;</div><div class="line">                                        </div><div class="line">                                     //&lt;2&gt;定位标签</div><div class="line">                                     Element a_ele   = (Element)ele2.getElementsByTagName(&quot;A&quot;).item(0);             </div><div class="line">                                     Element span_ele = (Element)ele2.getElementsByTagName(&quot;SPAN&quot;).item(0);     </div><div class="line">                                        </div><div class="line">                                     //&lt;3&gt;获取数据</div><div class="line">                                     String title = a_ele.getAttribute(&quot;title&quot;).trim();</div><div class="line">                                      </div><div class="line">                                     String href = a_ele.getAttribute(&quot;href&quot;).trim();</div><div class="line">                                     String id = type+&quot;/&quot;+href.substring(href.indexOf(&quot;./&quot;)+2,href.lastIndexOf(&quot;.html&quot;)).trim();</div><div class="line">                                     </div><div class="line">                                     String url = getNewPathPrefix()+&quot;/?&quot;+ getAdditionalLinkParamStr()+</div><div class="line">                                                            &quot;&amp;iw-cmd=00908DSDetailCombine&amp;id=&quot;+id;</div><div class="line">                       </div><div class="line">                                     String date = span_ele.getTextContent().trim();</div><div class="line">                                            </div><div class="line">                                      </div><div class="line">                                     //&lt;4&gt;构造BranchNew对象</div><div class="line">                                     BranchNew branchNew = new BranchNew();        </div><div class="line">                                               branchNew.title = title;</div><div class="line">                                               branchNew.date  = date;        </div><div class="line">                                               branchNew.id    = id;            </div><div class="line">                                               branchNew.url    = url;</div><div class="line">                                     response.list.add(branchNew);</div><div class="line">                                        </div><div class="line">                                    //&lt;5&gt;测试输出</div><div class="line">//                                  System.out.println(branchNew.toString());   </div><div class="line">                                &#125;</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                       </div><div class="line">                       </div><div class="line">                  //C-获取总页数</div><div class="line">                      int count2 = 0;                                                           //计数器2</div><div class="line">                       String pageCount = null;                                                 //储存总页数</div><div class="line">//                      </div><div class="line">                        //&lt;1&gt;直接获取总页数</div><div class="line">                        NodeList listThird = xmlDoc.getElementsByTagName(&quot;div&quot;);</div><div class="line">                        if(listThird!=null)&#123;</div><div class="line">                             for(int i = 0;i &lt; listThird.getLength(); i++)&#123;</div><div class="line">                                 Element ele3 = (Element)listThird.item(i);</div><div class="line">                                    </div><div class="line">                                 if(&quot;page&quot;.equals(ele3.getAttribute(&quot;class&quot;)))&#123;</div><div class="line">                                        if(++count2 != 1)&#123;continue;&#125;                                //选择第n个符合条件的Element</div><div class="line">                                        </div><div class="line">                                        //获取总记录数计算pageCount</div><div class="line">                                        pageCount = ele3.getTextContent().trim();</div><div class="line">                                        pageCount = pageCount.substring(pageCount.indexOf(&quot;HTML(&quot;)+5,pageCount.indexOf(&quot;,&quot;));</div><div class="line">                                 &#125;</div><div class="line">                             &#125;</div><div class="line">                             response.pageCount=pageCount;</div><div class="line">                         &#125;  </div><div class="line">                          </div><div class="line"></div><div class="line">                       if(response.pageCount==null) response.pageCount=&quot;1&quot;; //获取不到默认为第1页</div><div class="line"></div><div class="line">                       </div><div class="line">                        //&lt;3&gt;测试输出总页数</div><div class="line">//                      System.out.println(response.pageCount);</div><div class="line">                    </div><div class="line">                &#125;catch (Exception e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line"></div><div class="line">        return response;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">      /*第一步：处理URL*/</div><div class="line">      @Override</div><div class="line">      public IwResponse sendIwRequest(IwRequest iwRequest) &#123;</div><div class="line">         IwResponse iwRsp = null;  </div><div class="line">         try &#123;   </div><div class="line">             //A-处理URL参数</div><div class="line">                 this.type = iwRequest.getRequestPathParam(&quot;type&quot;).trim();</div><div class="line">                 String page = iwRequest.getRequestPathParam(&quot;page&quot;).trim();</div><div class="line">                 StringBuilder listPage = new StringBuilder();</div><div class="line">                 if(&quot;1&quot;.equals(page) ) &#123;</div><div class="line">                     listPage.append(&quot;index&quot;);</div><div class="line">                 &#125;else&#123;</div><div class="line">                     listPage.append(&quot;index_&quot;+(Integer.parseInt(page)-1));</div><div class="line">                 &#125;      </div><div class="line">             </div><div class="line">             //B-访问list链接</div><div class="line">                String listURL = &quot;http://ldggzy.hnloudi.gov.cn/jyxx/&quot;+type+&quot;/&quot;+listPage.toString()+&quot;.html&quot;;</div><div class="line">       </div><div class="line">            //C-视情况是否转码</div><div class="line">                String result=Utils.callApi(listURL);</div><div class="line">                iwRsp =new DefaultIwResponse(null,result.getBytes(&quot;UTF-8&quot;),null,0,&quot;ok&quot;);</div><div class="line">    </div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">       </div><div class="line">       return iwRsp;</div><div class="line">      &#125;</div><div class="line">      </div><div class="line">      //主方法:用于本地测试</div><div class="line">      public static void main(String[] args) &#123;</div><div class="line">          DSListCombine handler = new DSListCombine();</div><div class="line"></div><div class="line">          try &#123;</div><div class="line">              String originRspContent = IO</div><div class="line">                      .deserializeString(&quot;internetware/DS00908/apis/00908DSListCombine/SampleResponse&quot;,&quot;utf-8&quot;);</div><div class="line">              </div><div class="line">              handler.processTxtRspContent(</div><div class="line">                      handler.checkTxtRspContentState(originRspContent),</div><div class="line">                      originRspContent);</div><div class="line"></div><div class="line">          &#125; catch (Exception e) &#123;</div><div class="line">              e.printStackTrace();</div><div class="line">          &#125;</div><div class="line">      &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="8-DetailCombine"><a href="#8-DetailCombine" class="headerlink" title="8. DetailCombine"></a>8. DetailCombine</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div></pre></td><td class="code"><pre><div class="line">package DS00908;</div><div class="line"></div><div class="line">import org.w3c.dom.Document;</div><div class="line">import org.w3c.dom.Element;</div><div class="line">import org.w3c.dom.NodeList;</div><div class="line"></div><div class="line">import cn.internetware.phone.extension.reqrsp.IwRequest;</div><div class="line">import cn.internetware.phone.extension.reqrsp.IwResponse;</div><div class="line">import cn.internetware.phone.extension.reqrsp.impl.DefaultIwResponse;</div><div class="line">import cn.internetware.phone.extension.reqrsp.impl.TxtReqRspHandler;</div><div class="line">import cn.internetware.phone.extension.response.RspState;</div><div class="line">import cn.internetware.phone.extension.response.TxtRspObject;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtBaseResponse;</div><div class="line">import cn.internetware.utils.IO;</div><div class="line">import cn.internetware.utils.Utils;</div><div class="line"></div><div class="line">public class DSDetailCombine extends TxtReqRspHandler &#123;</div><div class="line"></div><div class="line">    </div><div class="line">    String id = null;  //类型</div><div class="line"></div><div class="line">    //构建请求</div><div class="line">    public class Response extends TxtBaseResponse &#123;</div><div class="line">        String content;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected RspState checkTxtRspContentState(String originTxtRspContent) &#123;</div><div class="line">        return RspState.Login;  //默认登录状态</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    /*第二步：解析页面，获取list*/</div><div class="line">    protected TxtRspObject processTxtRspContent(RspState rspState,</div><div class="line">            String originTxtRspContent) &#123;</div><div class="line">        Response response = new Response();</div><div class="line"></div><div class="line">        if (rspState == RspState.Login) &#123;</div><div class="line">              try &#123;</div><div class="line">            </div><div class="line">                //A-处理文件内容</div><div class="line">                    //A-1 补齐标签</div><div class="line"></div><div class="line">                    //A-2 转换为DOM节点</div><div class="line">                    Document xmlDoc = Utils.getDocByContent(originTxtRspContent);</div><div class="line">                </div><div class="line">                    //A-3 获取类型</div><div class="line">                    String type =&quot;&quot;;</div><div class="line">                    if(id != null)&#123;</div><div class="line">                        type=id.substring(0,id.indexOf(&quot;/t&quot;));</div><div class="line">                    &#125;</div><div class="line">                    </div><div class="line">                //B-获取Detail页的内容</div><div class="line">                    int count = 0;                                                      //计数器</div><div class="line">                    String content = null;                                              //储存页面内容</div><div class="line">                    NodeList listFist = xmlDoc.getElementsByTagName(&quot;div&quot;);</div><div class="line">                    if(listFist != null)&#123;</div><div class="line">                        for(int j = 0; j &lt; listFist.getLength(); j++)&#123;</div><div class="line">                            Element ele1 = (Element)listFist.item(j);</div><div class="line">                            </div><div class="line">                            if(&quot;fontzoom&quot;.equals(ele1.getAttribute(&quot;id&quot;)))&#123;         //定位内容节点</div><div class="line">                                if(++count != 1) continue;                              //获取第n个符合条件的ele1</div><div class="line">                                </div><div class="line">//                              //&lt;1&gt;删除不需要部分</div><div class="line">                                    </div><div class="line">                                </div><div class="line">                                //&lt;2&gt;补全附件链接【存在就补全】</div><div class="line">                                    NodeList a_list = ele1.getElementsByTagName(&quot;A&quot;);</div><div class="line">                                     if(a_list.getLength()&gt;0)&#123;</div><div class="line">                                         for(int i=0;i&lt;a_list.getLength();i++)&#123;</div><div class="line">                           </div><div class="line">                                             Element a_ele=(Element)a_list.item(i);</div><div class="line">                                             StringBuilder href=new StringBuilder(a_ele.getAttribute(&quot;href&quot;));</div><div class="line">                                             </div><div class="line">                                             if(href.indexOf(&quot;http&quot;)!=-1 || href.length()&lt;5 || href.toString().contains(&quot;mailto&quot;))&#123;</div><div class="line">                                                 continue;</div><div class="line">                                             &#125;</div><div class="line">        </div><div class="line">                                             if(href.charAt(0) != &apos;/&apos;)&#123;</div><div class="line">                                                  href.delete(0,1);  //删除.</div><div class="line">                                                  href.insert(0, &quot;http://ldggzy.hnloudi.gov.cn/jyxx/&quot;+type);</div><div class="line">                   </div><div class="line">                                             &#125;else if(href.charAt(0) == &apos;/&apos;)&#123;</div><div class="line">                                                 href.delete(0,1);                              //删除开头&apos;/&apos;</div><div class="line">                                                 href.insert(0,&quot;http://ldggzy.hnloudi.gov.cn/jyxx/&quot;+type); </div><div class="line">                                             &#125;</div><div class="line">                                             </div><div class="line">                                             a_ele.setAttribute(&quot;href&quot;, href.toString());</div><div class="line">                                         &#125;</div><div class="line">                                     &#125;</div><div class="line">                                </div><div class="line">                                 //&lt;3&gt;补全图片链接【存在就补全】</div><div class="line">                                     NodeList img_list=ele1.getElementsByTagName(&quot;IMG&quot;);</div><div class="line">                                     if(img_list.getLength()&gt;0)&#123;</div><div class="line">                                         for(int i=0;i&lt;img_list.getLength();i++)&#123;</div><div class="line">                                             Element img_ele=(Element)img_list.item(i);</div><div class="line">                                                  </div><div class="line">                                             StringBuilder src=new StringBuilder(img_ele.getAttribute(&quot;src&quot;));</div><div class="line">                                             </div><div class="line">                                             if(src.indexOf(&quot;http&quot;)!=-1  || src.length()&lt;5)&#123;</div><div class="line">                                                 continue;</div><div class="line">                                             &#125;</div><div class="line">        </div><div class="line">                                             if(src.charAt(0) != &apos;/&apos;)&#123;</div><div class="line">                                                 src.delete(0,2);  //删除./</div><div class="line">                                                src.insert(0,&quot;http://ldggzy.hnloudi.gov.cn/jyxx/&quot;+type);</div><div class="line">                                             &#125;else if(src.charAt(0) == &apos;/&apos;)&#123;</div><div class="line">                                                 src.delete(0,1);                               //删除开头&apos;/&apos;</div><div class="line">                                                 src.insert(0,&quot;http://ldggzy.hnloudi.gov.cn/jyxx/&quot;+type); </div><div class="line">                                             &#125;</div><div class="line">                                             </div><div class="line">                                             img_ele.setAttribute(&quot;src&quot;, src.toString());</div><div class="line">                                         &#125;</div><div class="line">                                     &#125; </div><div class="line">                                 </div><div class="line">                                 //&lt;3&gt;储存内容【将字符串转换成HTML结构】</div><div class="line">                                     content=Utils.getNodeHtml(ele1);   </div><div class="line">                                     break;                                                    //获取完后退出循环</div><div class="line">                            &#125;    </div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                     response.content=content;</div><div class="line">                     </div><div class="line">                     </div><div class="line">                   //C-测试输出</div><div class="line">//                   System.out.println(response.content);</div><div class="line">               </div><div class="line"></div><div class="line">            &#125;catch (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return response;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">      /*第一步：处理URL*/</div><div class="line">      @Override</div><div class="line">      public IwResponse sendIwRequest(IwRequest iwRequest) &#123;</div><div class="line">         IwResponse iwRsp = null;  </div><div class="line">         try &#123;   </div><div class="line">             //A-处理URL参数</div><div class="line">                 this.id = iwRequest.getRequestPathParam(&quot;id&quot;).trim();</div><div class="line"></div><div class="line">             </div><div class="line">             //B-访问list链接</div><div class="line">                String listURL = &quot;http://ldggzy.hnloudi.gov.cn/jyxx/&quot;+id+&quot;.html&quot;;</div><div class="line">                </div><div class="line">            //C-视情况是否转码</div><div class="line">                String result=Utils.callApi(listURL);</div><div class="line">                iwRsp =new DefaultIwResponse(null,result.getBytes(&quot;UTF-8&quot;),null,0,&quot;ok&quot;);</div><div class="line">    </div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">       </div><div class="line">       return iwRsp;</div><div class="line">      &#125;</div><div class="line">      </div><div class="line">      //主方法：用于本地测试</div><div class="line">      public static void main(String[] args) &#123;</div><div class="line">          DSDetailCombine handler = new DSDetailCombine();</div><div class="line"></div><div class="line">          try &#123;</div><div class="line">              String originRspContent = IO</div><div class="line">                      .deserializeString(&quot;internetware/DS00908/apis/00908DSDetailCombine/SampleResponse&quot;,&quot;utf-8&quot;);</div><div class="line">              </div><div class="line">              handler.processTxtRspContent(</div><div class="line">                      handler.checkTxtRspContentState(originRspContent),</div><div class="line">                      originRspContent);</div><div class="line">        </div><div class="line">          &#125; catch (Exception e) &#123;</div><div class="line">              e.printStackTrace();</div><div class="line">          &#125;</div><div class="line">      &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/WorkProject/" rel="tag"># WorkProject</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/08/13/WorkProject_标讯快车_印加团队错误记录/" rel="next" title="标讯快车_印加团队错误记录">
                <i class="fa fa-chevron-left"></i> 标讯快车_印加团队错误记录
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/08/22/WebServer_Tomcat 错误记录/" rel="prev" title="Tomcat 错误记录">
                Tomcat 错误记录 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/suvan-min.jpg"
               alt="刘淑玮" />
          <p class="site-author-name" itemprop="name">刘淑玮</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">52</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>
   
        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        


        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Suvan-L" target="_blank" title="GitHub"">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:liushuwei0925@gmail.com" target="_blank" title="Gmail"">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                  Gmail
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#目录"><span class="nav-number">1.</span> <span class="nav-text">目录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-List"><span class="nav-number">1.1.</span> <span class="nav-text">1. List</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Detail"><span class="nav-number">1.2.</span> <span class="nav-text">2. Detail</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Params"><span class="nav-number">1.3.</span> <span class="nav-text">3. Params</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Combine"><span class="nav-number">1.4.</span> <span class="nav-text">4. Combine</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#配置List-Parms正则表达式"><span class="nav-number">1.4.1.</span> <span class="nav-text">配置List,Parms正则表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Combine的api-xml要修改成"><span class="nav-number">1.4.2.</span> <span class="nav-text">Combine的api.xml要修改成</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-API文档格式"><span class="nav-number">1.5.</span> <span class="nav-text">5. API文档格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2017-01-16-新增模板说明"><span class="nav-number">1.6.</span> <span class="nav-text">6. 2017.01.16 新增模板说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-ListCombine"><span class="nav-number">1.7.</span> <span class="nav-text">7. ListCombine</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-DetailCombine"><span class="nav-number">1.8.</span> <span class="nav-text">8. DetailCombine</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script> <!--博客量统计-->
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Suvan</span>
</div>


<div class="powered-by">
   
  <!--
    由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
    -->
</div>

<div class="theme-info">
	能力决定走的多快，心态决定走的多远

  <!-- 主题
    主题 -
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Mist
    </a>
  -->
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.min.js"></script>

  
  <script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.1"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.1"></script>


  

</body>
</html>
