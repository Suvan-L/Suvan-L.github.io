<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.css.network/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="WorkProject," />





  <link rel="alternate" href="/atom.xml" title="Suvan" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="一.目录 无法启动虚拟桌面 导入燕云工程项目，新建API仓库的时候，提示重名 判断Detail是否有附件 判断Detail的附件链接需要补齐 reactor(代理)启动失败 List和Detail配置相对路径边和编码格式 谷歌浏览器显示数据，无法跳页 Utils.getNodeHtml(Element)获取内容缺失 启动代理后，谷歌浏览器显示页面内容重复 script&amp;gt;标签也可以抓取 命名把">
<meta name="keywords" content="WorkProject">
<meta property="og:type" content="article">
<meta property="og:title" content="WorkProject_燕云DaaS_印加团队错误记录">
<meta property="og:url" content="http://suvan-l.github.io/2016/08/13/WorkProject_燕云DaaS_印加团队错误记录/index.html">
<meta property="og:site_name" content="Suvan">
<meta property="og:description" content="一.目录 无法启动虚拟桌面 导入燕云工程项目，新建API仓库的时候，提示重名 判断Detail是否有附件 判断Detail的附件链接需要补齐 reactor(代理)启动失败 List和Detail配置相对路径边和编码格式 谷歌浏览器显示数据，无法跳页 Utils.getNodeHtml(Element)获取内容缺失 启动代理后，谷歌浏览器显示页面内容重复 script&amp;gt;标签也可以抓取 命名把">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-06-26T15:05:23.899Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="WorkProject_燕云DaaS_印加团队错误记录">
<meta name="twitter:description" content="一.目录 无法启动虚拟桌面 导入燕云工程项目，新建API仓库的时候，提示重名 判断Detail是否有附件 判断Detail的附件链接需要补齐 reactor(代理)启动失败 List和Detail配置相对路径边和编码格式 谷歌浏览器显示数据，无法跳页 Utils.getNodeHtml(Element)获取内容缺失 启动代理后，谷歌浏览器显示页面内容重复 script&amp;gt;标签也可以抓取 命名把">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://suvan-l.github.io/2016/08/13/WorkProject_燕云DaaS_印加团队错误记录/"/>





  <title>WorkProject_燕云DaaS_印加团队错误记录 | Suvan</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Suvan</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Bolgs</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://suvan-l.github.io/2016/08/13/WorkProject_燕云DaaS_印加团队错误记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liushuwei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/suvan.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Suvan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">WorkProject_燕云DaaS_印加团队错误记录</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-08-13T11:45:43+08:00">
                2016-08-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/WorkProject/" itemprop="url" rel="index">
                    <span itemprop="name">WorkProject</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  13,460
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  63
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="一-目录"><a href="#一-目录" class="headerlink" title="一.目录"></a>一.目录</h1><ol>
<li>无法启动虚拟桌面</li>
<li>导入燕云工程项目，新建API仓库的时候，提示重名</li>
<li>判断Detail是否有附件</li>
<li>判断Detail的附件链接需要补齐</li>
<li>reactor(代理)启动失败</li>
<li>List和Detail配置相对路径边和编码格式</li>
<li>谷歌浏览器显示数据，无法跳页</li>
<li>Utils.getNodeHtml(Element)获取内容缺失</li>
<li>启动代理后，谷歌浏览器显示页面内容重复</li>
<li>script&gt;标签也可以抓取</li>
<li>命名把”-“改为”_”</li>
<li>项目运行配置可以只配一个testURL</li>
<li>Params类里不需要main方法</li>
<li>虚拟桌面的Ecplise需要配置jdk</li>
<li>如果Detail里的内容是一张图片</li>
<li>List和Detail配置正则表达式(健俊)</li>
<li>本地平台抓包乱码</li>
<li>启动reacotor,谷歌浏览器显示效果分层</li>
<li>启动reactor之后，弹出窗口无法连接</li>
<li>谷歌浏览器显示Combine页面，报错”Internal Server Error!”(健俊)</li>
<li>抓取哪些页，哪些需要配正则</li>
<li>启动reactor后，控制台报错空指针异常(陈宇)</li>
<li>抓取的源文件，出现乱码</li>
<li>日期格式不规范，自动补成yyyy-MM-dd</li>
<li>在Combine里增加变量的过程</li>
<li>报错：{“iw-response”:{“errorTxt”: the specified iw-cmd is invalid”}}</li>
<li>记得要测试List(或者Combine)的URL和附件的URL</li>
<li>源网页的源代码没有显示招标中标的信息</li>
<li>正则只能配置request-path&gt;标签的相对路径</li>
<li>String转Document方法(陈宇)</li>
<li>正则可以用空括号</li>
<li>Combine记得配置对应Params和List的跳转映射</li>
<li>启动代理后，谷歌浏览器乱码，控制台乱码</li>
<li>遇到api.xml的request-path&gt;标签不能匹配中标和招标等类型</li>
<li>招标公告的Detail有内容，招标答疑的Detail为null</li>
<li>如何把int类型变为String类型</li>
<li>招标的Detail无法匹配中标的Detail</li>
<li>入库错误整理</li>
<li>注意，我们做的项目是的0630的Excel表格</li>
<li>每个Java类里，多余的包要删掉(就是没有用到的包)</li>
<li>入库里，跳转Detail的链接，端口要用1627</li>
<li>List页面显示pageCount不能有空格</li>
<li>入库代码里的注解，是唯一标识，不能重名！</li>
<li>入库的数据只要2014年之后的</li>
<li>入库的页数第一页是index，第二页是index_2，入库代码</li>
<li>遇到附件下载链接a标签只有id属性，没有value属性</li>
<li>尝试运用ArrayList</li>
<li>入库代码，页数倒数模版(瑞强)</li>
<li>有些网站的尾页是没有pageCount显示的，但是确实是尾页了</li>
<li>今天碰到编号-1，编号-2，编号-3，的招标用一个模版，中标用一个模版</li>
<li>入库的时候，如果报错，只提示”接口错误”(印加暑期群)</li>
<li>如果入库中个出错，纠错后，续接记录</li>
<li>如果截取总页数，用到字符串截取，条件里有中文</li>
<li>数据库跳空语句</li>
<li>List无法按照规定格式显示</li>
<li>使用Combine拼接两个Detail内容(附件和主内容不在同一个api)</li>
<li>Combine使用for循环，反复访问<br>57-2. 提取JSON格式内容</li>
<li>删除节点</li>
<li>Detail通过JS获取动态的附件链接</li>
<li>附件链接中出现(&amp;符号)，导致无法下载</li>
<li>截取的内容只有tr&gt;标签，无法获取tr的Element，需要补全table&gt;再转换为Doment</li>
<li>删除title里的\ (斜杠)</li>
<li>跳类型的话，没有类型参数的话，Params也记得配置正则</li>
<li>判断链接开头</li>
<li>去除Detail页面尾部的图片(每个Detail页都有，并且位置固定是最后)</li>
<li>去除title标签内的不需要内容(加远)</li>
<li>使用NodeList来定位Id属性</li>
<li>编码格式问题转码，解码</li>
<li>去除title前面[]内的内容(小强)</li>
<li>Detail里面只有一个链接，链接到另一个页面</li>
<li>入库代码如果是空白页自动跳过(原网站一片的某个Detail页面一片空白)</li>
<li>入库小发现</li>
<li>Detail补齐图片，和附件链接通用版</li>
<li>ecplise–运行java类快捷键</li>
<li>遇到网站里List内容是[&amp;#xxxxx];编码格式的 (健俊)</li>
<li>增加变量</li>
<li>removeChild()方法删除子节点</li>
<li>获取当前年份</li>
<li>URL入库，主要是用ListVO_4</li>
<li>入库代码开头要注解清晰</li>
<li>URL地址栏,开启代理后</li>
<li>Detail页里面有音频</li>
<li>URL转码，List和Detail页面内容编码特殊</li>
<li>List页面抓包下来全是字符串[并且是83的乱码]</li>
<li>Combine增加参数,另一种(健俊)</li>
<li>iw_ir_2的理解(健俊)</li>
<li>计数判断，选出符合条件的某个Element</li>
<li>在Combine拼接跳转List的URL，因为多了参数，导致无法跳页(加远)</li>
<li>设置执行SQL命名后，查询界面显示的记录数</li>
<li>Eclipse设置不限制控制台输出</li>
<li>在Eclipse中点代码,包资源管理器自动跳动到该文件</li>
<li>List里添加URL跳转到Detail页面</li>
<li>招标中标的信息在网站同一个页面，不同模块</li>
<li>终极暴力Detail抓date(健俊)</li>
<li>启动reactor后，报错”创建临时文件夹失败”</li>
<li>URL中文编码问题–URL里面包含中文，只有特定格式才能跳入网站</li>
<li>查询数据库相关语句扩展</li>
<li>List页面是特殊格式，用字符串进行截取</li>
<li>List和Detail无法拿到日期，入库里使用new Date() [健俊]</li>
<li>将时Unix时间戳转换为yyyy-MM-dd格式的日期</li>
<li>谷歌浏览器的版本和燕云dds兼容问题</li>
<li>燕云dds的eclise无法无法抓包and开启代理</li>
<li>JSON格式数据解析【使用GSON】</li>
</ol>
<hr>
<p><br><br><br></p>
<h1 id="二-错误"><a href="#二-错误" class="headerlink" title="二.错误"></a>二.错误</h1><h2 id="1-无法启动虚拟桌面"><a href="#1-无法启动虚拟桌面" class="headerlink" title="1.无法启动虚拟桌面"></a>1.无法启动虚拟桌面</h2><p>　　如果插件下载安装完之后，点击后没有弹出窗口，也没有报错，<br>那么找到<a href="这是谷歌的默认下载路径">我的电脑—&gt;下载</a><br>　　<br>目录，里面的ica文件，右键设置他们的默认打开方式<br>　　<code>C:\Program Files (x86)\Citrix\ICA Client\wfcrun32.exe</code></p>
<p>打开方式就会变成Citrix Connection Manager</p>
<hr>
<p><br><br></p>
<h2 id="2-导入燕云工程项目，新建API仓库的时候，提示重名"><a href="#2-导入燕云工程项目，新建API仓库的时候，提示重名" class="headerlink" title="2.导入燕云工程项目，新建API仓库的时候，提示重名"></a>2.导入燕云工程项目，新建API仓库的时候，提示重名</h2><p>　　1.改为导入已有燕云Dass工程<br>　　2.在10号机上删除API工程，然后再次新建</p>
<hr>
<p><br><br></p>
<h2 id="3-判断Detail是否有附件"><a href="#3-判断Detail是否有附件" class="headerlink" title="3.判断Detail是否有附件"></a>3.判断Detail是否有附件</h2><p>　　启动Plant工具，抓取网站，多点击几个Detail，查看是否有附件,<br>　　优先对有附件的Detail页面进行API接口编写</p>
<hr>
<p><br><br></p>
<h2 id="4-判断Detail的附件链接需要补齐"><a href="#4-判断Detail的附件链接需要补齐" class="headerlink" title="4.判断Detail的附件链接需要补齐"></a>4.判断Detail的附件链接需要补齐</h2><p>　　因为大部分抓取的网站的Detail，<br>　　里面所包含的附件的下载链接是相对路径的，所以需要我们手动补齐<br>　　<br>　　并且要测试是否点击能够得到下载链接</p>
<hr>
<p><br><br></p>
<h2 id="5-reactor-代理-启动失败"><a href="#5-reactor-代理-启动失败" class="headerlink" title="5.reactor(代理)启动失败"></a>5.reactor(代理)启动失败</h2><p>1.reactor启动失败 原因是修改了运行配置里API调用路径上的文件夹名字<br>　　删除project.xml的方法在配置了大量API的时候太麻烦<br>　　　　解决方法1：手动修改project.xml里对应的路径；<br>　　　　解决方法2：在运行配置里将影响到的API重新选择一遍后保存； (陈宇)<br>　　<br>2.选中项目工程，删除根目录下的projext.xml文件<br>　　重新右键项目———&gt;燕云DaaS—–&gt;项目运行配置<br>　　再次进行配置！！</p>
<p>3.还有一个原因是抓的包数据有问题，重新抓包然后把东西改一下，就可以启动(健俊)</p>
<hr>
<p><br><br></p>
<h2 id="6-List和Detail配置相对路径边和编码格式"><a href="#6-List和Detail配置相对路径边和编码格式" class="headerlink" title="6.List和Detail配置相对路径边和编码格式"></a>6.List和Detail配置相对路径边和编码格式</h2><p>　　List和Detail页面都需要指定数据源的相对路径,<br>　　编码格式，应该符合数据目录，的api.xml里的编码格式</p>
<hr>
<p><br><br></p>
<h2 id="7-谷歌浏览器显示数据，无法跳页"><a href="#7-谷歌浏览器显示数据，无法跳页" class="headerlink" title="7.谷歌浏览器显示数据，无法跳页"></a>7.谷歌浏览器显示数据，无法跳页</h2><p>　　1.去List或者Detail的数据源目录里，查看api.xml文档，看是否有跳页参数，如果没有，则需要配置正则表达式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">举例:</div><div class="line">http://www.jianggan.gov.cn/xzsp/channels/2792_2.html(第二页，无跳页参数)</div><div class="line"></div><div class="line">&lt;request-path&gt;/xzsp/channels/2792_2.html&lt;/request-path&gt;</div><div class="line">&lt;request-uri-replacement-pattern&gt;![CDATA[(/xzsp/channels/2792_)(.*)(.html)]]&lt;/request-uri-replacement-pattern&gt;</div><div class="line"></div><div class="line"></div><div class="line">然后跳页的时候，用&amp;iw_ir_2=n进行跳页</div></pre></td></tr></table></figure>
<blockquote>
<p>注意：</p>
<blockquote>
<p>request-uri-replacement-pattern&gt;标签内不能有换行，或者有空格，否则会出现跳不了页的情况。</p>
</blockquote>
</blockquote>
<hr>
<p><br><br></p>
<h2 id="8-Utils-getNodeHtml-Element-获取内容缺失"><a href="#8-Utils-getNodeHtml-Element-获取内容缺失" class="headerlink" title="8.Utils.getNodeHtml(Element)获取内容缺失"></a>8.Utils.getNodeHtml(Element)获取内容缺失</h2><p>使用Utils工具类的，getNodeHtml(Element)方法，输出Element元素的所有子节点，包括hmtl标签</p>
<p>获取内容缺失，目前无法解决</p>
<hr>
<p><br><br></p>
<h2 id="9-启动代理后，谷歌浏览器显示页面内容重复"><a href="#9-启动代理后，谷歌浏览器显示页面内容重复" class="headerlink" title="9.启动代理后，谷歌浏览器显示页面内容重复"></a>9.启动代理后，谷歌浏览器显示页面内容重复</h2><p>　　查看ZBList类，里面是获取到招标公告的title id date后，<br>　　记得在循环中创建对象，在把三个值存进BranchNew类的属性里</p>
<hr>
<p><br><br></p>
<h2 id="10-script-gt-标签也可以抓取"><a href="#10-script-gt-标签也可以抓取" class="headerlink" title="10.script&gt;标签也可以抓取"></a>10.script&gt;标签也可以抓取</h2><p>　　依然通过<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Document xmlDoc = Utils.getDocByContent(originTxtRspContent);</div><div class="line">                </div><div class="line">                //获取整个页面的script节点的集合</div><div class="line">                NodeList div_list = (NodeList) xmlDoc.getElementsByTagName(&quot;script&quot;);</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="11-命名把”-“改为”-”"><a href="#11-命名把”-“改为”-”" class="headerlink" title="11.命名把”-“改为”_”"></a>11.命名把”-“改为”_”</h2><p>举例<br>　　01014_1_64d65467e515493d885ff25dab58a61f_ZJList<br>　　01014_1_2010e378ec9144bf9f0f199c70df8e2a_ZJDetail<br>　　01014_1ZJDetail<br>　　01014_1ZJList</p>
<hr>
<p><br><br></p>
<h2 id="12-项目运行配置可以只配一个testURL"><a href="#12-项目运行配置可以只配一个testURL" class="headerlink" title="12.项目运行配置可以只配一个testURL"></a>12.项目运行配置可以只配一个testURL</h2><p>　　项目中有很多包，但是只用配置一个包的testURL，<br>　　这样启动代理后，弹窗不会弹出，太多窗口的testURL,<br>　　测试的话，再根据需要进行手动修改地址</p>
<hr>
<p><br><br></p>
<h2 id="13-Params类里不需要main方法"><a href="#13-Params类里不需要main方法" class="headerlink" title="13.Params类里不需要main方法"></a>13.Params类里不需要main方法</h2><p>　　模版里的main方法，只是测试用，打印输出看效果；<br>　　真正用到项目里，不需要main(主)方法。</p>
<hr>
<p><br><br></p>
<h2 id="14-虚拟桌面的Ecplise需要配置jdk"><a href="#14-虚拟桌面的Ecplise需要配置jdk" class="headerlink" title="14.虚拟桌面的Ecplise需要配置jdk"></a>14.虚拟桌面的Ecplise需要配置jdk</h2><p>　　<br>　　Ecplise顶部——&gt;Window——&gt;Java—–&gt;Installed JARS<br>　　　　　　—–&gt;jdk目录的路径(例如：C:\Program Files\Java\jdk1.8.0_65)</p>
<hr>
<p><br><br></p>
<h2 id="15-如果Detail里的内容是一张图片"><a href="#15-如果Detail里的内容是一张图片" class="headerlink" title="15.如果Detail里的内容是一张图片"></a>15.如果Detail里的内容是一张图片</h2><p>　　直接获取图片的源代码，要记得判断里面的a&gt;标签的链接是不是绝对路径<br>　　如果是相对路径需要补齐</p>
<hr>
<p><br><br></p>
<h2 id="16-List和Detail配置正则表达式-健俊"><a href="#16-List和Detail配置正则表达式-健俊" class="headerlink" title="16.List和Detail配置正则表达式(健俊)"></a>16.List和Detail配置正则表达式(健俊)</h2><p>案例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">List的api.xml配置：</div><div class="line">    &lt;request-path&gt;/xzsp/channels/2792_2.html&lt;/request-path&gt;</div><div class="line">    &lt;request-uri-replacement-pattern&gt;&lt;![CDATA[(/wzweb/jyxx/001001/)(.*)(/MoreInfo.aspx)]]&gt;&lt;/request-uri-replacement-pattern&gt;</div><div class="line"></div><div class="line">Detail的api.xml配置:</div><div class="line">&lt;request-path&gt;/xzsp/cotents/2792/7757.html&lt;/request-path&gt;</div><div class="line">    &lt;request-uri-replacement-pattern&gt;[&lt;![CDATA[(/wzweb/jyxx/001001/)(.*)(/MoreInfo.aspx)]]&gt;&lt;/request-uri-replacement-pattern&gt;</div><div class="line"></div><div class="line">杭州市江干区公共资源交易中心</div><div class="line">http://www.jianggan.gov.cn/</div><div class="line"></div><div class="line">招标公告:     </div><div class="line">List页：  http://127.0.0.1:1627/bnuser2/?iw-apikey=123&amp;iw-cmd=01002ZJZBList&amp;iw_ir_2=2792_2  </div><div class="line">          跳页参数:iw_ir_2=2792_2</div><div class="line">Detail页: http://127.0.0.1:1627/bnuser2/?iw-apikey=123&amp;iw-cmd=01002ZJZBDetail&amp;iw_ir_2=2792/7757</div><div class="line">          跳页参数:iw_ir_2=2792/7757</div><div class="line"></div><div class="line">中标公告:     </div><div class="line">List页:   http://127.0.0.1:1627/bnuser2/?iw-apikey=123&amp;iw-cmd=01002ZJZBList&amp;iw_ir_2=2793_2</div><div class="line">      跳页参数:iw_ir_2=2793_2</div><div class="line">Detail页: http://127.0.0.1:1627/bnuser2/?iw-apikey=123&amp;iw-cmd=01002ZJZBDetail&amp;iw_ir_2=2793/7778</div><div class="line">      跳页参数:iw_ir_2=2793/7778</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="17-本地平台抓包乱码"><a href="#17-本地平台抓包乱码" class="headerlink" title="17.本地平台抓包乱码"></a>17.本地平台抓包乱码</h2><p>抓包之后搜索不成功是因为抓下来之后乱码了，只需选择一个sampleResponse右键Properties（就是最后一项），在Test file encoding选择Deault就行</p>
<hr>
<p><br><br></p>
<h2 id="18-启动reacotr-谷歌浏览器显示效果分层"><a href="#18-启动reacotr-谷歌浏览器显示效果分层" class="headerlink" title="18.启动reacotr,谷歌浏览器显示效果分层"></a>18.启动reacotr,谷歌浏览器显示效果分层</h2><p>　　上面是文字，链接全部跑到下面，无法一个公告对应一个链接</p>
<p>　　可能原因：项目运行配置有错误，(包名.类名)出错</p>
<p>解决方案：<br>　　1.将抓取数据源目录名子，里面api文档的id&gt;和alias-name&gt;中的”-“改为”_”<br>　　　　举例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">000665_b785fa7e99c846eba15cdcb2de3d6c48_YNDetail</div><div class="line">&lt;id&gt;000665_b785fa7e99c846eba15cdcb2de3d6c48_YNDetail&lt;/id&gt;</div><div class="line">&lt;alias-name&gt;000665YNDetail&lt;/alias-name&gt;</div></pre></td></tr></table></figure></p>
<p>　　2.重新项目运行配置</p>
<hr>
<p><br><br></p>
<h2 id="19-启动reactor之后，弹出窗口无法连接"><a href="#19-启动reactor之后，弹出窗口无法连接" class="headerlink" title="19.启动reactor之后，弹出窗口无法连接"></a>19.启动reactor之后，弹出窗口无法连接</h2><p>　　选中工程——&gt;启动reactor<br>　　会自动弹出一个窗口，这个窗口不能上外网的，所以要另外在桌面打开谷歌浏览器，<br>　　输入测试网址，进行测试</p>
<hr>
<p><br><br></p>
<h2 id="20-谷歌浏览器显示Combine页面，报错”Internal-Server-Error-”-健俊"><a href="#20-谷歌浏览器显示Combine页面，报错”Internal-Server-Error-”-健俊" class="headerlink" title="20.谷歌浏览器显示Combine页面，报错”Internal Server Error!”(健俊)"></a>20.谷歌浏览器显示Combine页面，报错”Internal Server Error!”(健俊)</h2><p>解决方案:<br>　　抓取的数据目录中例如：00961-e9318c6b14f4489597a3153e20afa9b2-CQWZCombine<br>　　　　　　里的api.xml<br>　　　　　　最下面的<code>&lt;api-type&gt;natural&lt;/api-type&gt;</code><br>里的natural值，改为artificial</p>
<p>第二种情况：</p>
<p>　　　　 Combine里面  跳到List后，拼接的result不是JSON格式的内容</p>
<p>第三种情况<br>　　　　多回车一下就好了</p>
<p>第四种情况<br>跳到List页面的时候内容不全<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">String ahParamsList=Utils.callApi(ahParamsUrl);</div><div class="line">            a:for(;null == ahParamsList;)&#123;</div><div class="line">                ahParamsList=Utils.callApi(ahParamsUrl);</div><div class="line">                if(null != ahParamsList)&#123;</div><div class="line">                    break a;</div><div class="line">                &#125;</div><div class="line">            &#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="21-抓取哪些页，哪些需要配正则"><a href="#21-抓取哪些页，哪些需要配正则" class="headerlink" title="21.抓取哪些页，哪些需要配正则"></a>21.抓取哪些页，哪些需要配正则</h2><p>1.Params抓取第1页 List抓取第二页  Detail抓取某个公告里的内容(优先抓取有附件的)  Combine复制List<br>2.List,Params要配置正则   Detail看情况   Combine要改底部标签的natural改为artificial</p>
<hr>
<p><br><br></p>
<h2 id="22-启动reactor后，控制台报错空指针异常-陈宇"><a href="#22-启动reactor后，控制台报错空指针异常-陈宇" class="headerlink" title="22.启动reactor后，控制台报错空指针异常(陈宇)"></a>22.启动reactor后，控制台报错空指针异常(陈宇)</h2><p>　　在需要做Combine的网站，如果项目文件配置的testURL直接指向List页面，就会报错</p>
<p>解决方案：<br>　　指向Combiine页面</p>
<hr>
<p><br><br></p>
<h2 id="23-抓取的源文件，出现乱码"><a href="#23-抓取的源文件，出现乱码" class="headerlink" title="23.抓取的源文件，出现乱码"></a>23.抓取的源文件，出现乱码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">右键文件-----&gt;properties------&gt;Resource</div><div class="line"></div><div class="line">里面修改编码格式，有可能是UTF-8 GBK</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="24-日期格式不规范，自动补成yyyy-MM-dd"><a href="#24-日期格式不规范，自动补成yyyy-MM-dd" class="headerlink" title="24.日期格式不规范，自动补成yyyy-MM-dd"></a>24.日期格式不规范，自动补成yyyy-MM-dd</h2><p>1.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">举例：</div><div class="line">2016-06-02    变为2016-06-02</div><div class="line"></div><div class="line"></div><div class="line">String old=2016-6-2;</div><div class="line">Date now = (Date) new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).parse(old); </div><div class="line">String date = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(now);</div><div class="line"></div><div class="line"></div><div class="line">如果日期中包含时，分，例如： 2016-7-5 15:58</div><div class="line">String date=span_ele.getTextContent().trim();</div><div class="line">Date now = (Date) new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm&quot;).parse(date); </div><div class="line">date = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(now);</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<p>2.(瑞强)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">String d=td_ele2.getTextContent();</div><div class="line">                            String date1=d.substring(0,d.indexOf(&quot; &quot;));</div><div class="line">                            String date2 =date1.replace(&apos;/&apos;, &apos;-&apos;);</div><div class="line">                            Date now = (Date) new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).parse(date2); </div><div class="line">                             String date3 = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(now);</div><div class="line">                             branchNew.date=date3;</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="25-在Combine里增加变量的过程"><a href="#25-在Combine里增加变量的过程" class="headerlink" title="25.在Combine里增加变量的过程"></a>25.在Combine里增加变量的过程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">举例：</div><div class="line">&lt;request-path&gt;/wzweb/jyxx/001001/001001001/MoreInfo.aspx&lt;/request-path&gt;</div><div class="line">    &lt;params&gt;</div><div class="line">      &lt;param&gt;</div><div class="line">        &lt;name&gt;CategoryNum&lt;/name&gt;</div><div class="line">        &lt;value&gt;001001001&lt;/value&gt;</div><div class="line">      &lt;/param&gt;</div><div class="line">       &lt;param&gt;</div><div class="line">        &lt;name&gt;Type&lt;/name&gt;</div><div class="line">        &lt;value&gt;001001001&lt;/value&gt;</div><div class="line">      &lt;/param&gt;</div><div class="line">    &lt;/params&gt;</div><div class="line">    &lt;request-uri-replacement-pattern&gt;&lt;/request-uri-replacement-pattern&gt;</div><div class="line"></div><div class="line"></div><div class="line">/////////再Combine的api.xml中增加type变量，value为初始值。</div><div class="line"></div><div class="line"></div><div class="line">然后在Combine的java文件中获取值，</div><div class="line"></div><div class="line">String type=iwRequest.getRequestPathParm(&quot;Type&quot;).trim();</div></pre></td></tr></table></figure>
<blockquote>
<p>注意:需要的时候，只能在Combine里增加变量，不能再List,Detail,Params里增加</p>
</blockquote>
<hr>
<p><br><br></p>
<h2 id="26-报错：-“iw-response”-“errorTxt”-the-specified-iw-cmd-is-invalid”"><a href="#26-报错：-“iw-response”-“errorTxt”-the-specified-iw-cmd-is-invalid”" class="headerlink" title="26.报错：{“iw-response”:{“errorTxt”: the specified iw-cmd is invalid”}}"></a>26.报错：{“iw-response”:{“errorTxt”: the specified iw-cmd is invalid”}}</h2><p>原因：配置文件和api.xml文件出错导致的</p>
<p>解决方案：</p>
<p>1.查看api.xml里的params&gt;标签有没有结束标签，如果缺失就补上</p>
<hr>
<p><br><br></p>
<h2 id="27-记得要测试List-或者Combine-的URL和附件的URL"><a href="#27-记得要测试List-或者Combine-的URL和附件的URL" class="headerlink" title="27.记得要测试List(或者Combine)的URL和附件的URL"></a>27.记得要测试List(或者Combine)的URL和附件的URL</h2><p>直接将地址复制到浏览器中，看能否跳到Detail页</p>
<p>附件的话，把补齐的地址，在本地输出，然后再复制到浏览器中，看能否直接跳出下载链接</p>
<hr>
<p><br><br></p>
<h2 id="28-源网页的源代码没有显示招标中标的信息"><a href="#28-源网页的源代码没有显示招标中标的信息" class="headerlink" title="28.源网页的源代码没有显示招标中标的信息"></a>28.源网页的源代码没有显示招标中标的信息</h2><p>解决方案:</p>
<p>虽然没有显示，但是抓包工具依然能抓到，</p>
<p>所以搜索api的时候<br>1.查找招标公告里的关键字符(如果抓取的数据是乱码的话不能搜中文)<br>2.把默认两个选项&lt;大小写敏感&gt;&lt;全字匹配&gt;去掉</p>
<hr>
<p><br><br></p>
<h2 id="29-正则只能配置request-path-gt-标签的相对路径"><a href="#29-正则只能配置request-path-gt-标签的相对路径" class="headerlink" title="29.正则只能配置request-path&gt;标签的相对路径"></a>29.正则只能配置request-path&gt;标签的相对路径</h2><p>看到网页，先别急着作，先分析，<br>1.List跳页，跳入Detail是否有参数(可以观察网页URL，也可以观察api.xml)<br>2.还是相对路径直接变化(这种需要配正则)</p>
<p>正则格式通用格式<br><code>&lt;![CDATA[(/view/)(.*)(.html)]]&gt;</code></p>
<hr>
<p><br><br></p>
<h2 id="30-String转Document方法-陈宇"><a href="#30-String转Document方法-陈宇" class="headerlink" title="30.String转Document方法(陈宇)"></a>30.String转Document方法(陈宇)</h2><p>1.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">String转Document方法（JSON格式取出html字符串的时候使用）：</div><div class="line">String a = “&lt;p&gt;&lt;/p&gt;” // html格式的字符串</div><div class="line">String b = a.replace(&quot;&amp;&quot;,&quot;&amp;tmp;&quot;)</div><div class="line">String c = html头部+b+html尾部；</div><div class="line">StringReader stringReader  =  new StringReader(c);</div><div class="line">InputSource  inputSource  =  new </div><div class="line">InputSource(stringReader);</div><div class="line">DocumentBuilderFactory domfac=</div><div class="line">DocumentBuilderFactory.newInstance();</div><div class="line">DocumentBuilder  documentBuilder  =  domfac.newDocumentBuilder();   </div><div class="line">Document  document  =  documentBuilder.parse(inputSource );</div></pre></td></tr></table></figure></p>
<p>2.使用公司的Utils工具类的getDocByContent(String a)方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">String originTxtRspContent;</div><div class="line"> //获取页面所有节点</div><div class="line">Document xmlDoc=Utils.getDocByContent(originTxtRspContent);</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="31-正则可以用空括号"><a href="#31-正则可以用空括号" class="headerlink" title="31.正则可以用空括号"></a>31.正则可以用空括号</h2><p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;![CDATA[(/view/)(.*)(.html)]]&gt;</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="32-Combine记得配置对应Params和List的跳转映射"><a href="#32-Combine记得配置对应Params和List的跳转映射" class="headerlink" title="32.Combine记得配置对应Params和List的跳转映射"></a>32.Combine记得配置对应Params和List的跳转映射</h2><p>1.URL跳转到Params      举例：<code>&amp;iw-cmd=01025_1ZJParams</code></p>
<p>2.URL跳转到List     举例：<code>&amp;iw-cmd=01025_1ZJList</code></p>
<hr>
<p><br><br></p>
<h2 id="33-启动代理后，谷歌浏览器乱码，控制台乱码"><a href="#33-启动代理后，谷歌浏览器乱码，控制台乱码" class="headerlink" title="33.启动代理后，谷歌浏览器乱码，控制台乱码"></a>33.启动代理后，谷歌浏览器乱码，控制台乱码</h2><p>解决方案：</p>
<p>观察api.xml，把编码格式统一到Combine(最下面)，Params，List，Detail</p>
<hr>
<p><br><br></p>
<h2 id="34-遇到api-xml的request-path-gt-标签不能匹配中标和招标等类型"><a href="#34-遇到api-xml的request-path-gt-标签不能匹配中标和招标等类型" class="headerlink" title="34.遇到api.xml的request-path&gt;标签不能匹配中标和招标等类型"></a>34.遇到api.xml的request-path&gt;标签不能匹配中标和招标等类型</h2><p>一，第一种情况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">招标中标的类型变化在api.xml里的</div><div class="line">&lt;header&gt;</div><div class="line">        &lt;name&gt;Referer&lt;/name&gt;</div><div class="line">        &lt;value&gt;http://www.nbjdjy.cn/trade/gongcheng/zhaobiao/&lt;/value&gt;</div><div class="line">&lt;/header&gt;</div><div class="line">而不是在</div><div class="line"> &lt;request-path&gt;/api/listapi.asp&lt;/request-path&gt;中</div></pre></td></tr></table></figure></p>
<p>解决方案:<br>1.每个网站抓一次包，写一个Detail和List (中标和招标当作两个网站)</p>
<p>二，第二种情况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;header&gt;</div><div class="line">        &lt;name&gt;Referer&lt;/name&gt;</div><div class="line">        &lt;value&gt;http://paztb.panan.gov.cn/jsxmjy/zbgg/&lt;/value&gt;</div><div class="line">&lt;/header&gt;</div><div class="line"></div><div class="line">&lt;request-path&gt;/jsxmjy/zbgg/index_1.shtml&lt;/request-path&gt;</div><div class="line">&lt;request-uri-replacement-pattern&gt;&lt;![CDATA[(/jsxmjy/)(.*)()]]&gt;&lt;/request-uri-replacement-pattern&gt;</div></pre></td></tr></table></figure></p>
<p>解决方案：<br>1.如果有招标，中标，答疑惑等网站，那么只需要抓一次包(List,和Detail)，然后复制n次，修改正则，举例：<code>&lt;request-path&gt;/jsxmjy/zbgs/index_1.shtml&lt;/request-path&gt;</code>  zbgg改为了zbgs</p>
<hr>
<p><br><br></p>
<h2 id="35-招标公告的Detail有内容，招标答疑的Detail为null"><a href="#35-招标公告的Detail有内容，招标答疑的Detail为null" class="headerlink" title="35.招标公告的Detail有内容，招标答疑的Detail为null"></a>35.招标公告的Detail有内容，招标答疑的Detail为null</h2><p>解决方案：</p>
<p>分析原网站招标答疑的Detail，看是不是是和招标公告的Detail的排版，模块不同<br>如果不同，要针对招标答疑写代码，Detail里加入if语句判断，当遇到招标答疑的网站时候，用针对性代码</p>
<hr>
<p><br><br></p>
<h2 id="36-如何把int类型变为String类型"><a href="#36-如何把int类型变为String类型" class="headerlink" title="36.如何把int类型变为String类型"></a>36.如何把int类型变为String类型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">举例：长度直接等于总页数</div><div class="line">  NodeList option_list=select.getElementsByTagName(&quot;option&quot;);</div><div class="line">               if(option_list!=null)&#123;</div><div class="line">                   response.pageCount=String.valueOf(option_list.getLength());</div><div class="line">               &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="37-招标的Detail无法匹配中标的Detail"><a href="#37-招标的Detail无法匹配中标的Detail" class="headerlink" title="37.招标的Detail无法匹配中标的Detail"></a>37.招标的Detail无法匹配中标的Detail</h2><p>解决方案:<br>在Detail写两个模版，并且加入判断</p>
<p>当跳入Detail页面的时候，先执行第一个模版，如果内容不为空，则直接输出，保存到response.content里</p>
<p>如果经过第一个模版后，内容任然为空，则执行第二个模版，然后输出，保存到response.content中；</p>
<hr>
<p><br><br></p>
<h2 id="38-入库错误整理"><a href="#38-入库错误整理" class="headerlink" title="38.入库错误整理"></a>38.入库错误整理</h2><p>将群里的整理下</p>
<p>1.ORA-12154: TNS:无法解析指定的连接标识符。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">　　 解决方案：</div><div class="line">　　 仔细检查tnsnames.ora发现添加的配置文件 ：</div><div class="line">bxkc_test =</div><div class="line">  (DESCRIPTION =</div><div class="line">    (ADDRESS_LIST =</div><div class="line">      (ADDRESS = (PROTOCOL = TCP)(HOST = 172.26.19.6)(PORT = 1521))</div><div class="line">    )</div><div class="line">    (CONNECT_DATA =</div><div class="line">      (SID = orcl)</div><div class="line">    )</div><div class="line">  )</div><div class="line"></div><div class="line">把back_test前面的空格去掉,在TAM前有空格，去除空格后，重新保存，一切OK。</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="39-注意，我们做的项目是的0630的Excel表格"><a href="#39-注意，我们做的项目是的0630的Excel表格" class="headerlink" title="39.注意，我们做的项目是的0630的Excel表格"></a>39.注意，我们做的项目是的0630的Excel表格</h2><p><code>网站抓取数据源基本信息表（区县）0630</code></p>
<hr>
<p><br><br></p>
<h2 id="40-每个Java类里，多余的包要删掉-就是没有用到的包"><a href="#40-每个Java类里，多余的包要删掉-就是没有用到的包" class="headerlink" title="40.每个Java类里，多余的包要删掉(就是没有用到的包)"></a>40.每个Java类里，多余的包要删掉(就是没有用到的包)</h2><p>特别是这个包<br><code>import org.apche.tools.and taskdefs.Length</code>,删掉</p>
<p>带黄色波浪线没有使用过的包都可以删掉。</p>
<p>快捷键：ctrl+shift+o,优化导包</p>
<hr>
<p><br><br></p>
<h2 id="41-入库里，跳转Detail的链接，端口要用1627"><a href="#41-入库里，跳转Detail的链接，端口要用1627" class="headerlink" title="41.入库里，跳转Detail的链接，端口要用1627"></a>41.入库里，跳转Detail的链接，端口要用1627</h2><hr>
<p><br><br></p>
<h2 id="42-List页面显示pageCount不能有空格"><a href="#42-List页面显示pageCount不能有空格" class="headerlink" title="42.List页面显示pageCount不能有空格"></a>42.List页面显示pageCount不能有空格</h2><p>“ 32”   <del>~~》错误格式<br>“32”    ~</del>~&gt;正确格式</p>
<hr>
<p><br><br></p>
<h2 id="43-入库代码里的注解，是唯一标识，不能重名！"><a href="#43-入库代码里的注解，是唯一标识，不能重名！" class="headerlink" title="43.入库代码里的注解，是唯一标识，不能重名！"></a>43.入库代码里的注解，是唯一标识，不能重名！</h2><p>如果重名，不仅不能入库，而且还会报错，BackupTask.java也无法运行</p>
<hr>
<p><br><br></p>
<h2 id="44-入库的数据只要2014年之后的"><a href="#44-入库的数据只要2014年之后的" class="headerlink" title="44.入库的数据只要2014年之后的"></a>44.入库的数据只要2014年之后的</h2><p>入库的数据只要2014年之后的，其他全部不要</p>
<p>所以，如果网页中只有一条是2014年之后的数据，那么只会入一条</p>
<hr>
<p><br><br></p>
<h2 id="45-入库的页数第一页是index，第二页是index-2，入库代码"><a href="#45-入库的页数第一页是index，第二页是index-2，入库代码" class="headerlink" title="45.入库的页数第一页是index，第二页是index_2，入库代码"></a>45.入库的页数第一页是index，第二页是index_2，入库代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div></pre></td><td class="code"><pre><div class="line">package com.bonait.dataextract.service.impl;</div><div class="line">import javax.annotation.Resource;</div><div class="line"></div><div class="line">import java.text.SimpleDateFormat;</div><div class="line">import java.util.Date;</div><div class="line">import java.util.Iterator;</div><div class="line">import java.util.List;</div><div class="line">import java.util.UUID;</div><div class="line"></div><div class="line"></div><div class="line">import net.sf.json.JSONArray;</div><div class="line">import net.sf.json.JSONObject;</div><div class="line"></div><div class="line">import org.hibernate.Query;</div><div class="line">import org.hibernate.Session;</div><div class="line">import org.hibernate.SessionFactory;</div><div class="line">import org.hibernate.Transaction;</div><div class="line">import org.springframework.stereotype.Service;</div><div class="line"></div><div class="line">import com.bonait.dataextract.dao.BaseDao;</div><div class="line">import com.bonait.dataextract.domain.*;</div><div class="line">import com.bonait.dataextract.service.*;</div><div class="line">import com.bonait.dataextract.util.Util;</div><div class="line">import com.bonait.dataextract.vo.*;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * @程序猿：刘淑玮</div><div class="line"> * </div><div class="line"> * @内容：东软一期-建设工程-招标公告-01023-1</div><div class="line"> */</div><div class="line">@Service(&quot;zhejiang_01023_1_ZhaobGgService&quot;)</div><div class="line">public class Zhejiang_01023_1_ZhaobGgService implements ZhaobGgService&#123;</div><div class="line"></div><div class="line">    @Resource</div><div class="line">    private SessionFactory sf ;</div><div class="line">    private Query query;</div><div class="line">    private ZhaoBiaoGongGao zbgg;</div><div class="line">    //列表页接口地址</div><div class="line">    private String listUrl=&quot;http://127.0.0.1:1627/bnuser_3/?iw-apikey=123&amp;iw-cmd=01023_1ZJList&amp;iw_ir_2=gcjs/zbgg/index&quot;;</div><div class="line">    //内容页接口地址</div><div class="line">    private String detailUrl=&quot;http://127.0.0.1:61733/?iw-apikey=123&amp;iw-cmd=01023_1ZJDetail&amp;iw_ir_2=&quot;;</div><div class="line">//  http://127.0.0.1:51300/?iw-apikey=123&amp;iw-cmd=01023_1ZJDetail&amp;iw_ir_2=gcjs/zbgg/2016_7_1/260084</div><div class="line">    //入库编码</div><div class="line">    private String sourceNo=&quot;01023-1&quot;;</div><div class="line">    @Override</div><div class="line">    public void initZhaobGgService() &#123;</div><div class="line">        try&#123;</div><div class="line">        String s=Util.sendGet(listUrl,&quot;&quot;);</div><div class="line">        JSONObject obj =JSONObject.fromObject(s);</div><div class="line">        while (null == obj.get(&quot;pageCount&quot;))&#123;</div><div class="line">            s = Util.sendGet(listUrl, &quot;&quot;);</div><div class="line">            obj = JSONObject.fromObject(s);</div><div class="line">        &#125;</div><div class="line">//      if(obj.getString(&quot;list&quot;).length()&lt;10)&#123;System.out.println(sourceNo+&quot;列表为空，请检查一下接口。&quot;);return;&#125;</div><div class="line">        int maxPage=Integer.parseInt(obj.get(&quot;pageCount&quot;).toString());</div><div class="line">//      int maxPage=714;</div><div class="line">        Session session=sf.openSession();</div><div class="line">        session.beginTransaction();</div><div class="line">        //清空数据库里</div><div class="line">//      query=session.createSQLQuery(&quot;DELETE FROM t_zhao_biao_gong_gao t where t.WEB_SOURCE_NO=&apos;&quot;+sourceNo+&quot;&apos;&quot;);</div><div class="line">//      query.executeUpdate();</div><div class="line">//      session.getTransaction().commit();</div><div class="line">//      session.beginTransaction();</div><div class="line">                                </div><div class="line">        int KK=0;</div><div class="line">            flag:                   </div><div class="line">            for(int i=1;i&lt;=maxPage;i++)&#123;        //maxPage是总页数，测试的时候改为3页</div><div class="line">                String jsonList =null;</div><div class="line">                if(i==1)&#123;</div><div class="line">                    jsonList=Util.sendGet(listUrl,&quot;&quot;);</div><div class="line">                &#125;else&#123;</div><div class="line">                    jsonList=Util.sendGet(listUrl,&quot;_&quot;+i+&quot;&quot;);</div><div class="line">                &#125;</div><div class="line">                 </div><div class="line">                JSONObject objList =JSONObject.fromObject(jsonList);</div><div class="line">                while(null == objList.get(&quot;list&quot;))&#123;</div><div class="line">                    if(i==1)&#123;</div><div class="line">                        jsonList=Util.sendGet(listUrl,&quot;&quot;);</div><div class="line">                    &#125;else&#123;</div><div class="line">                        jsonList=Util.sendGet(listUrl,&quot;_&quot;+i+&quot;&quot;);</div><div class="line">                    &#125;</div><div class="line">                    objList = JSONObject.fromObject(jsonList);</div><div class="line">                &#125;</div><div class="line">                JSONArray temp=(JSONArray) objList.get(&quot;list&quot;);</div><div class="line">                List list = (List)JSONArray.toList(temp,ListVO.class);</div><div class="line">                Iterator it = list.iterator();</div><div class="line">                int rows = 1;</div><div class="line">                for(int row =1;row &lt; rows;row++)&#123;</div><div class="line">                    it.next();</div><div class="line">                &#125;</div><div class="line">                while(it.hasNext())&#123;</div><div class="line">                    ListVO listvo =(ListVO) it.next();</div><div class="line">                    query=session.createSQLQuery(&quot;SELECT ID FROM t_zhao_biao_gong_gao t where t.WEB_SOURCE_NO=&apos;&quot;+sourceNo+&quot;&apos; and t.RECORD_ID=&apos;&quot;+listvo.getId()+&quot;&apos;&quot;);</div><div class="line">                    String getDate=listvo.getDate();</div><div class="line">                    //获取页数，便于插入数据异常时，先跳过该页</div><div class="line">                    System.out.println(i+&quot;:&quot;+getDate+&quot;:&quot;+maxPage);</div><div class="line">                    </div><div class="line">                    int date = Integer.parseInt(getDate.substring(0, 4));</div><div class="line">                    //只取2014年至今的不重复数据   </div><div class="line">                    if(query.executeUpdate()&lt;=0&amp;&amp;date&gt;=2014)&#123;</div><div class="line">                        KK+=1;</div><div class="line">                        String detail = null;</div><div class="line">                        JSONObject o = null;</div><div class="line">                        String content = null;</div><div class="line">                        while (content == null || content.length() &lt; 10) &#123;</div><div class="line">                            detail = Util.sendGet(detailUrl, listvo.getId());</div><div class="line">                            if (null != detail)</div><div class="line">                                o = JSONObject.fromObject(detail);</div><div class="line">                            else</div><div class="line">                                continue;</div><div class="line">                            if (null != o&amp;&amp;null != o.get(&quot;content&quot;))</div><div class="line">                                content = o.get(&quot;content&quot;).toString();</div><div class="line">                            else</div><div class="line">                                continue;</div><div class="line">                            System.out.println(&quot;runing..&quot;);</div><div class="line">                        &#125;</div><div class="line">                        //过滤掉无效数据</div><div class="line">                        if(content==null||content.length()&lt;10||content.contains(&quot;出错&quot;)||content.contains(&quot;找不到文件&quot;))&#123;continue;&#125;</div><div class="line">                        zbgg=new ZhaoBiaoGongGao();</div><div class="line">                        zbgg.setWebSourceNo(sourceNo);</div><div class="line">                        zbgg.setArea(&quot;华东&quot;);//区域</div><div class="line">                        zbgg.setProvince(&quot;浙江&quot;);//省份</div><div class="line">                        zbgg.setCity(&quot;宁波&quot;);//城市，没有可不填</div><div class="line">                        zbgg.setDistrict(&quot;国家高新&quot;);// 区县 不要“区”字符</div><div class="line">//                      zbgg.setCity(listvo.getCiy());</div><div class="line">                        zbgg.setWebSourceName(&quot;宁波国家高新区（新材料科技城）公共资源交易中心&quot;);//网站名称，写完整的名称</div><div class="line">                        zbgg.setInfoSource(&quot;工程建设&quot;);//信息来源</div><div class="line">                        //未匹配到工程或服务的，都标识为货物</div><div class="line">                        String infoType=Util.getInfoType(content);</div><div class="line">                        if(infoType!=null&amp;&amp;infoType.length()&gt;0)</div><div class="line">                        zbgg.setInfoType(Util.getInfoType(content));</div><div class="line">                        else &#123;zbgg.setInfoType(&quot;货物&quot;);&#125;</div><div class="line">                        zbgg.setInfoType(&quot;工程&quot;);//信息类型</div><div class="line">//                      zbgg.setIndustry(&quot;建筑建材&quot;); //行业分类</div><div class="line">//                      zbgg.setIndustry(Util.getIndustry(content));//行业分类</div><div class="line">                        zbgg.setRecordId(listvo.getId());</div><div class="line">                        zbgg.setId(UUID.randomUUID().toString());</div><div class="line">                        zbgg.setPageTitle(listvo.getTitle());</div><div class="line">                        zbgg.setPageTime(getDate);</div><div class="line">                        zbgg.setPageContent(content);</div><div class="line">                        zbgg.setPageAttachments(&quot;&quot;);//附件url，暂不需要</div><div class="line">                        zbgg.setCreateTime(new Date());</div><div class="line">                        session.save(zbgg);</div><div class="line">                     &#125;else if(date&lt;=2013)&#123;break flag;&#125;//到2013年的页码时，断掉循环</div><div class="line">                    if(KK%1==0)&#123;</div><div class="line">                        session.flush();  </div><div class="line">                        session.clear();</div><div class="line">                        session.getTransaction().commit();</div><div class="line">                        session.beginTransaction();</div><div class="line">                    &#125;</div><div class="line">                &#125;  </div><div class="line">            &#125;   </div><div class="line"></div><div class="line">            </div><div class="line">        session.getTransaction().commit();</div><div class="line">        session.close();</div><div class="line">        System.out.println(&quot;000000000&quot;);</div><div class="line">        </div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            System.out.println(sourceNo+&quot;接口出错，请检查&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="46-遇到附件下载链接a标签只有id属性，没有value属性"><a href="#46-遇到附件下载链接a标签只有id属性，没有value属性" class="headerlink" title="46.遇到附件下载链接a标签只有id属性，没有value属性"></a>46.遇到附件下载链接a标签只有id属性，没有value属性</h2><p>思路，先在页面中截取js的传参值，再分析附件下载链接的组成，然后用Utils.allApi跳到页面获取动态值，再进行字符串拼接，设置属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">重点方法：Utils.callApi(url),跳到url地址中，并且把里面的内容保存到字符串中</div><div class="line"></div><div class="line"></div><div class="line">截取参数值cid,i2</div><div class="line"></div><div class="line">    // 扫描里面所有a标签，补全所有</div><div class="line">                                NodeList a_list = table_ele.getElementsByTagName(&quot;a&quot;);</div><div class="line">                                if (a_list != null) &#123;</div><div class="line">                                    for (int k = 0; k &lt; a_list.getLength(); k++) &#123;</div><div class="line">                                        Element a_ele = (Element) a_list.item(k);//遍历每个A标签</div><div class="line">                                        String href = null;</div><div class="line">                                        // Detail附件的链接用JS拼接后，跳到一个页面，获取参数，并截取需要的参数值，再次拼接</div><div class="line">                                        String aUrl = &quot;http://www.zjtxztb.gov.cn/txcms/attachment_url.jspx?&amp;cid=&quot;+cid+&quot;&amp;n=&quot;+i2;</div><div class="line">                                            String ahParams = Utils.callApi(aUrl);//跳到aUrl的路径，并且获取里面的所有内容，保在字符串里</div><div class="line">                                            // 截取动态参数(该参数会实时变化)</div><div class="line"></div><div class="line">                                            //对取得参数进行拼接</div><div class="line">                                            String parameter = ahParams.substring(ahParams.indexOf(&quot;[&quot;)+2,ahParams.lastIndexOf(&quot;]&quot;)-1);                                       </div><div class="line">                                            href = &quot;http://www.zjtxztb.gov.cn/txcms/attachment.jspx?cid=&quot;+ cid+ &quot;&amp;i=0&quot;+ parameter;</div><div class="line">                </div><div class="line">                                        </div><div class="line">                                        //给a标签设置href属性</div><div class="line">                                        a_ele.setAttribute(&quot;href&quot;, href);  </div><div class="line">                                        adjunctContent = Utils.getNodeHtml(table_ele).trim();</div><div class="line">                                        //将字符里面所有的&amp;amp;都变为&amp;</div><div class="line">                                        adjunctContent = adjunctContent.replaceAll(&quot;&amp;amp;&quot;, &quot;&amp;&quot;);</div><div class="line">                                    &#125;</div><div class="line">                                &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="47-尝试运用ArrayList"><a href="#47-尝试运用ArrayList" class="headerlink" title="47.尝试运用ArrayList"></a>47.尝试运用ArrayList</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">//获取title，id，date,url      </div><div class="line">          Element dl_ele=(Element)xmlDoc.getElementsByTagName(&quot;dl&quot;).item(0);</div><div class="line">           </div><div class="line">          //保存a标签和dd标签的List集合类</div><div class="line">          List &lt;Element&gt; a_ArrayList=new ArrayList&lt;Element&gt;();</div><div class="line">          List &lt;Element&gt; dd_ArrayList=new ArrayList&lt;Element&gt;();</div><div class="line">          </div><div class="line">          NodeList a_list= dl_ele.getElementsByTagName(&quot;a&quot;);</div><div class="line">          if(a_list!=null)&#123;</div><div class="line">              for(int i=0;i&lt;a_list.getLength();i++)&#123;</div><div class="line">                  Element a_ele=(Element)a_list.item(i);</div><div class="line">                  a_ArrayList.add(a_ele);</div><div class="line">              &#125;</div><div class="line">          &#125;</div><div class="line">          NodeList dd_list=dl_ele.getElementsByTagName(&quot;dd&quot;);</div><div class="line">          if(a_list!=null)&#123;</div><div class="line">              for(int i=0;i&lt;dd_list.getLength();i++)&#123;</div><div class="line">                  Element dd_ele=(Element)dd_list.item(i);</div><div class="line">                  dd_ArrayList.add(dd_ele);</div><div class="line">              &#125;</div><div class="line">          &#125;</div><div class="line">          </div><div class="line">          for(int i=0;i&lt;a_list.getLength();i++)&#123;</div><div class="line">              Element a_ele=a_ArrayList.get(i);</div><div class="line">              Element dd_ele=dd_ArrayList.get(i);</div><div class="line">              </div><div class="line">            String title=a_ele.getTextContent().trim();</div><div class="line">            String date =dd_ele.getTextContent().trim();</div><div class="line">            </div><div class="line">            </div><div class="line">            String href=a_ele.getAttribute(&quot;href&quot;);</div><div class="line">            String id=href.substring(href.indexOf(&quot;=&quot;)+1);</div><div class="line">        </div><div class="line">             //拼接URL</div><div class="line">              String url=getNewPathPrefix()+&quot;/?&quot;+</div><div class="line">                                     getAdditionalLinkParamStr()+</div><div class="line">                                     &quot;&amp;iw-cmd=01043ZJDetail&amp;id&quot;+id;</div><div class="line"> </div><div class="line">                         </div><div class="line">             //创建对象，赋值            </div><div class="line">                         BranchNew branchNew =new BranchNew();</div><div class="line">                         branchNew.title=title;</div><div class="line">                         branchNew.id=id;</div><div class="line">                         branchNew.date=date;</div><div class="line">                         branchNew.url=url;</div><div class="line">                        </div><div class="line">             //将对象保存到response的list列表中，打印输出</div><div class="line">                         response.list.add(branchNew);</div><div class="line">                         System.out.println(branchNew.toString());</div><div class="line">  </div><div class="line">          &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="48-入库代码，页数倒数模版-瑞强"><a href="#48-入库代码，页数倒数模版-瑞强" class="headerlink" title="48.入库代码，页数倒数模版(瑞强)"></a>48.入库代码，页数倒数模版(瑞强)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">int KK=0;</div><div class="line">        flag:</div><div class="line">        for(int i=maxPage;i&gt;=maxPage-2;i--)&#123;</div><div class="line">            String jsonList=Util.sendGet(listUrl,i+&quot;&quot;);</div><div class="line">            if(i==maxPage)&#123;</div><div class="line">                jsonList=Util.sendGet(listUrl,&quot;&quot;);</div><div class="line">            &#125;else&#123;</div><div class="line">                jsonList=Util.sendGet(listUrl,&quot;_&quot;+i+&quot;&quot;);</div><div class="line">            &#125;</div><div class="line">             </div><div class="line">            JSONObject objList =JSONObject.fromObject(jsonList);</div><div class="line">            while(null == objList.get(&quot;list&quot;))&#123;</div><div class="line">                if(i==maxPage)&#123;</div><div class="line">                    jsonList=Util.sendGet(listUrl,&quot;&quot;);</div><div class="line">                &#125;else&#123;</div><div class="line">                    jsonList=Util.sendGet(listUrl,&quot;_&quot;+i+&quot;&quot;);</div><div class="line">                &#125;</div><div class="line">                objList = JSONObject.fromObject(jsonList);</div><div class="line">            &#125;</div><div class="line">            JSONArray temp=(JSONArray) objList.get(&quot;list&quot;);</div><div class="line">            List list = (List)JSONArray.toList(temp,ListVO.class);</div><div class="line">            Iterator it = list.iterator();</div><div class="line">            int rows = 1;</div><div class="line">            for(int row =1;row &lt; rows;row++)&#123;</div><div class="line">                it.next();</div><div class="line">            &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="49-有些网站的尾页是没有pageCount显示的，但是确实是尾页了"><a href="#49-有些网站的尾页是没有pageCount显示的，但是确实是尾页了" class="headerlink" title="49.有些网站的尾页是没有pageCount显示的，但是确实是尾页了"></a>49.有些网站的尾页是没有pageCount显示的，但是确实是尾页了</h2><p>只要不影响入库，那就没影响</p>
<hr>
<p><br><br></p>
<h2 id="50-今天碰到编号-1，编号-2，编号-3，的招标用一个模版，中标用一个模版"><a href="#50-今天碰到编号-1，编号-2，编号-3，的招标用一个模版，中标用一个模版" class="headerlink" title="50.今天碰到编号-1，编号-2，编号-3，的招标用一个模版，中标用一个模版"></a>50.今天碰到编号-1，编号-2，编号-3，的招标用一个模版，中标用一个模版</h2><p>解决方案：<br>招标抓一次包，中标抓一次包</p>
<p>正则也可试试，比较麻烦，未成功</p>
<hr>
<p><br><br></p>
<h2 id="51-入库的时候，如果报错，只提示”接口错误”-印加暑期群"><a href="#51-入库的时候，如果报错，只提示”接口错误”-印加暑期群" class="headerlink" title="51.入库的时候，如果报错，只提示”接口错误”(印加暑期群)"></a>51.入库的时候，如果报错，只提示”接口错误”(印加暑期群)</h2><p>可以在<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">try&#123;</div><div class="line">    </div><div class="line">&#125;catch(Exception e)&#123;</div><div class="line">    e.printStackTrace(); //加入这个，输出报错信息</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="52-如果入库中个出错，纠错后，续接记录"><a href="#52-如果入库中个出错，纠错后，续接记录" class="headerlink" title="52.如果入库中个出错，纠错后，续接记录"></a>52.如果入库中个出错，纠错后，续接记录</h2><p>手动设置从哪一页，哪一行重新开始，先将那一页数据接完，再修改会原来的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">x页有错，y行有错</div><div class="line"></div><div class="line">原本</div><div class="line">for(int i=1;i&lt;=maxPage;i++)&#123;</div><div class="line">    </div><div class="line"></div><div class="line">    ...</div><div class="line"></div><div class="line">    int row=1;</div><div class="line">    for(int row=1;row&lt;rows;row++)&#123;</div><div class="line">        it.next();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">可改为</div><div class="line">for(int i=x;i==x;i++)&#123;          //锁定某页,x报错页</div><div class="line">    </div><div class="line">    ...</div><div class="line"></div><div class="line">    int rows=y+1;          //从报错的下一行开始</div><div class="line">    for(int row=1;row&lt;rows;row++)&#123;</div><div class="line">        it.next();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//将那一页录完后，再改回原来的，接后面的页</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="53-如果截取总页数，用到字符串截取，条件里有中文"><a href="#53-如果截取总页数，用到字符串截取，条件里有中文" class="headerlink" title="53.如果截取总页数，用到字符串截取，条件里有中文"></a>53.如果截取总页数，用到字符串截取，条件里有中文</h2><p>出现问题：<br>本地可以，开了代理不行，提示数组下标异常</p>
<p>可能原因：<br>1.java类的格式和开代理后页面的编码格式不同，用中文的时候出现乱码，所以搜索无法判断</p>
<hr>
<p><br><br></p>
<h2 id="54-数据库跳空语句"><a href="#54-数据库跳空语句" class="headerlink" title="54.数据库跳空语句"></a>54.数据库跳空语句</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">举例1：</div><div class="line">    if(listvo.getId().equals(&quot;art/2016/6/20/art_3439_99350&quot;) || listvo.getId().equals(&quot;art/2016/6/20/art_3439_99349&quot;) || listvo.getId().equals(&quot;art/2016/6/20/art_3439_99348&quot;)|| listvo.getId().equals(&quot;art/2016/6/20/art_3439_99347&quot;))&#123;</div><div class="line">                        continue;</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">举例：2</div><div class="line"> if(listvo.getId().equals(&quot;zbgs/9930&quot;))&#123;</div><div class="line">                        continue;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="55-List无法按照规定格式显示"><a href="#55-List无法按照规定格式显示" class="headerlink" title="55.List无法按照规定格式显示"></a>55.List无法按照规定格式显示</h2><p>将List的api.xml里的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">若原本是OTHER改为TXT</div><div class="line"></div><div class="line">  &lt;content-type&gt;TXT&lt;/content-type&gt;</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="56-使用Combine拼接两个Detail内容-附件和主内容不在同一个api"><a href="#56-使用Combine拼接两个Detail内容-附件和主内容不在同一个api" class="headerlink" title="56.使用Combine拼接两个Detail内容(附件和主内容不在同一个api)"></a>56.使用Combine拼接两个Detail内容(附件和主内容不在同一个api)</h2><p>注意：Utils.callApi获取的内容是到JSON格式，如果需要里面的内容，需要提取出来</p>
<p>而拼接两个Detail，就是要把两个都是JSON格式的内容个拼接起来，然后合成1个JSON格式内容(例如，不能有两个{“content: …”})</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"> public IwResponse sendIwRequest(IwRequest iwRequest) &#123; </div><div class="line">        IwResponse iwRsp = null;   </div><div class="line">        try &#123;               //iwRequest可以理解为api.xml文档的内容</div><div class="line">            </div><div class="line"></div><div class="line">            //获取ID</div><div class="line">            String Id=iwRequest.getRequestPathParam(&quot;Id&quot;).trim();</div><div class="line">            </div><div class="line">            //获取Detail1内容</div><div class="line">            String ahDetailUrl_1=getNewPathPrefix()+&quot;/?&quot;+getAdditionalLinkParamStr()+&quot;&amp;iw-cmd=01025ZJDetail22&quot;</div><div class="line">                    +&quot;&amp;Id=&quot;+Id;</div><div class="line">            String detail1Content1=Utils.callApi(ahDetailUrl_1);</div><div class="line">            a:for(;null == detail1Content1;)&#123;</div><div class="line">                detail1Content1=Utils.callApi(ahDetailUrl_1);</div><div class="line">                if(null != detail1Content1)&#123;</div><div class="line">                    break a;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">//            detail1Content1 = detail1Content1.replace(&quot;&#123;&quot;, &quot;[&#123;&quot;).replace(&quot;&#125;&quot;, &quot;&#125;]&quot;);</div><div class="line">//            JSONArray JSO_content1=new JSONArray(detail1Content1);</div><div class="line">//            JSONObject  content1Json = JSO_content1.getJSONObject(0);</div><div class="line">//            String  content1Main=content1Json.getString(&quot;content&quot;);      </div><div class="line">//            System.out.println(&quot;=============content1Main---------&gt;\n&quot;+content1Main);</div><div class="line"></div><div class="line">            //获取Detail2内容</div><div class="line">            String ahDetailUrl_2=getNewPathPrefix()+&quot;/?&quot;+getAdditionalLinkParamStr()+&quot;&amp;iw-cmd=01025ZJDetail2&quot;</div><div class="line">                    +&quot;&amp;Id=&quot;+Id; </div><div class="line">            String detail1Content2=Utils.callApi(ahDetailUrl_2); </div><div class="line">            a:for(;null == detail1Content2;)&#123;</div><div class="line">                detail1Content2=Utils.callApi(ahDetailUrl_2);</div><div class="line">                if(null != detail1Content2)&#123;</div><div class="line">                    break a;</div><div class="line">                &#125;</div><div class="line">            &#125;          </div><div class="line">//            detail1Content2= detail1Content2.replace(&quot;&#123;&quot;, &quot;[&#123;&quot;).replace(&quot;&#125;&quot;, &quot;&#125;]&quot;);</div><div class="line">//            JSONArray JSO_content2=new JSONArray(detail1Content2);</div><div class="line">//            JSONObject  content2Json = JSO_content2.getJSONObject(0);</div><div class="line">//            String  content2Main=content2Json.getString(&quot;content&quot;);</div><div class="line">//            System.out.println(&quot;=============content2Main---------&gt;\n&quot;+content2Main);   </div><div class="line">           </div><div class="line">                //合并内容</div><div class="line">            String andContent=detail1Content1+detail1Content2;</div><div class="line">            String one=andContent.substring(andContent.lastIndexOf(&quot;&#123;&quot;)-2,andContent.lastIndexOf(&quot;&#123;&quot;)+12);</div><div class="line">            String result=andContent.replace(one,&quot; &quot;);</div><div class="line">           </div><div class="line">            System.out.println(result);</div><div class="line">            //将result(跳转的内容)，进行转码，变为UTF-8</div><div class="line">            iwRsp =new DefaultIwResponse(null,result.getBytes(&quot;UTF-8&quot;),null,0,&quot;ok&quot;);   </div><div class="line">            </div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return iwRsp;</div><div class="line"></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="57-Combine使用for循环，反复访问"><a href="#57-Combine使用for循环，反复访问" class="headerlink" title="57.Combine使用for循环，反复访问"></a>57.Combine使用for循环，反复访问</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">String detail1Content1=Utils.callApi(ahDetailUrl_1);</div><div class="line">          a:for(;null == detail1Content1;)&#123;</div><div class="line">              detail1Content1=Utils.callApi(ahDetailUrl_1);</div><div class="line">              if(null != detail1Content1)&#123;</div><div class="line">                  break a;</div><div class="line">              &#125;</div><div class="line">          &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="57-2-提取JSON格式内容"><a href="#57-2-提取JSON格式内容" class="headerlink" title="57-2.提取JSON格式内容"></a>57-2.提取JSON格式内容</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">detail1Content1 = detail1Content1.replace(&quot;&#123;&quot;, &quot;[&#123;&quot;).replace(&quot;&#125;&quot;, &quot;&#125;]&quot;);</div><div class="line">//            JSONArray JSO_content1=new JSONArray(detail1Content1);</div><div class="line">//            JSONObject  content1Json = JSO_content1.getJSONObject(0);</div><div class="line">//            String  content1Main=content1Json.getString(&quot;content&quot;);</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="58-删除节点"><a href="#58-删除节点" class="headerlink" title="58.删除节点"></a>58.删除节点</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">Element span_ele=(Element)xmlDoc.getElementById(&quot;content&quot;);</div><div class="line">         </div><div class="line">         String content=null;</div><div class="line">         </div><div class="line">          //删除我要报名</div><div class="line">         NodeList div_list=span_ele.getElementsByTagName(&quot;div&quot;);</div><div class="line">         if(div_list.getLength()&gt;=2)&#123;</div><div class="line">             content=Utils.getNodeHtml(span_ele);</div><div class="line">         &#125;else&#123;</div><div class="line">             NodeList p_list=span_ele.getElementsByTagName(&quot;p&quot;);</div><div class="line">             if(p_list!=null)&#123;</div><div class="line">                Element p_lastele=(Element)p_list.item(p_list.getLength()-1);</div><div class="line">                  NodeList a_List=p_lastele.getElementsByTagName(&quot;a&quot;);</div><div class="line">                  if(a_List.getLength()&gt;0)&#123;</div><div class="line">                      span_ele.removeChild(p_lastele);</div><div class="line">                  &#125;</div><div class="line">                  content=Utils.getNodeHtml(span_ele);</div><div class="line">             &#125;else&#123;</div><div class="line">               content=Utils.getNodeHtml(span_ele);</div><div class="line">             &#125;</div><div class="line">         &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="59-Detail通过JS获取动态的附件链接"><a href="#59-Detail通过JS获取动态的附件链接" class="headerlink" title="59.Detail通过JS获取动态的附件链接"></a>59.Detail通过JS获取动态的附件链接</h2><p>参考网址<br><code>http://ztb.pinghu.gov.cn/phcms/gcjszbgg/10313.htm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div></pre></td><td class="code"><pre><div class="line">    protected TxtRspObject processTxtRspContent(RspState rspState,</div><div class="line">            String originTxtRspContent) &#123;</div><div class="line">        Response response = new Response();</div><div class="line">        if (rspState == RspState.Login) &#123;</div><div class="line">            try &#123;</div><div class="line"></div><div class="line">                // 前后补上div标签</div><div class="line">                originTxtRspContent = &quot;&lt;div&gt;&quot; + originTxtRspContent + &quot;&lt;/div&gt;&quot;;</div><div class="line"></div><div class="line">                // 获取所有节点</div><div class="line">                Document xmlDoc = Utils.getDocByContent(originTxtRspContent);</div><div class="line">                String content = null;</div><div class="line">                </div><div class="line">//              //获取附件连接的传入值</div><div class="line">//              String cid = null;</div><div class="line">//              String n = null;</div><div class="line">//              String adjunctContent = null;</div><div class="line">//              NodeList script_list = xmlDoc.getElementsByTagName(&quot;script&quot;);</div><div class="line">//              if (script_list != null) &#123;</div><div class="line">//                  Element script_ele = (Element) script_list.item(6);</div><div class="line">//                  adjunctContent = Utils.getNodeHtml(script_ele);</div><div class="line">//                  adjunctContent = adjunctContent.substring(adjunctContent.indexOf(&quot;Cms.attachment&quot;));</div><div class="line">//                  adjunctContent=adjunctContent.substring(adjunctContent.indexOf(&quot;,&quot;)+2,adjunctContent.lastIndexOf(&quot;;&quot;));</div><div class="line">//                  adjunctContent=adjunctContent.substring(0,adjunctContent.indexOf(&quot;;&quot;)-1);</div><div class="line">//                  cid = adjunctContent.substring(0,adjunctContent.indexOf(&quot;,&quot;)-1);</div><div class="line">//                  n = adjunctContent.substring(adjunctContent.indexOf(&quot;,&quot;)+2,adjunctContent.lastIndexOf(&quot;,&quot;)-1);</div><div class="line">//</div><div class="line">//              &#125;</div><div class="line">//              //测试输出</div><div class="line">//              System.out.println(adjunctContent);</div><div class="line">//              System.out.println(&quot;cid=&quot;+cid+&quot;;-----n=&quot;+n);</div><div class="line">            </div><div class="line">                /*</div><div class="line">                 *  获取主内容 </div><div class="line">                 */</div><div class="line">//              int count_div_table = 0;//记录主内容里是否有表格数      </div><div class="line">                NodeList div_list = xmlDoc.getElementsByTagName(&quot;div&quot;);</div><div class="line">                if (div_list != null) &#123;</div><div class="line">                    for (int i = 0; i &lt; div_list.getLength(); i++) &#123;</div><div class="line">                        Element div_ele = (Element) div_list.item(i);</div><div class="line"></div><div class="line">                        if (&quot;Main-p&quot;.equals(div_ele.getAttribute(&quot;class&quot;))) &#123;//获取主要内容</div><div class="line">                            NodeList table_list = div_ele.getElementsByTagName(&quot;table&quot;);//判断里面有没有table</div><div class="line">//                          if (table_list.getLength()&gt;0) &#123;</div><div class="line">//                              count_div_table =table_list.getLength();</div><div class="line">//                          &#125;</div><div class="line">                            content = Utils.getNodeHtml(div_ele);//保存主要内容</div><div class="line">                        &#125;   </div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                response.content=content;</div><div class="line">                System.out.println(response.content);</div><div class="line"></div><div class="line">//              //获取附件</div><div class="line">//              String twoContent=null;</div><div class="line">//              int count = 0;//计算a标签的次数，假设第一位是0</div><div class="line">//              int count2=0;   </div><div class="line">//              NodeList div_list2=xmlDoc.getElementsByTagName(&quot;div&quot;);</div><div class="line">//              if(div_list!=null)&#123;</div><div class="line">//                  for(int i=0;i&lt;div_list2.getLength();i++)&#123;</div><div class="line">//                      Element div_ele=(Element)div_list.item(i);</div><div class="line">//                      </div><div class="line">//                      if (&quot;Content-Main FloatL Black&quot;.equals(div_ele.getAttribute(&quot;class&quot;))) &#123;</div><div class="line">//                          NodeList table_list =div_ele.getElementsByTagName(&quot;table&quot;);</div><div class="line">//                          if(table_list.getLength()==1)&#123;</div><div class="line">//                              break;</div><div class="line">//                          &#125;</div><div class="line">//                          </div><div class="line">//                          Element table_ele=null;</div><div class="line">//                          NodeList tr_list=null;</div><div class="line">//                          NodeList th_list=null;</div><div class="line">//                          if(count_div_table==0)&#123;</div><div class="line">//                              table_ele = (Element) table_list.item(count_div_table);</div><div class="line">//                              tr_list=table_ele.getElementsByTagName(&quot;tr&quot;);</div><div class="line">//                              if(tr_list.getLength()!=2)&#123;</div><div class="line">//                                  table_ele = (Element) table_list.item(count_div_table+1);</div><div class="line">//                                   tr_list=table_ele.getElementsByTagName(&quot;tr&quot;);</div><div class="line">//                                  if(tr_list.getLength()!=2)&#123;</div><div class="line">//                                      break;</div><div class="line">//                                  &#125;else&#123;</div><div class="line">//                                      th_list=table_ele.getElementsByTagName(&quot;th&quot;);</div><div class="line">//                                      if(th_list.getLength()&lt;=2)&#123;</div><div class="line">//                                          break;</div><div class="line">//                                      &#125;</div><div class="line">//                                  &#125;</div><div class="line">//                              &#125; </div><div class="line">//                          &#125;else&#123;</div><div class="line">//                              table_ele = (Element) table_list.item(count_div_table);</div><div class="line">//                              tr_list=table_ele.getElementsByTagName(&quot;tr&quot;);</div><div class="line">//                              if(tr_list.getLength()!=2)&#123;</div><div class="line">//                                  </div><div class="line">//                                  if(table_list.getLength()==count_div_table+1)&#123;</div><div class="line">//                                      break;</div><div class="line">//                                  &#125;</div><div class="line">//                                  table_ele = (Element) table_list.item(count_div_table+1);</div><div class="line">//                                   tr_list=table_ele.getElementsByTagName(&quot;tr&quot;);</div><div class="line">//                                  if(tr_list.getLength()!=2)&#123;</div><div class="line">//                                      break;</div><div class="line">//                                  &#125;</div><div class="line">//                              &#125; </div><div class="line">//                          &#125;</div><div class="line">//                                          </div><div class="line">//                      </div><div class="line">//                          // 扫描里面所有a标签，补全所有</div><div class="line">//                              NodeList a_list = table_ele.getElementsByTagName(&quot;a&quot;);</div><div class="line">//                              if (a_list != null) &#123;</div><div class="line">//                                  for (int k = 0; k &lt; a_list.getLength(); k++) &#123;</div><div class="line">//                                      Element a_ele = (Element) a_list.item(k);//遍历每个A标签</div><div class="line">//                                      </div><div class="line">//                                      // Detail附件的链接用JS拼接后，跳到一个页面，获取参数，并截取需要的参数值，再次拼接</div><div class="line">//                                      String aUrl = &quot;http://ztb.pinghu.gov.cn/phcms/attachment_url.jspx?cid=&quot;+cid+&quot;&amp;n=&quot; + n;</div><div class="line">//                                          String ahParams = Utils.callApi(aUrl);//跳到aUrl的路径，并且获取里面的所有内容，保在字符串里</div><div class="line">//                                          // 截取动态参数</div><div class="line">//                                          String parameter = ahParams.substring(ahParams.indexOf(&quot;[&quot;) + 2,ahParams.lastIndexOf(&quot;]&quot;) - 1);</div><div class="line">//      </div><div class="line">//                                          String href = &quot;http://ztb.pinghu.gov.cn/phcms/attachment.jspx?cid=&quot;+ cid+ &quot;&amp;i=&quot;+count+ parameter;</div><div class="line">//                                      if(count2==2)&#123;</div><div class="line">//                                          count=0;</div><div class="line">//                                      &#125;</div><div class="line">//                                      </div><div class="line">//                                      //建立属性</div><div class="line">//                                      a_ele.setAttribute(&quot;href&quot;, href);</div><div class="line">//                                      twoContent = Utils.getNodeHtml(table_ele).trim();</div><div class="line">//                                      </div><div class="line">//                                      //将字符里面所有的&amp;amp;都变为&amp;</div><div class="line">//                                      twoContent =twoContent.replaceAll(&quot;&amp;amp;&quot;, &quot;&amp;&quot;);</div><div class="line">//                                      count2++;</div><div class="line">//                                  &#125;</div><div class="line">//                              &#125;</div><div class="line">//                              &#125;</div><div class="line">//                          &#125;</div><div class="line">//                  &#125;</div><div class="line">//              if (twoContent != null) &#123;</div><div class="line">//                  response.content = content + twoContent;</div><div class="line">//              &#125; else &#123;</div><div class="line">//                  response.content = content;</div><div class="line">//              &#125;</div><div class="line"></div><div class="line">            </div><div class="line"></div><div class="line">            &#125; catch (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return response;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="60-附件链接中出现-amp-符号-，导致无法下载"><a href="#60-附件链接中出现-amp-符号-，导致无法下载" class="headerlink" title="60.附件链接中出现(&amp;符号)，导致无法下载"></a>60.附件链接中出现(&amp;符号)，导致无法下载</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String content=Uitls.getNodeHtml(div_ele).trim();</div><div class="line">content=content.replaceAll(&quot;&amp;amp;&quot;,&quot;&amp;&quot;)</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="61-截取的内容只有tr-gt-标签，无法获取tr的Element，需要补全table-gt-再转换为Doment"><a href="#61-截取的内容只有tr-gt-标签，无法获取tr的Element，需要补全table-gt-再转换为Doment" class="headerlink" title="61. 截取的内容只有tr&gt;标签，无法获取tr的Element，需要补全table&gt;再转换为Doment"></a>61. 截取的内容只有tr&gt;标签，无法获取tr的Element，需要补全table&gt;再转换为Doment</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">String page=originTxtRspContent.substring(originTxtRspContent.indexOf(&quot;totalRecord&quot;)+12, originTxtRspContent.indexOf(&quot;totalPage&quot;)-3);</div><div class="line">                String cStr = originTxtRspContent.replace(&quot;totalRecord=2092.0;totalPage = 140;dataStore = [&apos;&quot;, &quot;&quot;).replace(&quot;&apos;];&quot;, &quot;&quot;).replaceAll(&quot;&apos;,&apos;&quot;, &quot;&quot;).trim();             </div><div class="line">                cStr=&quot;&lt;table&gt;&quot;+cStr+&quot;&lt;/table&gt;&quot;;</div><div class="line">                Document xmlDoc1=Utils.getDocByContent(cStr);</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="62-删除title里的-斜杠"><a href="#62-删除title里的-斜杠" class="headerlink" title="62.删除title里的\ (斜杠)"></a>62.删除title里的\ (斜杠)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">String title=a_ele.getAttribute(&quot;title&quot;);</div><div class="line"> title=title.replace(&quot;\\&quot;, &quot;&quot;).replace(&quot;&apos;&quot;, &quot;&quot;);</div><div class="line">branchNew.title=title;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="63-跳类型的话，没有类型参数的话，Params也记得配置正则"><a href="#63-跳类型的话，没有类型参数的话，Params也记得配置正则" class="headerlink" title="63.跳类型的话，没有类型参数的话，Params也记得配置正则"></a>63.跳类型的话，没有类型参数的话，Params也记得配置正则</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">举例网址：</div><div class="line">http://www.ajztb.com/ajzbtb/jyxx/009002/009002003/MoreInfo.aspx?CategoryNum=009002003</div><div class="line">http://www.ajztb.com/ajzbtb/jyxx/009002/009002004/</div><div class="line"></div><div class="line">&lt;![CDATA[(/ajzbtb/jyxx/)(.*)(/MoreInfo.aspx)]]&gt;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="64-判断链接开头"><a href="#64-判断链接开头" class="headerlink" title="64.判断链接开头"></a>64.判断链接开头</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">if(href.indexOf(&quot;http&quot;)!=-1)&#123;</div><div class="line">                                           continue;</div><div class="line">                                       &#125;</div><div class="line">                                       if(href.indexOf(&quot;/&quot;)==0)&#123;</div><div class="line">                                            href=href.replaceFirst(&quot;/&quot;,&quot;http://ggzy.wuxing.gov.cn/&quot;);</div><div class="line">                                       &#125;</div><div class="line">                                       if(href.indexOf(&quot;/&quot;)==2)&#123;</div><div class="line">                                            href=href.replaceFirst(&quot;../&quot;,&quot;http://ggzy.wuxing.gov.cn/&quot;);</div><div class="line">                                       &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="65-去除Detail页面尾部的图片-每个Detail页都有，并且位置固定是最后"><a href="#65-去除Detail页面尾部的图片-每个Detail页都有，并且位置固定是最后" class="headerlink" title="65.去除Detail页面尾部的图片(每个Detail页都有，并且位置固定是最后)"></a>65.去除Detail页面尾部的图片(每个Detail页都有，并且位置固定是最后)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">   originTxtRspContent = &quot;&lt;div&gt;&quot; + originTxtRspContent</div><div class="line">                        + &quot;&lt;/div&gt;&quot;;</div><div class="line">;</div><div class="line">       </div><div class="line">               int div_center=originTxtRspContent.lastIndexOf(&quot;&lt;div align=&quot;);</div><div class="line">               </div><div class="line">               String content=originTxtRspContent.substring(0,div_center);</div><div class="line">               </div><div class="line">                response.content=content;</div><div class="line">                </div><div class="line">                System.out.println(content);</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="66-去除title标签内的不需要内容-加远"><a href="#66-去除title标签内的不需要内容-加远" class="headerlink" title="66.去除title标签内的不需要内容(加远)"></a>66.去除title标签内的不需要内容(加远)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">例如：·    [资格后审] 南浔锦绣实验学校弱电布线工程招标公告</div><div class="line"></div><div class="line"> [资格后审]是不需要的！</div><div class="line"></div><div class="line">String title=a_ele.getAttribute(&quot;title&quot;).trim();</div><div class="line">                        if(&quot;【&quot;.equals(title.substring(0, 1)) </div><div class="line">                                |&quot;[&quot;.equals(title.substring(0, 1)) </div><div class="line">                                |&quot;(&quot;.equals(title.substring(0, 1))</div><div class="line">                                |&quot;（&quot;.equals(title.substring(0, 1))</div><div class="line">                            )&#123;</div><div class="line">                            title=title.replaceFirst(&quot;【.*?】|\\[.*?]&quot;, &quot;&quot;);</div><div class="line">                            title=title.replaceFirst(&quot;(.*?) |\\（.*?）&quot;,&quot;&quot;);</div><div class="line"></div><div class="line">                        &#125;else&#123;</div><div class="line">                            title =a_ele.getAttribute(&quot;title&quot;);</div><div class="line">                        &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="67-使用NodeList来定位Id属性"><a href="#67-使用NodeList来定位Id属性" class="headerlink" title="67.使用NodeList来定位Id属性"></a>67.使用NodeList来定位Id属性</h2><p>有时候招标的Detail有附件，用id属性来定位，但是中标的Detail没有附件，所以会报错<br>用NodeList稳妥些</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">String adjContent=null;</div><div class="line">              </div><div class="line">              NodeList table_list=(NodeList)xmlDoc.getElementById(&quot;grdFileList&quot;);</div><div class="line">              if(table_list!=null)&#123;</div><div class="line">                  Element table_ele=(Element)table_list.item(1);</div><div class="line">                   NodeList a_list=table_ele.getElementsByTagName(&quot;A&quot;);</div><div class="line">                   if(a_list.getLength()&gt;0)&#123;</div><div class="line">                       for(int i=0;i&lt;a_list.getLength();i++)&#123;</div><div class="line">                           Element a_ele=(Element)a_list.item(i);</div><div class="line">                           </div><div class="line">                           String href=a_ele.getAttribute(&quot;href&quot;);</div><div class="line">                           href=&quot;http://www.sxxztb.gov.cn/Bulletin/&quot;+href;</div><div class="line"></div><div class="line">                           a_ele.setAttribute(&quot;href&quot;, href);</div><div class="line">                           adjContent=Utils.getNodeHtml(table_ele).trim();</div><div class="line">                           adjContent.replaceAll(&quot;&amp;amp;&quot;,&quot;&amp;&quot;);</div><div class="line">                       &#125;</div><div class="line">                   &#125;</div><div class="line">              &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="68-编码格式问题转码，解码"><a href="#68-编码格式问题转码，解码" class="headerlink" title="68.编码格式问题转码，解码"></a>68.编码格式问题转码，解码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">ieDatumAction.public?p=downloadFileByPath&amp;amp;filePath=iezcuploadfile\bulletin\201607\10765e5-155a554d4d3-77cbd8f533ed99db396a09e7cf6fd455\YWCG2016051GK（终稿）.doc</div><div class="line"></div><div class="line"></div><div class="line">转为.</div><div class="line">http://zfcg.yw.gov.cn/ieDatumAction.public?p=downloadFileByPath&amp;filePath=iezcuploadfile\bulletin\201607\10765e5-155a554d4d3-77cbd8f533ed99db396a09e7cf6fd455\YWCG2016051GK%A3%A8%D6%D5%B8%E5%A3%A9.doc</div><div class="line"></div><div class="line"></div><div class="line"> //补齐链接</div><div class="line">                            href=&quot;http://zfcg.yw.gov.cn/&quot;+href; </div><div class="line">                                          </div><div class="line">                            String href_age=href.substring(0,href.lastIndexOf(&quot;\\&quot;)+1);</div><div class="line">                            String href_behind=href.substring(href.lastIndexOf(&quot;.&quot;));</div><div class="line">                            </div><div class="line">                            //需要解码再转码的部分</div><div class="line">                            String href_change=href.substring(href.lastIndexOf(&quot;\\&quot;)+1,href.lastIndexOf(&quot;.&quot;));</div><div class="line">                   </div><div class="line">                            href_change = URLDecoder.decode(href_change,&quot;UTF-8&quot;);</div><div class="line">                            href_change = URLEncoder.encode(href_change,&quot;GB2312&quot;);</div><div class="line">                            </div><div class="line">                            String href_all=href_age+href_change+href_behind;</div><div class="line">                            a_ele.setAttribute(&quot;href&quot;,href_all);</div><div class="line">                            adjContent=Utils.getNodeHtml(div_ele2).trim();</div><div class="line">                            adjContent=adjContent.replaceAll(&quot;&amp;amp;&quot;, &quot;&amp;&quot;);</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="69-去除title前面-内的内容-小强"><a href="#69-去除title前面-内的内容-小强" class="headerlink" title="69.去除title前面[]内的内容(小强)"></a>69.去除title前面[]内的内容(小强)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">String title=t2;</div><div class="line">                            title=a_ele.getAttribute(&quot;title&quot;).trim();</div><div class="line">                            if(&quot;(&quot;.equals(title.substring(0, 1))</div><div class="line">                                    |&quot;（&quot;.equals(title.substring(0, 1))</div><div class="line">                                )&#123;</div><div class="line">                               </div><div class="line">                                title=title.replaceFirst(&quot;\\(.*?\\)&quot;,&quot;&quot;);</div><div class="line"></div><div class="line">                            &#125;else&#123;</div><div class="line">                                title =a_ele.getAttribute(&quot;title&quot;);</div><div class="line">                            &#125;</div><div class="line">                            title = title.replace(&quot;【询价公告】&quot;, &quot;&quot;);</div><div class="line">                            title = title.replace(&quot;【招标公告】&quot;, &quot;&quot;);</div><div class="line">                            </div><div class="line">                            branchNew.title=title.trim();</div></pre></td></tr></table></figure>
<hr>
<h2 id="70-Detail里面只有一个链接，链接到另一个页面"><a href="#70-Detail里面只有一个链接，链接到另一个页面" class="headerlink" title="70.Detail里面只有一个链接，链接到另一个页面"></a>70.Detail里面只有一个链接，链接到另一个页面</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//第二套Detail，跳到另一个页面</div><div class="line">          if(response.content.length()&lt;10)&#123;</div><div class="line">                  String http=originTxtRspContent;</div><div class="line">                  http=http.substring(http.indexOf(&quot;&apos;&quot;)+1,http.lastIndexOf(&quot;&apos;&quot;));</div><div class="line">                  </div><div class="line">                  //跳到另一个页面，并且获取内容</div><div class="line">                  String OtherContent=Utils.callApi(http);</div><div class="line">                  Document xmlDoc2 = Utils.getDocByContent(OtherContent); </div><div class="line">                  </div><div class="line">                  Element div_ele=xmlDoc2.getElementById(&quot;news_content&quot;);</div><div class="line">                  response.content=Utils.getNodeHtml(div_ele);</div><div class="line">          &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="71-入库代码如果是空白页自动跳过-原网站一片的某个Detail页面一片空白"><a href="#71-入库代码如果是空白页自动跳过-原网站一片的某个Detail页面一片空白" class="headerlink" title="71.入库代码如果是空白页自动跳过(原网站一片的某个Detail页面一片空白)"></a>71.入库代码如果是空白页自动跳过(原网站一片的某个Detail页面一片空白)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div></pre></td><td class="code"><pre><div class="line">package com.bonait.dataextract.service.impl;</div><div class="line">import java.util.Date;</div><div class="line">import java.util.Iterator;</div><div class="line">import java.util.List;</div><div class="line">import java.util.UUID;</div><div class="line"></div><div class="line">import javax.annotation.Resource;</div><div class="line"></div><div class="line">import org.hibernate.Query;</div><div class="line">import org.hibernate.Session;</div><div class="line">import org.hibernate.SessionFactory;</div><div class="line">import org.springframework.stereotype.Service;</div><div class="line"></div><div class="line">import com.bonait.dataextract.domain.ZhaoBiaoYuGao;</div><div class="line">import com.bonait.dataextract.service.ZhaobYgService;</div><div class="line">import com.bonait.dataextract.util.Util;</div><div class="line">import com.bonait.dataextract.vo.ListVO;</div><div class="line"></div><div class="line">import net.sf.json.JSONArray;</div><div class="line">import net.sf.json.JSONObject;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * @程序猿：刘淑玮</div><div class="line"> * </div><div class="line"> * @内容：东软一期-建设工程-招标预告-01361-1</div><div class="line"> */</div><div class="line">@Service(&quot;zhejiang_01361_1_ZhaobYgService&quot;)</div><div class="line">public class Zhejiang_01361_1_ZhaobYgService implements ZhaobYgService&#123;</div><div class="line"></div><div class="line">    @Resource</div><div class="line">    private SessionFactory sf ;</div><div class="line">    private Query query;</div><div class="line">    private ZhaoBiaoYuGao zbyg;</div><div class="line">    //列表页接口地址</div><div class="line">    private String listUrl=&quot;http://127.0.0.1:1627/bnuser_3/?iw-apikey=123&amp;iw-cmd=01361ZJCombine&amp;Categorynum=013001&amp;__EVENTARGUMENT=&quot;;</div><div class="line">    //内容页接口地址</div><div class="line">    private String detailUrl=&quot;http://127.0.0.1:1627/bnuser_3/?iw-apikey=123&amp;iw-cmd=01361ZJDetail&amp;CategoryNum=013001&amp;infoid=&quot;;</div><div class="line">    //入库编码</div><div class="line">    private String sourceNo=&quot;01361-1&quot;;</div><div class="line">    @Override</div><div class="line">    public void initZhaobYgService() &#123;</div><div class="line">        try&#123;</div><div class="line">        String s=Util.sendGet(listUrl,&quot;1&quot;);</div><div class="line">        JSONObject obj =JSONObject.fromObject(s);</div><div class="line">        while (null == obj.get(&quot;pageCount&quot;))&#123;</div><div class="line">            s = Util.sendGet(listUrl, &quot;1&quot;);</div><div class="line">            obj = JSONObject.fromObject(s);</div><div class="line">        &#125;</div><div class="line">//      if(obj.getString(&quot;list&quot;).length()&lt;10)&#123;System.out.println(sourceNo+&quot;列表为空，请检查一下接口。&quot;);return;&#125;</div><div class="line">        int maxPage=Integer.parseInt(obj.get(&quot;pageCount&quot;).toString());</div><div class="line">//      int maxPage=714;</div><div class="line">        Session session=sf.openSession();</div><div class="line">        session.beginTransaction();</div><div class="line">        //清空数据库里</div><div class="line">        query=session.createSQLQuery(&quot;DELETE FROM t_zhao_biao_yu_gao t where t.WEB_SOURCE_NO=&apos;&quot;+sourceNo+&quot;&apos;&quot;);</div><div class="line">        query.executeUpdate();</div><div class="line">        session.getTransaction().commit();</div><div class="line">        session.beginTransaction();</div><div class="line">        //</div><div class="line">        int KK=0;</div><div class="line">        flag:</div><div class="line">            for(int i=1;i&lt;=3;i++)&#123;//maxPage</div><div class="line">                String jsonList=Util.sendGet(listUrl,i+&quot;&quot;);</div><div class="line">                JSONObject objList =JSONObject.fromObject(jsonList);</div><div class="line">                while(null == objList.get(&quot;list&quot;))&#123;</div><div class="line">                    jsonList = Util.sendGet(listUrl, i + &quot;&quot;);</div><div class="line">                    objList = JSONObject.fromObject(jsonList);</div><div class="line">                &#125;</div><div class="line">                JSONArray temp=(JSONArray) objList.get(&quot;list&quot;);</div><div class="line">                List list = (List)JSONArray.toList(temp,ListVO.class);</div><div class="line">                Iterator it = list.iterator();</div><div class="line">                int rows = 1;</div><div class="line">                for(int row =1;row &lt; rows;row++)&#123;</div><div class="line">                    it.next();</div><div class="line">                &#125;</div><div class="line">                while(it.hasNext())&#123;</div><div class="line">                    ListVO listvo =(ListVO) it.next();</div><div class="line">                    query=session.createSQLQuery(&quot;SELECT ID FROM t_zhao_biao_yu_gao t where t.WEB_SOURCE_NO=&apos;&quot;+sourceNo+&quot;&apos; and t.RECORD_ID=&apos;&quot;+listvo.getId()+&quot;&apos;&quot;);</div><div class="line">                    String getDate=listvo.getDate();</div><div class="line">                    //获取页数，便于插入数据异常时，先跳过该页</div><div class="line">                    System.out.println(i+&quot;:&quot;+getDate+&quot;:&quot;+maxPage);</div><div class="line">                    </div><div class="line">                    int date = Integer.parseInt(getDate.substring(0, 4));</div><div class="line">                    //只取2014年至今的不重复数据   </div><div class="line">                    if(query.executeUpdate()&lt;=0&amp;&amp;date&gt;=2014)&#123;</div><div class="line">                        KK+=1;</div><div class="line">                        String detail = null;</div><div class="line">                        JSONObject o = null;</div><div class="line">                        String content = null;</div><div class="line">                        </div><div class="line">                        //判断是否空白页</div><div class="line">                        boolean sign=false;</div><div class="line">                        int longContent=0;</div><div class="line">                        </div><div class="line">                        while (content == null || content.length() &lt; 10) &#123;</div><div class="line">                            detail = Util.sendGet(detailUrl, listvo.getId());</div><div class="line">                            if(detail.toString().length()&lt;20)&#123;</div><div class="line">                                sign=true;</div><div class="line">                                break;</div><div class="line">                            &#125;</div><div class="line">                            if (null != detail)</div><div class="line">                                o = JSONObject.fromObject(detail);</div><div class="line">                            else</div><div class="line">                                continue;</div><div class="line">                            if (null != o&amp;&amp;null != o.get(&quot;content&quot;))</div><div class="line">                                content = o.get(&quot;content&quot;).toString();</div><div class="line">                            else</div><div class="line">                                continue;</div><div class="line">                            System.out.println(&quot;runing..&quot;); </div><div class="line">                    &#125;</div><div class="line">                        </div><div class="line">                        if(sign)&#123;</div><div class="line">                            continue;</div><div class="line">                        &#125;</div><div class="line">                        //过滤掉无效数据</div><div class="line">                        if(content==null||content.length()&lt;10||content.contains(&quot;出错&quot;)||content.contains(&quot;找不到文件&quot;))&#123;continue;&#125;</div><div class="line">                        zbyg=new ZhaoBiaoYuGao();</div><div class="line">                        zbyg.setWebSourceNo(sourceNo);</div><div class="line">                        zbyg.setArea(&quot;华东&quot;);//区域</div><div class="line">                        zbyg.setProvince(&quot;浙江&quot;);//省份</div><div class="line">                        zbyg.setCity(&quot;金华&quot;);//城市，没有可不填</div><div class="line">                        zbyg.setDistrict(&quot;浦江&quot;);// 区县 不要“区”字符</div><div class="line">//                      zbyg.setCity(listvo.getCiy());</div><div class="line">                        zbyg.setWebSourceName(&quot;浦江县公共资源交易中心&quot;);//网站名称，写完整的名称</div><div class="line">                        zbyg.setInfoSource(&quot;政府采购&quot;);//信息来源</div><div class="line">                        //未匹配到工程或服务的，都标识为货物</div><div class="line">                        String infoType=Util.getInfoType(content);</div><div class="line">                        if(infoType!=null&amp;&amp;infoType.length()&gt;0)</div><div class="line">                        zbyg.setInfoType(Util.getInfoType(content));</div><div class="line">                        else &#123;zbyg.setInfoType(&quot;货物&quot;);&#125;</div><div class="line">//                      zbyg.setInfoType(&quot;服务&quot;);//信息类型</div><div class="line">//                      zbyg.setIndustry(&quot;建筑建材&quot;); //行业分类</div><div class="line">//                      zbyg.setIndustry(Util.getIndustry(content));//行业分类</div><div class="line">                        zbyg.setRecordId(listvo.getId());</div><div class="line">                        zbyg.setId(UUID.randomUUID().toString());</div><div class="line">                        zbyg.setPageTitle(listvo.getTitle());</div><div class="line">                        zbyg.setPageTime(listvo.getDate());</div><div class="line">                        zbyg.setPageContent(content);</div><div class="line">                        zbyg.setPageAttachments(&quot;&quot;);//附件url，暂不需要</div><div class="line">                        zbyg.setCreateTime(new Date());</div><div class="line">                        session.save(zbyg);</div><div class="line">                     &#125;else if(date&lt;=2013)&#123;break flag;&#125;//到2013年的页码时，断掉循环</div><div class="line">                    if(KK%1==0)&#123;</div><div class="line">                        session.flush();  </div><div class="line">                        session.clear();</div><div class="line">                        session.getTransaction().commit();</div><div class="line">                        session.beginTransaction();</div><div class="line">                    &#125;</div><div class="line">                &#125;  </div><div class="line">            &#125;   </div><div class="line"></div><div class="line">            </div><div class="line">        session.getTransaction().commit();</div><div class="line">        session.close();</div><div class="line">        System.out.println(&quot;000000000&quot;);</div><div class="line">        </div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            System.out.println(sourceNo+&quot;接口出错，请检查&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="72-入库小发现"><a href="#72-入库小发现" class="headerlink" title="72.入库小发现"></a>72.入库小发现</h2><p>宿舍可以查测试库，入测试库</p>
<p>正式库无法操作</p>
<hr>
<p><br><br></p>
<h2 id="73-Detail补齐图片，和附件链接通用版"><a href="#73-Detail补齐图片，和附件链接通用版" class="headerlink" title="73.Detail补齐图片，和附件链接通用版"></a>73.Detail补齐图片，和附件链接通用版</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">protected TxtRspObject processTxtRspContent(RspState rspState,</div><div class="line">            String originTxtRspContent) &#123;</div><div class="line">        Response response = new Response();</div><div class="line">        if (rspState == RspState.Login) &#123;</div><div class="line">            try &#123;</div><div class="line">                originTxtRspContent = &quot;&lt;div&gt;&quot; + originTxtRspContent+ &quot;&lt;/div&gt;&quot;;</div><div class="line">                Document xmlDoc = Utils.getDocByContent(originTxtRspContent);       </div><div class="line">                </div><div class="line">                String div_content=null;</div><div class="line">                NodeList div_list=xmlDoc.getElementsByTagName(&quot;div&quot;);</div><div class="line">                if(div_list!=null)&#123;</div><div class="line">                    for(int j=0;j&lt;div_list.getLength();j++)&#123;</div><div class="line">                        Element div_ele=(Element)div_list.item(j);</div><div class="line">                        </div><div class="line">                        if(&quot;t_list_content&quot;.equals(div_ele.getAttribute(&quot;class&quot;)))&#123;</div><div class="line">                                                         </div><div class="line">                             NodeList a_list=div_ele.getElementsByTagName(&quot;a&quot;);</div><div class="line">                             if(a_list.getLength()&gt;0)&#123;</div><div class="line">                                 for(int i=0;i&lt;a_list.getLength();i++)&#123;</div><div class="line">                                     Element a_ele=(Element)a_list.item(i);</div><div class="line">                                     String href=a_ele.getAttribute(&quot;href&quot;);</div><div class="line">                                     </div><div class="line">                                     if(href.indexOf(&quot;http&quot;)!=-1 || href.length()&lt;5)&#123;</div><div class="line">                                         continue;</div><div class="line">                                     &#125;</div><div class="line"></div><div class="line">                                     if(href.indexOf(&quot;/&quot;)&gt;=1)&#123;</div><div class="line">                                          href=href.replaceFirst(&quot;./&quot;,&quot;http://www.xinhuang.gov.cn/&quot;);</div><div class="line">                                     &#125;else&#123;</div><div class="line">                                         href=href.replaceFirst(&quot;/&quot;,&quot;http://www.xinhuang.gov.cn/&quot;);</div><div class="line">                                     &#125;</div><div class="line">                                     a_ele.setAttribute(&quot;href&quot;, href);</div><div class="line">                                 &#125;</div><div class="line">                             &#125;</div><div class="line">                             </div><div class="line">                             NodeList img_list=div_ele.getElementsByTagName(&quot;img&quot;);</div><div class="line">                             if(img_list.getLength()&gt;0)&#123;</div><div class="line">                                 for(int i=0;i&lt;img_list.getLength();i++)&#123;</div><div class="line">                                     Element img_ele=(Element)img_list.item(i);</div><div class="line">                                          </div><div class="line">                                     String src=img_ele.getAttribute(&quot;src&quot;);</div><div class="line">                                     </div><div class="line">                                     if(src.indexOf(&quot;http&quot;)!=-1  || src.length()&lt;5)&#123;</div><div class="line">                                         continue;</div><div class="line">                                     &#125;</div><div class="line"></div><div class="line">                                     if(src.indexOf(&quot;/&quot;)&gt;=1)&#123;</div><div class="line">                                      src=src.replaceFirst(&quot;./&quot;,&quot;http://www.xinhuang.gov.cn/&quot;);</div><div class="line">                                    &#125;else&#123;</div><div class="line">                                     src=src.replaceFirst(&quot;/&quot;,&quot;http://www.xinhuang.gov.cn/&quot;);</div><div class="line">                                    &#125;</div><div class="line">                                     </div><div class="line">                                     img_ele.setAttribute(&quot;src&quot;, src);</div><div class="line">                                 &#125;</div><div class="line">                             &#125; </div><div class="line">                          div_content=Utils.getNodeHtml(div_ele);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                </div><div class="line">                 response.content=div_content;</div><div class="line">                 </div><div class="line">                 System.out.println(response.content);</div><div class="line">                 </div><div class="line">                </div><div class="line">            &#125;catch (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return response;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="74-ecplise–运行java类快捷键"><a href="#74-ecplise–运行java类快捷键" class="headerlink" title="74.ecplise–运行java类快捷键"></a>74.ecplise–运行java类快捷键</h2><p>F11</p>
<hr>
<p><br><br></p>
<h2 id="75-遇到网站里List内容是-amp-xxxxx-编码格式的-健俊"><a href="#75-遇到网站里List内容是-amp-xxxxx-编码格式的-健俊" class="headerlink" title="75.遇到网站里List内容是[&amp;#xxxxx];编码格式的 (健俊)"></a>75.遇到网站里List内容是[&amp;#xxxxx];编码格式的 (健俊)</h2><p>数字是字符的Unicode编码的10进制形式，&#xxxxx;这是字符的HTML实体形式。</p>
<p>解决方案：<br>抓下来，用字符串转码将其转换成中文<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String title=Utils.decodeUnicode(txt);</div><div class="line">把&amp;#20851;&amp;#20110;&amp;#8220;&amp;#33670;&amp;#30000;&amp;#24066;这种类型的编码转换成中文</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="76-增加变量"><a href="#76-增加变量" class="headerlink" title="76,增加变量"></a>76,增加变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;request-path&gt;/jscg/cggg/gg_list.jsp&lt;/request-path&gt;</div><div class="line">    &lt;params&gt;</div><div class="line">     &lt;param&gt;</div><div class="line">       &lt;name&gt;opstatus&lt;/name&gt;</div><div class="line">       &lt;value&gt;query&lt;/value&gt;</div><div class="line">     &lt;/param&gt;</div><div class="line">   &lt;/params&gt;</div><div class="line">    &lt;params&gt;</div><div class="line">     &lt;param&gt;</div><div class="line">       &lt;name&gt;gg_year&lt;/name&gt;</div><div class="line">       &lt;value&gt;&lt;/value&gt; &lt;!--2015 --&gt;</div><div class="line">     &lt;/param&gt;</div><div class="line">   &lt;/params&gt;</div><div class="line">   &lt;request-uri-replacement-pattern&gt;&lt;/request-uri-replacement-pattern&gt;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="77-removeChild-方法删除子节点"><a href="#77-removeChild-方法删除子节点" class="headerlink" title="77.removeChild()方法删除子节点"></a>77.removeChild()方法删除子节点</h2><p>tr_ele.removeChild(td_ele);只能删除儿子的，但是有些时候，儿子比较特别，报错</p>
<p>可以尝试定位到爷爷，然后再定位到爷爷的儿子，由爷爷的儿子来删除孙子。<br>这样输出爷爷的时候，孙子也成功删除了</p>
<p>额，可怕的逻辑能力。。。。</p>
<hr>
<p><br><br></p>
<h2 id="78-获取当前年份"><a href="#78-获取当前年份" class="headerlink" title="78.获取当前年份"></a>78.获取当前年份</h2><p>两种方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">1,优先使用</div><div class="line">    Calendar c= Calendar.getInstance();</div><div class="line">      int year = c.get(Calendar.YEAR);</div><div class="line">      java.util.Calendar c = Calendar.getInstance();</div><div class="line">int year = c.get(Calendar.YEAR);</div><div class="line">int month = c.get(Calendar.MONTH) + 1; //国外从0月开始，11月结束</div><div class="line">int date = c.get(Calendar.DATE);</div><div class="line">int hh = c.get(Calendar.HOUR_OF_DAY); //24小时制</div><div class="line">int mm = c.get(Calendar.MINUTE);</div><div class="line">int ss = c.get(Calendar.SECOND); //秒</div><div class="line">2、java.util.Date date = new Date(); //当前日期时间</div><div class="line">int yy = date.getYear();</div><div class="line">int hh = date.getHours();</div><div class="line"></div><div class="line"></div><div class="line">2.</div><div class="line">import java.util.Date;</div><div class="line">import java.text.DateFormat;</div><div class="line">import java.text.SimpleDateFormat;     </div><div class="line">          Date dt=new Date();//如果不需要格式,可直接用dt,dt就是当前系统时间</div><div class="line">         DateFormat df = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss&quot;);//设置显示格式</div><div class="line">　　 String nowTime=&quot;&quot;;</div><div class="line">        nowTime= df.format(dt);//用DateFormat的format()方法在dt中获取并以yyyy/MM/dd HH:mm:ss</div></pre></td></tr></table></figure></p>
<p>案例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">//获取系统当前年份</div><div class="line">    Calendar c= Calendar.getInstance();</div><div class="line">    int nowYear = c.get(Calendar.YEAR);</div><div class="line">    </div><div class="line">String s=Util.sendGet(listUrl,nowYear+&quot;&quot;);</div><div class="line">JSONObject obj =JSONObject.fromObject(s);</div><div class="line">while (null == obj.get(&quot;pageCount&quot;))&#123;</div><div class="line">    s = Util.sendGet(listUrl, nowYear+&quot;&quot;);</div><div class="line">    obj = JSONObject.fromObject(s);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//</div><div class="line">    for(int i=nowYear ;i&gt;=2014 ;i--)&#123;//maxPage</div><div class="line">        String jsonList=Util.sendGet(listUrl,i+&quot;&quot;);</div><div class="line">    </div><div class="line">        JSONObject objList =JSONObject.fromObject(jsonList);</div><div class="line">        while(null == objList.get(&quot;list&quot;))&#123;     </div><div class="line">                jsonList=Util.sendGet(listUrl,i+&quot;&quot;);</div><div class="line">            objList = JSONObject.fromObject(jsonList);</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="79-URL入库，主要是用ListVO-4"><a href="#79-URL入库，主要是用ListVO-4" class="headerlink" title="79.URL入库，主要是用ListVO_4"></a>79.URL入库，主要是用ListVO_4</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line">package com.bonait.dataextract.service.impl;</div><div class="line">import java.util.Date;</div><div class="line">import java.util.Iterator;</div><div class="line">import java.util.List;</div><div class="line">import java.util.UUID;</div><div class="line"></div><div class="line">import javax.annotation.Resource;</div><div class="line"></div><div class="line">import org.hibernate.Query;</div><div class="line">import org.hibernate.Session;</div><div class="line">import org.hibernate.SessionFactory;</div><div class="line">import org.springframework.stereotype.Service;</div><div class="line"></div><div class="line">import com.bonait.dataextract.domain.ZhaoBiaoGongGao;</div><div class="line">import com.bonait.dataextract.service.ZhaobGgService;</div><div class="line">import com.bonait.dataextract.util.Util;</div><div class="line">import com.bonait.dataextract.vo.ListVO_4;</div><div class="line"></div><div class="line">import net.sf.json.JSONArray;</div><div class="line">import net.sf.json.JSONObject;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * @程序猿：刘淑玮</div><div class="line"> * </div><div class="line"> * @内容：东软一期-政府采购-招标公告-03152</div><div class="line"> */</div><div class="line">@Service(&quot;shanxi_03152_ZhaobGgService&quot;)</div><div class="line">public class Shanxi_03152_ZhaobGgService implements ZhaobGgService&#123;</div><div class="line"></div><div class="line">    @Resource</div><div class="line">    private SessionFactory sf ;</div><div class="line">    private Query query;</div><div class="line">    private ZhaoBiaoGongGao zbgg;</div><div class="line">    //列表页接口地址</div><div class="line">    private String listUrl=&quot;http://127.0.0.1:1627/bnuser_3/?iw-apikey=123&amp;iw-cmd=03152SXList&amp;id=363&amp;Page=&quot;;</div><div class="line">    //内容页接口地址</div><div class="line">//  private String detailUrl=&quot;http://127.0.0.1:1626/?iw-apikey=123&amp;iw-cmd=sichuang00181Detail&amp;iw_ir_2=002001&amp;InfoID=&quot;;</div><div class="line">    //入库编码</div><div class="line">    private String sourceNo=&quot;03152&quot;;</div><div class="line">    @Override</div><div class="line">    public void initZhaobGgService() &#123;</div><div class="line">        try&#123;</div><div class="line">        String s=Util.sendGet(listUrl,&quot;1&quot;);</div><div class="line">        JSONObject obj =JSONObject.fromObject(s);</div><div class="line">        while (null == obj.get(&quot;pageCount&quot;))&#123;</div><div class="line">            s = Util.sendGet(listUrl, &quot;1&quot;);</div><div class="line">            obj = JSONObject.fromObject(s);</div><div class="line">        &#125;</div><div class="line">//      if(obj.getString(&quot;list&quot;).length()&lt;10)&#123;System.out.println(sourceNo+&quot;列表为空，请检查一下接口。&quot;);return;&#125;</div><div class="line">        int maxPage=Integer.parseInt(obj.get(&quot;pageCount&quot;).toString());</div><div class="line">//      int maxPage=714;</div><div class="line">        Session session=sf.openSession();</div><div class="line">        session.beginTransaction();</div><div class="line">        //清空数据库里</div><div class="line">//      query=session.createSQLQuery(&quot;DELETE FROM t_zhao_biao_gong_gao t where t.WEB_SOURCE_NO=&apos;&quot;+sourceNo+&quot;&apos;&quot;);</div><div class="line">//      query.executeUpdate();</div><div class="line">//      session.getTransaction().commit();</div><div class="line">//      session.beginTransaction();</div><div class="line">        //</div><div class="line">        int KK=0;</div><div class="line">            flag:</div><div class="line">            for(int i=1;i&lt;=maxPage;i++)&#123;//maxPage</div><div class="line">                String jsonList=Util.sendGet(listUrl,i+&quot;&quot;);</div><div class="line">                JSONObject objList =JSONObject.fromObject(jsonList);</div><div class="line">                while(null == objList.get(&quot;list&quot;))&#123;</div><div class="line">                    jsonList = Util.sendGet(listUrl, i + &quot;&quot;);</div><div class="line">                    objList = JSONObject.fromObject(jsonList);</div><div class="line">                &#125;</div><div class="line">                JSONArray temp=(JSONArray) objList.get(&quot;list&quot;);</div><div class="line">                List list = (List)JSONArray.toList(temp,ListVO_4.class);</div><div class="line">                Iterator it = list.iterator();</div><div class="line">                int rows = 1;</div><div class="line">                for(int row =1;row &lt; rows;row++)&#123;</div><div class="line">                    it.next();</div><div class="line">                &#125;</div><div class="line">                while(it.hasNext())&#123;</div><div class="line">                    ListVO_4 listvo =(ListVO_4) it.next();</div><div class="line">                    query=session.createSQLQuery(&quot;SELECT ID FROM t_zhao_biao_gong_gao t where t.WEB_SOURCE_NO=&apos;&quot;+sourceNo+&quot;&apos; and t.RECORD_ID=&apos;&quot;+listvo.getId()+&quot;&apos;&quot;);</div><div class="line">                    String getDate=listvo.getDate();</div><div class="line">                    //获取页数，便于插入数据异常时，先跳过该页</div><div class="line">                    System.out.println(i+&quot;:&quot;+getDate+&quot;:&quot;+maxPage);</div><div class="line">                    </div><div class="line">                    int date = Integer.parseInt(getDate.substring(0, 4));</div><div class="line">                    //只取2014年至今的不重复数据   </div><div class="line">                    if(query.executeUpdate()&lt;=0&amp;&amp;date&gt;=2014)&#123;</div><div class="line">                        KK+=1;</div><div class="line">                        String detail = null;</div><div class="line">                        JSONObject o = null;</div><div class="line">                        String content = null;</div><div class="line">                        while (content == null || content.length() &lt; 10) &#123;</div><div class="line">                            detail = Util.sendGet(listvo.getUrl(),&quot;&quot;);</div><div class="line">                            if (null != detail)</div><div class="line">                                o = JSONObject.fromObject(detail);</div><div class="line">                            else</div><div class="line">                                continue;</div><div class="line">                            if (null != o&amp;&amp;null != o.get(&quot;content&quot;))</div><div class="line">                                content = o.get(&quot;content&quot;).toString();</div><div class="line">                            else</div><div class="line">                                continue;</div><div class="line">                            System.out.println(&quot;runing..&quot;);</div><div class="line">                        &#125;</div><div class="line">                        //过滤掉无效数据</div><div class="line">                        if(content==null||content.length()&lt;10||content.contains(&quot;出错&quot;)||content.contains(&quot;找不到文件&quot;))&#123;continue;&#125;</div><div class="line">                        zbgg=new ZhaoBiaoGongGao();</div><div class="line">                        zbgg.setWebSourceNo(sourceNo);</div><div class="line">                        zbgg.setArea(&quot;华北&quot;);//区域</div><div class="line">                        zbgg.setProvince(&quot;山西&quot;);//省份</div><div class="line">                        zbgg.setCity(&quot;晋中&quot;);//城市，没有可不填</div><div class="line">                        zbgg.setDistrict(&quot;平遥&quot;);// 区县 不要“区”字符</div><div class="line">//                      zbgg.setCity(listvo.getCiy());</div><div class="line">                        zbgg.setWebSourceName(&quot;平遥县政府采购中心&quot;);//网站名称，写完整的名称</div><div class="line">                        zbgg.setInfoSource(&quot;政府采购&quot;);//信息来源</div><div class="line">                        //未匹配到工程或服务的，都标识为货物</div><div class="line">                        String infoType=Util.getInfoType(content);</div><div class="line">                        if(infoType!=null&amp;&amp;infoType.length()&gt;0)</div><div class="line">                        zbgg.setInfoType(Util.getInfoType(content));</div><div class="line">                        else &#123;zbgg.setInfoType(&quot;货物&quot;);&#125;</div><div class="line">//                      zbgg.setInfoType(&quot;服务&quot;);//信息类型</div><div class="line">//                      zbgg.setIndustry(&quot;建筑建材&quot;); //行业分类</div><div class="line">//                      zbgg.setIndustry(Util.getIndustry(content));//行业分类</div><div class="line">                        zbgg.setRecordId(listvo.getId());</div><div class="line">                        zbgg.setId(UUID.randomUUID().toString());</div><div class="line">                        zbgg.setPageTitle(listvo.getTitle());</div><div class="line">                        zbgg.setPageTime(getDate);</div><div class="line">                        zbgg.setPageContent(content);</div><div class="line">                        zbgg.setPageAttachments(&quot;&quot;);//附件url，暂不需要</div><div class="line">                        zbgg.setCreateTime(new Date());</div><div class="line">                        session.save(zbgg);</div><div class="line">                     &#125;else if(date&lt;=2013)&#123;break flag;&#125;//到2013年的页码时，断掉循环</div><div class="line">                    if(KK%1==0)&#123;</div><div class="line">                        session.flush();  </div><div class="line">                        session.clear();</div><div class="line">                        session.getTransaction().commit();</div><div class="line">                        session.beginTransaction();</div><div class="line">                    &#125;</div><div class="line">                &#125;  </div><div class="line">            &#125;   </div><div class="line"></div><div class="line">            </div><div class="line">        session.getTransaction().commit();</div><div class="line">        session.close();</div><div class="line">        System.out.println(&quot;000000000&quot;);</div><div class="line">        </div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            System.out.println(sourceNo+&quot;接口出错，请检查&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="80-入库代码开头要注解清晰"><a href="#80-入库代码开头要注解清晰" class="headerlink" title="80.入库代码开头要注解清晰"></a>80.入库代码开头要注解清晰</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * @程序猿：刘淑玮</div><div class="line"> * </div><div class="line"> * @内容：东软一期-政府采购-公告变更-03152</div><div class="line"> */</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="81-URL地址栏-开启代理后"><a href="#81-URL地址栏-开启代理后" class="headerlink" title="81.URL地址栏,开启代理后"></a>81.URL地址栏,开启代理后</h2><p>补齐链接地址，要补上项目名[不补也可以使用]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">String url=getNewPathPrefix()+&quot;/bnuser_3(4)/?&quot;+</div><div class="line">         getAdditionalLinkParamStr()+</div><div class="line">                  &quot;&amp;iw-cmd=03160SXDetail&amp;code=&quot;+code;</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="82-Detail页里面有音频"><a href="#82-Detail页里面有音频" class="headerlink" title="82.Detail页里面有音频"></a>82.Detail页里面有音频</h2><p>音频不用抓，抓附件就行</p>
<p>案例<br><code>http://www.ptq.sh.gov.cn/gb/n6132/n6134/n6142/n6638/n6651/u1ai153785.html</code></p>
<hr>
<p><br><br></p>
<h2 id="83-URL转码，List和Detail页面内容编码特殊"><a href="#83-URL转码，List和Detail页面内容编码特殊" class="headerlink" title="83.URL转码，List和Detail页面内容编码特殊"></a>83.URL转码，List和Detail页面内容编码特殊</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">     * 解析str = &quot;%u817E%u8BAF%u79FB%u52A8%u4E92%u8054%u7F51&quot;;</div><div class="line">     * </div><div class="line">     * @param unicode</div><div class="line">     * </div><div class="line">     * @author DJ</div><div class="line">     * </div><div class="line">     * @return contents</div><div class="line">     */</div><div class="line"></div><div class="line">    public String unicodeString(String unicode)&#123;</div><div class="line">          </div><div class="line">         StringBuilder contents = new StringBuilder() ;</div><div class="line">         </div><div class="line">         String[] hex = unicode.split(&quot;%u&quot;);</div><div class="line">      </div><div class="line">         for (int i = 1; i &lt; hex.length; i++) &#123;</div><div class="line">             </div><div class="line">             hex[i] = hex[i].substring(0, 4);</div><div class="line"></div><div class="line">             int data = Integer.parseInt(hex[i], 16);</div><div class="line"></div><div class="line">             if(unicode.indexOf(&quot;%u&quot;)!=0)&#123;</div><div class="line">                 contents = contents.append(unicode.substring(0,unicode.indexOf(&quot;%u&quot;))+(char)data);</div><div class="line">                 unicode = unicode.substring(unicode.indexOf(&quot;%u&quot;)+6);</div><div class="line">             &#125;else&#123;</div><div class="line">                 unicode = unicode.substring(6);</div><div class="line">                 contents = contents.append((char)data);</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line">         contents = contents.append(unicode);</div><div class="line">         return contents.toString();</div><div class="line">     &#125;</div><div class="line"></div><div class="line">public String urlcodeString(String urlcode)&#123;</div><div class="line">          </div><div class="line">         StringBuilder contents = new StringBuilder() ;</div><div class="line">         </div><div class="line">         String[] hex = urlcode.split(&quot;%&quot;);</div><div class="line">      </div><div class="line">         for (int i = 1; i &lt; hex.length; i++) &#123;</div><div class="line">             </div><div class="line">             hex[i] = hex[i].substring(0, 2);</div><div class="line"></div><div class="line">             String data = URLDecoder.decode(&quot;%&quot;+hex[i]);</div><div class="line"></div><div class="line">             if(urlcode.indexOf(&quot;%&quot;)!=0)&#123;</div><div class="line">                 contents = contents.append(urlcode.substring(0,urlcode.indexOf(&quot;%&quot;))+data);</div><div class="line">                 urlcode = urlcode.substring(urlcode.indexOf(&quot;%&quot;)+3);</div><div class="line">             &#125;else&#123;</div><div class="line">                 urlcode = urlcode.substring(3);</div><div class="line">                 contents = contents.append(data);</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line">         contents = contents.append(urlcode);</div><div class="line">         return contents.toString();</div><div class="line">     &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="84-List页面抓包下来全是字符串-并且是83的乱码"><a href="#84-List页面抓包下来全是字符串-并且是83的乱码" class="headerlink" title="84.List页面抓包下来全是字符串[并且是83的乱码]"></a>84.List页面抓包下来全是字符串[并且是83的乱码]</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">//判断当前页面有多少条List</div><div class="line">        String allContent=originTxtRspContent;</div><div class="line">        int listCount=0;            //统计匹配字符的数量</div><div class="line">        int location=-1;        //记录字符位置(变化) </div><div class="line">        boolean sign=true;</div><div class="line">        while(sign)&#123;</div><div class="line">            location =allContent.indexOf(&quot;datestr&quot;);</div><div class="line">            if(location!=-1)&#123;</div><div class="line">                listCount++;</div><div class="line">                allContent=allContent.substring(location+7);</div><div class="line">            &#125;else&#123;</div><div class="line">                sign=false;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">//获得当前页面所有标题</div><div class="line">        String allList=originTxtRspContent;   //页面所有内容</div><div class="line">        String title=&quot;&quot;;                      //储存标题内容</div><div class="line">        int title_Location=-1;                //标题位置</div><div class="line">        String [] arrayTitle=new String[listCount];</div><div class="line">        for(int i=0;i&lt;arrayTitle.length;i++)&#123;</div><div class="line">            title_Location=allList.indexOf(&quot;Title&quot;)+10;</div><div class="line">            </div><div class="line">            allList=allList.substring(title_Location);</div><div class="line">            String title_font=allList.substring(0,allList.indexOf(&quot;%&quot;));</div><div class="line">            title=allList.substring(allList.indexOf(&quot;%&quot;),allList.indexOf(&quot;,&quot;)-2);</div><div class="line">            //转码，将URL编码格式转成中文(解码)</div><div class="line">            title=this.unicodeString(title);</div><div class="line">            arrayTitle[i]=title_font+title;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="85-Combine增加参数-另一种-健俊"><a href="#85-Combine增加参数-另一种-健俊" class="headerlink" title="85.Combine增加参数,另一种(健俊)"></a>85.Combine增加参数,另一种(健俊)</h2><p>Combine是不用配置正则的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">api.xml里加在下面[conten里面]</div><div class="line">&lt;request-uri-replacement-pattern&gt;&lt;/request-uri-replacement-pattern&gt;</div><div class="line">    &lt;request-content&gt;</div><div class="line">      &lt;param&gt;</div><div class="line">        &lt;name&gt;iw_ir_3&lt;/name&gt;</div><div class="line">        &lt;value&gt;zbgglist&lt;value&gt;</div><div class="line">      &lt;/param&gt;</div><div class="line">      &lt;param&gt; </div><div class="line"></div><div class="line"></div><div class="line">然后Combine里用</div><div class="line">String iw_ir_3=iwRequest.getRequestContentParam(&quot;iw_ir_3&quot;).trim(); 这样拿</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="86-iw-ir-2的理解-健俊"><a href="#86-iw-ir-2的理解-健俊" class="headerlink" title="86.iw_ir_2的理解(健俊)"></a>86.iw_ir_2的理解(健俊)</h2><p>2是指在<em>第2个括号里，</em>号代表变化的东西<br><code>&lt;![CDATA[(qztb)(.*)(.aspx)]]&gt;</code></p>
<p>3就是指<em>在第3个括号里，iw_ir_3=，举例<br>`&lt;![CDATA[(qztb)(b/)(.</em>)(.aspx)]]&gt;`</p>
<hr>
<p><br><br></p>
<h2 id="87-计数判断，选出符合条件的某个Element"><a href="#87-计数判断，选出符合条件的某个Element" class="headerlink" title="87.计数判断，选出符合条件的某个Element"></a>87.计数判断，选出符合条件的某个Element</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">int count=0;</div><div class="line">   if(&quot;100%&quot;.equals(table_eleA.getAttribute(&quot;width&quot;)))&#123;</div><div class="line">       //计数</div><div class="line">        if(++count!=2) continue;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="88-在Combine拼接跳转List的URL，因为多了参数，导致无法跳页-加远"><a href="#88-在Combine拼接跳转List的URL，因为多了参数，导致无法跳页-加远" class="headerlink" title="88.在Combine拼接跳转List的URL，因为多了参数，导致无法跳页(加远)"></a>88.在Combine拼接跳转List的URL，因为多了参数，导致无法跳页(加远)</h2><p>分析网页，测试哪个参数是多余的</p>
<p>举例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">api.xml文档里</div><div class="line"> &lt;param&gt;</div><div class="line">        &lt;name&gt;__EVENTTARGET&lt;/name&gt;</div><div class="line">        &lt;value&gt;ctl00$ContentPlaceHolder1$MoreGctypeInfolist1$Pager&lt;/value&gt;</div><div class="line"> &lt;/param&gt;</div><div class="line"></div><div class="line">            String jxCombine=getNewPathPrefix()+&quot;/?&quot;+getAdditionalLinkParamStr()+&quot;&amp;iw-cmd=03169SHList&quot;</div><div class="line">                    +&quot;&amp;__CSRFTOKEN=&quot;+__CSRFTOKEN</div><div class="line">                    +&quot;&amp;__VIEWSTATE=&quot;+__VIEWSTATE</div><div class="line">//                    +&quot;&amp;__EVENTTARGET=&quot;+__EVENTTARGET                                   //这个参数经过测试不需要，会导致无法跳页</div><div class="line">                     +&quot;&amp;__EVENTVALIDATION=&quot;+__EVENTVALIDATION</div><div class="line">                    +&quot;&amp;ctl00$ContentPlaceHolder1$MoreGctypeInfolist1$Pager_input=&quot;+EVENTARGUMENT</div><div class="line">                    +&quot;&amp;ctl00$ContentPlaceHolder1$MoreGctypeInfolist1$ddlGctype=&quot;+gctype  //类型</div><div class="line">                    +&quot;&amp;categoryNum=&quot;+categoryNum</div><div class="line">                    +&quot;&amp;deptCode=001&quot;</div><div class="line">                    +&quot;&amp;gctype=&quot;+gctype</div><div class="line">                    +&quot;&amp;__EVENTARGUMENT=&quot;+EVENTARGUMENT;</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="89-设置执行SQL命名后，查询界面显示的记录数"><a href="#89-设置执行SQL命名后，查询界面显示的记录数" class="headerlink" title="89.设置执行SQL命名后，查询界面显示的记录数"></a>89.设置执行SQL命名后，查询界面显示的记录数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">工具 -&gt;   首选项  -&gt;    窗口类型    -&gt;  SQL窗口    -&gt;每页记录数</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="90-Eclipse设置不限制控制台输出"><a href="#90-Eclipse设置不限制控制台输出" class="headerlink" title="90.Eclipse设置不限制控制台输出"></a>90.Eclipse设置不限制控制台输出</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Eclipse上方菜单栏------&gt;Windows------&gt;Run/Debug-----&gt;Console</div><div class="line">-----&gt;Limit console output</div><div class="line"></div><div class="line">设置控制台输出，取消打勾就是不限制</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="91-在Eclipse中点代码-包资源管理器自动跳动到该文件"><a href="#91-在Eclipse中点代码-包资源管理器自动跳动到该文件" class="headerlink" title="91.在Eclipse中点代码,包资源管理器自动跳动到该文件"></a>91.在Eclipse中点代码,包资源管理器自动跳动到该文件</h2><p>点击：左右箭头的图标[与编辑器连接]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">--&gt;</div><div class="line">&lt;--</div></pre></td></tr></table></figure></p>
<p>适用场景：<br>抓玩包之后搜索API[Ctril+8],然后点击搜索到的文件，编辑器显示文件内容，<br>点击按钮(Link with Editor)，再点击编辑器，左边的项目管理器会自动搜索文件所在的目录。</p>
<hr>
<p><br><br></p>
<h2 id="92-List里添加URL跳转到Detail页面"><a href="#92-List里添加URL跳转到Detail页面" class="headerlink" title="92.List里添加URL跳转到Detail页面"></a>92.List里添加URL跳转到Detail页面</h2><p>适用情况:<br>List里抓取id的链接包含了，跳类型的参数,如果不包含则不建议做URL，<br>因为跳类型的判断较为复杂，不简洁<br>例如<br><code>href=&quot;http://www.jjx.gov.cn/html/nn/nn1/nn1_2/53144.html&quot;</code></p>
<p>扩展：<br>可使用URL入库</p>
<hr>
<p><br><br></p>
<h2 id="93-招标中标的信息在网站同一个页面，不同模块"><a href="#93-招标中标的信息在网站同一个页面，不同模块" class="headerlink" title="93.招标中标的信息在网站同一个页面，不同模块"></a>93.招标中标的信息在网站同一个页面，不同模块</h2><p>招标中标的在同一页面，通过javascrip来切换，<br>抓招标的List和Detail，然后多复制一份作为中标的映射</p>
<p>举例<br><code>http://www.lushan.cn/ljzwxx/cgjy/zfcg/</code></p>
<hr>
<p><br><br></p>
<h2 id="94-终极暴力Detail抓date-健俊"><a href="#94-终极暴力Detail抓date-健俊" class="headerlink" title="94.终极暴力Detail抓date(健俊)"></a>94.终极暴力Detail抓date(健俊)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">String date=&quot;&quot;;</div><div class="line">                NodeList td_list=xmlDoc.getElementsByTagName(&quot;td&quot;);</div><div class="line">                for(int i=0;i&lt;td_list.getLength();i++)&#123;</div><div class="line">                    Element td_ele=(Element)td_list.item(i);</div><div class="line">                    if(&quot;700&quot;.equals(td_ele.getAttribute(&quot;height&quot;)))&#123;</div><div class="line">                        String test=td_ele.getTextContent().trim();</div><div class="line">                        test=test.replace(&quot; &quot;, &quot;&quot;);</div><div class="line">                        String a=test.substring(test.indexOf(&quot;时间：&quot;)+3, test.indexOf(&quot;时间：&quot;)+12).trim();</div><div class="line">                        if(a.indexOf(&quot;2&quot;)==-1) continue;</div><div class="line">                        date=a.replace(&quot;.&quot;, &quot;-&quot;).replace(&quot;年&quot;, &quot;-&quot;).replace(&quot;月&quot;, &quot;-&quot;).replace(&quot;日&quot;, &quot;-&quot;);                     </div><div class="line">                    &#125;</div><div class="line">                    if(&quot;500&quot;.equals(td_ele.getAttribute(&quot;height&quot;)))&#123;</div><div class="line">                        String content=Utils.getNodeHtml(td_ele).trim();</div><div class="line">                        response.content=content;</div><div class="line">                        if(date.length()&lt;4)&#123;</div><div class="line">                            String txt=td_ele.getTextContent();</div><div class="line">                            txt=txt.replaceAll(&quot; &quot;, &quot;&quot;).replaceAll(&quot; &quot;, &quot;&quot;).trim();</div><div class="line">                            String year=txt.substring(txt.lastIndexOf(&quot;年&quot;)-4, txt.lastIndexOf(&quot;年&quot;));</div><div class="line">                            String month=txt.substring(txt.lastIndexOf(&quot;年&quot;)+1, txt.lastIndexOf(&quot;月&quot;));</div><div class="line">                            String day=txt.substring(txt.lastIndexOf(&quot;月&quot;)+1, txt.lastIndexOf(&quot;日&quot;));</div><div class="line">                            date=year+&quot;-&quot;+month+&quot;-&quot;+day;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); </div><div class="line">                Date date1=format.parse(date);</div><div class="line">                date=format.format(date1);</div><div class="line">                response.date=date;</div><div class="line">                System.out.println(response.content+&quot;\n&quot;+response.date);</div><div class="line"></div><div class="line">终极暴力Detail抓时间</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="95-启动reactor后，报错”创建临时文件夹失败”"><a href="#95-启动reactor后，报错”创建临时文件夹失败”" class="headerlink" title="95.启动reactor后，报错”创建临时文件夹失败”"></a>95.启动reactor后，报错”创建临时文件夹失败”</h2><p>导致：<br>通过谷歌浏览器访问时候，一直报错 “the specified iw-cmd is invalid”</p>
<p>原因：<br>工程项目根目录下，缺少了thirdPartyLibs目录</p>
<p>解决方案：<br>从别的工程项目里复制过去</p>
<hr>
<p><br><br></p>
<h2 id="96-URL中文编码问题–URL里面包含中文，只有特定格式才能跳入网站"><a href="#96-URL中文编码问题–URL里面包含中文，只有特定格式才能跳入网站" class="headerlink" title="96.URL中文编码问题–URL里面包含中文，只有特定格式才能跳入网站"></a>96.URL中文编码问题–URL里面包含中文，只有特定格式才能跳入网站</h2><p>将api.xml文档里的乱码部分改为相应中文，并且设置编码格式为GB2312【如果不行就设置为GBK试试】</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"> &lt;param&gt;</div><div class="line">        &lt;name&gt;tid&lt;/name&gt;</div><div class="line">     &lt;value&gt;政府采购&lt;/value&gt;</div><div class="line">&lt;/param&gt;</div><div class="line"> &lt;request-content-type&gt;application/x-www-form-urlencoded&lt;/request-content-type&gt;</div><div class="line">    &lt;request-content-charset&gt;GBK&lt;/request-content-charset&gt;</div><div class="line">      &lt;rsp-content-decoding-charset&gt;GBK&lt;/rsp-content-decoding-charset&gt;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="97-查询数据库相关语句扩展"><a href="#97-查询数据库相关语句扩展" class="headerlink" title="97.查询数据库相关语句扩展"></a>97.查询数据库相关语句扩展</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">1、查看当前用户拥有的角色权限信息：select * from role_sys_privs;</div><div class="line">2、查看当前用户的详细信息：select * from user_users;</div><div class="line">3、查看当前用户的角色信息：select * from user_role_privs;</div><div class="line"></div><div class="line">1、查看所有表空间及表空间大小：</div><div class="line">　　select tablespace_name ,sum(bytes) / 1024 / 1024 as MB　from dba_data_files group by tablespace_name;</div><div class="line">2、查看所有表空间对应的数据文件：</div><div class="line">　　select tablespace_name,file_name from dba_data_files;</div><div class="line">3、修改数据文件大小：</div><div class="line">　　alter database datafile &apos;H:\ORACLE\PRODUCT\10.1.0\ORADATA\ORACLE\USERS01.DBF&apos; RESIZE 10240M;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="98-List页面是特殊格式，用字符串进行截取"><a href="#98-List页面是特殊格式，用字符串进行截取" class="headerlink" title="98. List页面是特殊格式，用字符串进行截取"></a>98. List页面是特殊格式，用字符串进行截取</h2><p>案例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&quot;success&quot;:true,&quot;totalRows&quot;:704,&quot;data&quot;:[&#123;&quot;Id&quot;:&quot;1-4028819056737d6601567390cc2b0028&quot;,&quot;XH&quot;:1,&quot;Provider&quot;:&quot;Zfcg&quot;,&quot;State&quot;:&quot;4028819056737d6601567390cc2b0028&quot;,&quot;Date&quot;:&quot;\/Date(1470817372000)\/&quot;,&quot;Title&quot;:&quot;曲阜市政府采购办公设备（二次）采购询价公告（QFCG2016-176）&quot;,&quot;Code&quot;:&quot;QFCG2016-176&quot;,&quot;XmStateMc&quot;:null&#125;,&#123;&quot;Id&quot;:&quot;1-4028819056737d66015673803503000b&quot;,&quot;XH&quot;:2,&quot;Provider&quot;:&quot;Zfcg&quot;,&quot;State&quot;:&quot;4028819056737d66015673803503000b&quot;,&quot;Date&quot;:&quot;\/Date(1470816587000)\/&quot;,&quot;Title&quot;:&quot;曲阜市石门山镇农村无害化卫生厕所改造采购项目招标公告&quot;,&quot;Code&quot;:&quot;QFCG2016-167&quot;,&quot;XmStateMc&quot;:null&#125;,&#123;&quot;Id&quot;:&quot;1-402881905668233d0156725cf02e0dfc&quot;,&quot;XH&quot;:3,&quot;Provider&quot;:&quot;Zfcg&quot;,&quot;State&quot;:&quot;402881905668233d0156725cf02e0dfc&quot;,&quot;Date&quot;:&quot;\/Date(1470797597000)\/&quot;,&quot;Title&quot;:&quot;曲阜市人民检察屋面防水采购项目竞争性谈判公告（二次）&quot;,&quot;Code&quot;:&quot;QFCG2016-175&quot;,&quot;XmStateMc&quot;:null&#125;,&#123;&quot;Id&quot;:&quot;1-402881905668233d01566e9b2cff0a45&quot;,&quot;XH&quot;:4,&quot;Provider&quot;:&quot;Zfcg&quot;,&quot;State&quot;:&quot;402881905668233d01566e9b2cff0a45&quot;,&quot;Date&quot;:&quot;\/Date(1470734496000)\/&quot;,&quot;Title&quot;:&quot;关于《世界文化遗产-曲阜孔庙、孔林及孔府动态信息及监测预警系统》方案设计项目的变更公</div></pre></td></tr></table></figure></p>
<p><br></p>
<p>完整版代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div></pre></td><td class="code"><pre><div class="line">package SD03364;</div><div class="line">import java.net.URL;</div><div class="line">import java.net.URLConnection;</div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">import org.apache.commons.io.IOUtils;</div><div class="line">import org.w3c.dom.Document;</div><div class="line">import org.w3c.dom.Element;</div><div class="line">import org.w3c.dom.NodeList;</div><div class="line"></div><div class="line">import SD03363.ZBList.BranchNew;</div><div class="line"></div><div class="line">import cn.internetware.phone.extension.response.RspState;</div><div class="line">import cn.internetware.phone.extension.response.TxtRspObject;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtBaseResponse;</div><div class="line">import cn.internetware.phone.extension.response.impl.TxtRspHandler;</div><div class="line">import cn.internetware.utils.IO;</div><div class="line">import cn.internetware.utils.Utils;</div><div class="line"></div><div class="line"></div><div class="line">public class ZBList extends TxtRspHandler &#123;</div><div class="line"></div><div class="line">    public class Response extends TxtBaseResponse &#123;</div><div class="line">        List&lt;BranchNew&gt; list = new ArrayList&lt;BranchNew&gt;();</div><div class="line">        String pageCount;</div><div class="line">        //String currentPage;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public class BranchNew &#123;</div><div class="line">        String title;</div><div class="line">        String id;</div><div class="line">        String url;</div><div class="line"></div><div class="line">        public String toString() &#123;</div><div class="line">            return &quot;BranchNew[ title=&quot; + title+&quot;;id=&quot; + id +&quot;;url=&quot;+url;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected RspState checkTxtRspContentState(String originTxtRspContent) &#123;</div><div class="line">        return RspState.Login;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected TxtRspObject processTxtRspContent(RspState rspState,</div><div class="line">            String originTxtRspContent) &#123;</div><div class="line">        Response response = new Response();</div><div class="line">        if (rspState == RspState.Login) &#123;</div><div class="line">            try &#123;</div><div class="line">//              System.out.println(originTxtRspContent);</div><div class="line">                Document xmlDoc=Utils.getDocByContent(originTxtRspContent);</div><div class="line">                </div><div class="line">                //获取title，id，url</div><div class="line">                </div><div class="line">                //判断当前页面有多少条List</div><div class="line">                String allContent=originTxtRspContent;</div><div class="line">                int listCount=0;            //统计匹配字符的数量</div><div class="line">                int location=-1;        //记录字符位置(变化) </div><div class="line">                boolean sign=true;</div><div class="line">                while(sign)&#123;</div><div class="line">                    location =allContent.indexOf(&quot;Title&quot;);</div><div class="line">                    if(location!=-1)&#123;</div><div class="line">                        listCount++;</div><div class="line">                        allContent=allContent.substring(location+5);</div><div class="line">                    &#125;else&#123;</div><div class="line">                        sign=false;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                //获取标题</div><div class="line">                String allList=originTxtRspContent;   //页面所有内容</div><div class="line">                String title=&quot;&quot;;                      //储存标题内容</div><div class="line">                int title_Location=-1;                //标题位置</div><div class="line">                String [] arrayTitle=new String[listCount];</div><div class="line">                for(int i=0;i&lt;arrayTitle.length;i++)&#123;</div><div class="line">                    title_Location=allList.indexOf(&quot;Title&quot;)+8;</div><div class="line">                    </div><div class="line">                    allList=allList.substring(title_Location);</div><div class="line">                    title=allList.substring(0,allList.indexOf(&quot;,&quot;)-1);</div><div class="line">                    </div><div class="line">                    arrayTitle[i]=title;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">              //获取XmId</div><div class="line">                String allXmId=originTxtRspContent;   //页面所有内容</div><div class="line">                String XmId=&quot;&quot;; </div><div class="line">                String State=&quot;&quot;;   </div><div class="line">                int XmId_Location=-1;                //标题位置</div><div class="line">                String [] arrayXmId=new String[listCount];</div><div class="line">                for(int i=0;i&lt;arrayXmId.length;i++)&#123;</div><div class="line">                    XmId_Location=allXmId.indexOf(&quot;Id&quot;)+5;</div><div class="line">                    </div><div class="line">                    allXmId=allXmId.substring(XmId_Location);</div><div class="line">                    XmId=allXmId.substring(0,allXmId.indexOf(&quot;,&quot;)-1);</div><div class="line">                    State=XmId.substring(XmId.indexOf(&quot;-&quot;)+1);</div><div class="line">                    arrayXmId[i]=XmId+&quot;&amp;State=&quot;+State+&quot;&amp;Provider=Zfcg&quot;;       </div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                //URL补全地址</div><div class="line">               String URL=getNewPathPrefix()+&quot;/bnuser_3/?&quot;+getAdditionalLinkParamStr()+&quot;&amp;iw-cmd=03364SDDetail&amp;XmId=&quot;;</div><div class="line">               </div><div class="line">               //创建对象,保存公告</div><div class="line">                for(int i=0;i&lt;listCount;i++)&#123;</div><div class="line">                    BranchNew branchNew=new BranchNew();        </div><div class="line">                    branchNew.title=arrayTitle[i];      </div><div class="line">                    branchNew.id=arrayXmId[i];</div><div class="line">                    branchNew.url=URL+arrayXmId[i];</div><div class="line">                    response.list.add(branchNew);</div><div class="line">            </div><div class="line">                    System.out.println(branchNew.toString());</div><div class="line">                &#125;</div><div class="line">              </div><div class="line"></div><div class="line">                //获取总页数</div><div class="line">                String pageCount=originTxtRspContent.substring(originTxtRspContent.indexOf(&quot;totalRows&quot;));</div><div class="line">                int allRecord=Integer.parseInt(pageCount.substring(pageCount.indexOf(&quot;:&quot;)+1,pageCount.indexOf(&quot;,&quot;)));</div><div class="line">                if(allRecord%20==0)</div><div class="line">                    pageCount=String.valueOf(allRecord/20);</div><div class="line">                else</div><div class="line">                    pageCount=String.valueOf(allRecord/20+1);</div><div class="line">               </div><div class="line">                response.pageCount=pageCount;</div><div class="line">                </div><div class="line"></div><div class="line">                if(response.pageCount==null)&#123;</div><div class="line">                    response.pageCount=&quot;1&quot;;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                System.out.println(response.pageCount);</div><div class="line">            &#125;catch (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return response;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    final static int TIMEOUT_IN_MS = 100000;</div><div class="line"></div><div class="line">    private static String callApi(String path) &#123;</div><div class="line">        String result = &quot;&quot;;</div><div class="line">        byte[] retBytes = new byte[0];</div><div class="line">        try &#123;</div><div class="line">            URLConnection conn = new URL(path).openConnection();</div><div class="line">            conn.setConnectTimeout(TIMEOUT_IN_MS);</div><div class="line">            conn.setReadTimeout(TIMEOUT_IN_MS);</div><div class="line">            retBytes = IOUtils.toByteArray(conn);</div><div class="line">            result = new String(retBytes, &quot;UTF-8&quot;);</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        ZBList handler = new ZBList();</div><div class="line"></div><div class="line">        try &#123;</div><div class="line">            String originRspContent = IO</div><div class="line">                    .deserializeString(&quot;internetware/bnuser3_3/apis/03364-6339d2309bfcd74420871de692ff3cec6a-SDList/SampleResponse_1&quot;,&quot;UTF-8&quot;);</div><div class="line">            handler.processRspContent(</div><div class="line">                    handler.checkTxtRspContentState(originRspContent),</div><div class="line">                    originRspContent);</div><div class="line"></div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="99-List和Detail无法拿到日期，入库里使用new-Date-健俊"><a href="#99-List和Detail无法拿到日期，入库里使用new-Date-健俊" class="headerlink" title="99.List和Detail无法拿到日期，入库里使用new Date() [健俊]"></a>99.List和Detail无法拿到日期，入库里使用new Date() [健俊]</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">一句话new Date</div><div class="line">String getDate=new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(new Date()); </div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> ListVO_4 listvo =(ListVO_4) it.next();</div><div class="line"> query=session.createSQLQuery(&quot;SELECT ID FROM t_zhong_biao_xin_xi t where t.WEB_SOURCE_NO=&apos;&quot;+sourceNo+&quot;&apos; and t.RECORD_ID=&apos;&quot;+listvo.getId()+&quot;&apos;&quot;);</div><div class="line">                    String getDate=new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(new Date());                    ----放在这里</div><div class="line"> //获取页数，便于插入数据异常时，先跳过该页</div><div class="line"> System.out.println(i+&quot;:&quot;+getDate+&quot;:&quot;+maxPage);</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="100-将时Unix时间戳转换为yyyy-MM-dd格式的日期"><a href="#100-将时Unix时间戳转换为yyyy-MM-dd格式的日期" class="headerlink" title="100.将时Unix时间戳转换为yyyy-MM-dd格式的日期"></a>100.将时Unix时间戳转换为yyyy-MM-dd格式的日期</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">   public static String timeStamp2Date(String seconds,String format) &#123;  </div><div class="line">            if(seconds == null || seconds.isEmpty() || seconds.equals(&quot;null&quot;))&#123;  </div><div class="line">                return &quot;&quot;;  </div><div class="line">            &#125;  </div><div class="line">            if(format == null || format.isEmpty()) format = &quot;yyyy-MM-dd HH:mm:ss&quot;;  </div><div class="line">            SimpleDateFormat sdf = new SimpleDateFormat(format);  </div><div class="line">            return sdf.format(new Date(Long.valueOf(seconds+&quot;&quot;)));  </div><div class="line">        &#125;  </div><div class="line">        /** </div><div class="line">         * 日期格式字符串转换成时间戳 </div><div class="line">         * @param date 字符串日期 </div><div class="line">         * @param format 如：yyyy-MM-dd HH:mm:ss </div><div class="line">         * @return </div><div class="line">         */  </div><div class="line">        public static String date2TimeStamp(String date_str,String format)&#123;  </div><div class="line">            try &#123;  </div><div class="line">                SimpleDateFormat sdf = new SimpleDateFormat(format);  </div><div class="line">                return String.valueOf(sdf.parse(date_str).getTime()/1000);  </div><div class="line">            &#125; catch (Exception e) &#123;  </div><div class="line">                e.printStackTrace();  </div><div class="line">            &#125;  </div><div class="line">            return &quot;&quot;;  </div><div class="line">        &#125;  </div><div class="line">          </div><div class="line">        /** </div><div class="line">         * 取得当前时间戳（精确到秒） </div><div class="line">         * @return </div><div class="line">         */  </div><div class="line">        public static String timeStamp()&#123;  </div><div class="line">            long time = System.currentTimeMillis();  </div><div class="line">            String t = String.valueOf(time/1000);  </div><div class="line">            return t;  </div><div class="line">        &#125;  </div><div class="line">    </div><div class="line"></div><div class="line"></div><div class="line">调用</div><div class="line">//获取date</div><div class="line">                String allDate=originTxtRspContent;   //页面所有内容</div><div class="line">                String Date=&quot;&quot;; </div><div class="line">                int Date_Location=-1;                //标题位置</div><div class="line">                String [] arrayDate=new String[listCount];</div><div class="line">                for(int i=0;i&lt;arrayDate.length;i++)&#123;</div><div class="line">                    Date_Location=allDate.indexOf(&quot;/Date&quot;)+5;</div><div class="line">                    </div><div class="line">                    allDate=allDate.substring(Date_Location);</div><div class="line">                    Date=allDate.substring(allDate.indexOf(&quot;(&quot;)+1,allDate.indexOf(&quot;)&quot;));</div><div class="line">                    Date = timeStamp2Date(Date, &quot;yyyy-MM-dd HH:mm:ss&quot;);  </div><div class="line">                    Date=Date.substring(0,10);</div><div class="line"> </div><div class="line">                    arrayDate[i]=Date;    </div><div class="line">                &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>
<h2 id="101-谷歌浏览器的版本和燕云dds兼容问题"><a href="#101-谷歌浏览器的版本和燕云dds兼容问题" class="headerlink" title="101.谷歌浏览器的版本和燕云dds兼容问题"></a>101.谷歌浏览器的版本和燕云dds兼容问题</h2><p>问题描述：<br>    点击Plant不弹出谷歌浏览器+有弹出但是页面一片空白+点击“启动Plant”(按钮仍然显示一直启动)</p>
<p>经过测试一下版本合适：</p>
<ul>
<li>52.0.2743.116m</li>
<li>52.0.2743.116(64-bit)</li>
<li>53.0.2785.116 m</li>
</ul>
<p>以下版本不合适</p>
<ul>
<li>54.0.2840.59 m</li>
</ul>
<p>最好将谷歌浏览器的自动更新关闭<br>控制面板—-》管理工具——》服务<br>Google 更新服务(gupdate) —-设置为禁用<br>Google 更新服务(gupdatem) —-设置为禁用</p>
<hr>
<p><br><br></p>
<h2 id="102-燕云dds的eclise无法无法抓包and开启代理"><a href="#102-燕云dds的eclise无法无法抓包and开启代理" class="headerlink" title="102.燕云dds的eclise无法无法抓包and开启代理"></a>102.燕云dds的eclise无法无法抓包and开启代理</h2><p>报错描述:<br>&emsp;点击<code>启动Plant</code>,程序自动结束,谷歌浏览器闪退或者空白页,报错<code>The license is invalid or expired!</code><br>&emsp;点击<code>启动Reactor</code>,程序自动结束,谷歌浏览器没反应报错<code>The licens is invalid or expired!</code></p>
<p>原因：<br>&emsp;证书过去【软件过期】,</p>
<p>解决方案:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">工具问题</div><div class="line"></div><div class="line">替换</div><div class="line">    eclipse-jee-juno-win32-x86_64\eclipse\configuration\org.eclipse.osgi\bundles\907\2\.cp目录下的</div><div class="line">-----------------------------&gt;license.iwc文件</div></pre></td></tr></table></figure></p>
<hr>
<p><br><br></p>
<h2 id="103-JSON格式数据解析【使用GSON】"><a href="#103-JSON格式数据解析【使用GSON】" class="headerlink" title="103.JSON格式数据解析【使用GSON】"></a>103.JSON格式数据解析【使用GSON】</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">//使用google-gson解析JSON数据</div><div class="line">                </div><div class="line">                    //A-创建JSON解析器</div><div class="line">                    JsonParser jsonParser = new JsonParser();</div><div class="line">                    </div><div class="line">                    //B-通过parse方法获取最外层的json对象</div><div class="line">                    JsonObject jsonObject = (JsonObject)jsonParser.parse(originTxtRspContent); </div><div class="line">                    </div><div class="line">                    //C-获取JSON数组</div><div class="line">                    JsonArray jsonArray = jsonObject.get(&quot;rows&quot;).getAsJsonArray(); </div><div class="line">                    </div><div class="line">                    //D-依次遍历JSON数组</div><div class="line">                    for(int i = 0,lenght = jsonArray.size(); i &lt; lenght; i++)&#123;</div><div class="line">                        JsonObject subJsonObject = jsonArray.get(i).getAsJsonObject();              //1.对应数组元素</div><div class="line">                        </div><div class="line">                        BranchNew branchNew = new BranchNew();                                      //2.构建BranchNew对象</div><div class="line">                           branchNew.title = subJsonObject.get(&quot;CONTENTTITLE&quot;).getAsString();</div><div class="line">                           branchNew.date  = subJsonObject.get(&quot;PUBLISHTIME&quot;).getAsString();        </div><div class="line">                           branchNew.id    = subJsonObject.get(&quot;CONTENTID&quot;).getAsString();            </div><div class="line">                           branchNew.url   = getNewPathPrefix()+&quot;/?&quot;+ getAdditionalLinkParamStr()+</div><div class="line">                                             &quot;&amp;iw-cmd=03658DSDetailCombine&amp;id=&quot;  +   </div><div class="line">                                              subJsonObject.get(&quot;CONTENTID&quot;).getAsString();</div><div class="line">                           </div><div class="line">                        response.list.add(branchNew);                                               //3.将BranchNew对象添加进Response</div><div class="line">//                      System.out.println(branchNew.toString());                                   //4.测试输出</div><div class="line">                    &#125;</div></pre></td></tr></table></figure>
<hr>
<p><br><br></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/WorkProject/" rel="tag"># WorkProject</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/08/13/WorkProject_燕云DaaS_API工作流程整理/" rel="next" title="WorkProject_燕云DaaS_API工作流程整理">
                <i class="fa fa-chevron-left"></i> WorkProject_燕云DaaS_API工作流程整理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/08/17/WorkProject_LDPC模版/" rel="prev" title="燕云DDS_LDPC模版">
                燕云DDS_LDPC模版 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/suvan.png"
               alt="liushuwei" />
          <p class="site-author-name" itemprop="name">liushuwei</p>
           
              <p class="site-description motion-element" itemprop="description">Suvan的博客</p>
          
        </div>
        <nav class="site-state motion-element">
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">59</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">31</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">31</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Suvan-L" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="liushuwei0925@gmail.com" target="_blank" title="Gmail">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Gmail
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="526097449" target="_blank" title="QQ">
                  
                    <i class="fa fa-fw fa-qq"></i>
                  
                  QQ
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一-目录"><span class="nav-number">1.</span> <span class="nav-text">一.目录</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二-错误"><span class="nav-number">2.</span> <span class="nav-text">二.错误</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-无法启动虚拟桌面"><span class="nav-number">2.1.</span> <span class="nav-text">1.无法启动虚拟桌面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-导入燕云工程项目，新建API仓库的时候，提示重名"><span class="nav-number">2.2.</span> <span class="nav-text">2.导入燕云工程项目，新建API仓库的时候，提示重名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-判断Detail是否有附件"><span class="nav-number">2.3.</span> <span class="nav-text">3.判断Detail是否有附件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-判断Detail的附件链接需要补齐"><span class="nav-number">2.4.</span> <span class="nav-text">4.判断Detail的附件链接需要补齐</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-reactor-代理-启动失败"><span class="nav-number">2.5.</span> <span class="nav-text">5.reactor(代理)启动失败</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-List和Detail配置相对路径边和编码格式"><span class="nav-number">2.6.</span> <span class="nav-text">6.List和Detail配置相对路径边和编码格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-谷歌浏览器显示数据，无法跳页"><span class="nav-number">2.7.</span> <span class="nav-text">7.谷歌浏览器显示数据，无法跳页</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-Utils-getNodeHtml-Element-获取内容缺失"><span class="nav-number">2.8.</span> <span class="nav-text">8.Utils.getNodeHtml(Element)获取内容缺失</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-启动代理后，谷歌浏览器显示页面内容重复"><span class="nav-number">2.9.</span> <span class="nav-text">9.启动代理后，谷歌浏览器显示页面内容重复</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-script-gt-标签也可以抓取"><span class="nav-number">2.10.</span> <span class="nav-text">10.script>标签也可以抓取</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-命名把”-“改为”-”"><span class="nav-number">2.11.</span> <span class="nav-text">11.命名把”-“改为”_”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-项目运行配置可以只配一个testURL"><span class="nav-number">2.12.</span> <span class="nav-text">12.项目运行配置可以只配一个testURL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-Params类里不需要main方法"><span class="nav-number">2.13.</span> <span class="nav-text">13.Params类里不需要main方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-虚拟桌面的Ecplise需要配置jdk"><span class="nav-number">2.14.</span> <span class="nav-text">14.虚拟桌面的Ecplise需要配置jdk</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-如果Detail里的内容是一张图片"><span class="nav-number">2.15.</span> <span class="nav-text">15.如果Detail里的内容是一张图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-List和Detail配置正则表达式-健俊"><span class="nav-number">2.16.</span> <span class="nav-text">16.List和Detail配置正则表达式(健俊)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-本地平台抓包乱码"><span class="nav-number">2.17.</span> <span class="nav-text">17.本地平台抓包乱码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18-启动reacotr-谷歌浏览器显示效果分层"><span class="nav-number">2.18.</span> <span class="nav-text">18.启动reacotr,谷歌浏览器显示效果分层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19-启动reactor之后，弹出窗口无法连接"><span class="nav-number">2.19.</span> <span class="nav-text">19.启动reactor之后，弹出窗口无法连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-谷歌浏览器显示Combine页面，报错”Internal-Server-Error-”-健俊"><span class="nav-number">2.20.</span> <span class="nav-text">20.谷歌浏览器显示Combine页面，报错”Internal Server Error!”(健俊)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-抓取哪些页，哪些需要配正则"><span class="nav-number">2.21.</span> <span class="nav-text">21.抓取哪些页，哪些需要配正则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-启动reactor后，控制台报错空指针异常-陈宇"><span class="nav-number">2.22.</span> <span class="nav-text">22.启动reactor后，控制台报错空指针异常(陈宇)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-抓取的源文件，出现乱码"><span class="nav-number">2.23.</span> <span class="nav-text">23.抓取的源文件，出现乱码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-日期格式不规范，自动补成yyyy-MM-dd"><span class="nav-number">2.24.</span> <span class="nav-text">24.日期格式不规范，自动补成yyyy-MM-dd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-在Combine里增加变量的过程"><span class="nav-number">2.25.</span> <span class="nav-text">25.在Combine里增加变量的过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#26-报错：-“iw-response”-“errorTxt”-the-specified-iw-cmd-is-invalid”"><span class="nav-number">2.26.</span> <span class="nav-text">26.报错：{“iw-response”:{“errorTxt”: the specified iw-cmd is invalid”}}</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#27-记得要测试List-或者Combine-的URL和附件的URL"><span class="nav-number">2.27.</span> <span class="nav-text">27.记得要测试List(或者Combine)的URL和附件的URL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#28-源网页的源代码没有显示招标中标的信息"><span class="nav-number">2.28.</span> <span class="nav-text">28.源网页的源代码没有显示招标中标的信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#29-正则只能配置request-path-gt-标签的相对路径"><span class="nav-number">2.29.</span> <span class="nav-text">29.正则只能配置request-path>标签的相对路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#30-String转Document方法-陈宇"><span class="nav-number">2.30.</span> <span class="nav-text">30.String转Document方法(陈宇)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#31-正则可以用空括号"><span class="nav-number">2.31.</span> <span class="nav-text">31.正则可以用空括号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#32-Combine记得配置对应Params和List的跳转映射"><span class="nav-number">2.32.</span> <span class="nav-text">32.Combine记得配置对应Params和List的跳转映射</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#33-启动代理后，谷歌浏览器乱码，控制台乱码"><span class="nav-number">2.33.</span> <span class="nav-text">33.启动代理后，谷歌浏览器乱码，控制台乱码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#34-遇到api-xml的request-path-gt-标签不能匹配中标和招标等类型"><span class="nav-number">2.34.</span> <span class="nav-text">34.遇到api.xml的request-path>标签不能匹配中标和招标等类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#35-招标公告的Detail有内容，招标答疑的Detail为null"><span class="nav-number">2.35.</span> <span class="nav-text">35.招标公告的Detail有内容，招标答疑的Detail为null</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#36-如何把int类型变为String类型"><span class="nav-number">2.36.</span> <span class="nav-text">36.如何把int类型变为String类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#37-招标的Detail无法匹配中标的Detail"><span class="nav-number">2.37.</span> <span class="nav-text">37.招标的Detail无法匹配中标的Detail</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#38-入库错误整理"><span class="nav-number">2.38.</span> <span class="nav-text">38.入库错误整理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#39-注意，我们做的项目是的0630的Excel表格"><span class="nav-number">2.39.</span> <span class="nav-text">39.注意，我们做的项目是的0630的Excel表格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#40-每个Java类里，多余的包要删掉-就是没有用到的包"><span class="nav-number">2.40.</span> <span class="nav-text">40.每个Java类里，多余的包要删掉(就是没有用到的包)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#41-入库里，跳转Detail的链接，端口要用1627"><span class="nav-number">2.41.</span> <span class="nav-text">41.入库里，跳转Detail的链接，端口要用1627</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#42-List页面显示pageCount不能有空格"><span class="nav-number">2.42.</span> <span class="nav-text">42.List页面显示pageCount不能有空格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#43-入库代码里的注解，是唯一标识，不能重名！"><span class="nav-number">2.43.</span> <span class="nav-text">43.入库代码里的注解，是唯一标识，不能重名！</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#44-入库的数据只要2014年之后的"><span class="nav-number">2.44.</span> <span class="nav-text">44.入库的数据只要2014年之后的</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#45-入库的页数第一页是index，第二页是index-2，入库代码"><span class="nav-number">2.45.</span> <span class="nav-text">45.入库的页数第一页是index，第二页是index_2，入库代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#46-遇到附件下载链接a标签只有id属性，没有value属性"><span class="nav-number">2.46.</span> <span class="nav-text">46.遇到附件下载链接a标签只有id属性，没有value属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#47-尝试运用ArrayList"><span class="nav-number">2.47.</span> <span class="nav-text">47.尝试运用ArrayList</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#48-入库代码，页数倒数模版-瑞强"><span class="nav-number">2.48.</span> <span class="nav-text">48.入库代码，页数倒数模版(瑞强)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#49-有些网站的尾页是没有pageCount显示的，但是确实是尾页了"><span class="nav-number">2.49.</span> <span class="nav-text">49.有些网站的尾页是没有pageCount显示的，但是确实是尾页了</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#50-今天碰到编号-1，编号-2，编号-3，的招标用一个模版，中标用一个模版"><span class="nav-number">2.50.</span> <span class="nav-text">50.今天碰到编号-1，编号-2，编号-3，的招标用一个模版，中标用一个模版</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#51-入库的时候，如果报错，只提示”接口错误”-印加暑期群"><span class="nav-number">2.51.</span> <span class="nav-text">51.入库的时候，如果报错，只提示”接口错误”(印加暑期群)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#52-如果入库中个出错，纠错后，续接记录"><span class="nav-number">2.52.</span> <span class="nav-text">52.如果入库中个出错，纠错后，续接记录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#53-如果截取总页数，用到字符串截取，条件里有中文"><span class="nav-number">2.53.</span> <span class="nav-text">53.如果截取总页数，用到字符串截取，条件里有中文</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#54-数据库跳空语句"><span class="nav-number">2.54.</span> <span class="nav-text">54.数据库跳空语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#55-List无法按照规定格式显示"><span class="nav-number">2.55.</span> <span class="nav-text">55.List无法按照规定格式显示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#56-使用Combine拼接两个Detail内容-附件和主内容不在同一个api"><span class="nav-number">2.56.</span> <span class="nav-text">56.使用Combine拼接两个Detail内容(附件和主内容不在同一个api)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#57-Combine使用for循环，反复访问"><span class="nav-number">2.57.</span> <span class="nav-text">57.Combine使用for循环，反复访问</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#57-2-提取JSON格式内容"><span class="nav-number">2.58.</span> <span class="nav-text">57-2.提取JSON格式内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#58-删除节点"><span class="nav-number">2.59.</span> <span class="nav-text">58.删除节点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#59-Detail通过JS获取动态的附件链接"><span class="nav-number">2.60.</span> <span class="nav-text">59.Detail通过JS获取动态的附件链接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#60-附件链接中出现-amp-符号-，导致无法下载"><span class="nav-number">2.61.</span> <span class="nav-text">60.附件链接中出现(&符号)，导致无法下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#61-截取的内容只有tr-gt-标签，无法获取tr的Element，需要补全table-gt-再转换为Doment"><span class="nav-number">2.62.</span> <span class="nav-text">61. 截取的内容只有tr>标签，无法获取tr的Element，需要补全table>再转换为Doment</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#62-删除title里的-斜杠"><span class="nav-number">2.63.</span> <span class="nav-text">62.删除title里的\ (斜杠)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#63-跳类型的话，没有类型参数的话，Params也记得配置正则"><span class="nav-number">2.64.</span> <span class="nav-text">63.跳类型的话，没有类型参数的话，Params也记得配置正则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#64-判断链接开头"><span class="nav-number">2.65.</span> <span class="nav-text">64.判断链接开头</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#65-去除Detail页面尾部的图片-每个Detail页都有，并且位置固定是最后"><span class="nav-number">2.66.</span> <span class="nav-text">65.去除Detail页面尾部的图片(每个Detail页都有，并且位置固定是最后)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#66-去除title标签内的不需要内容-加远"><span class="nav-number">2.67.</span> <span class="nav-text">66.去除title标签内的不需要内容(加远)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#67-使用NodeList来定位Id属性"><span class="nav-number">2.68.</span> <span class="nav-text">67.使用NodeList来定位Id属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#68-编码格式问题转码，解码"><span class="nav-number">2.69.</span> <span class="nav-text">68.编码格式问题转码，解码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#69-去除title前面-内的内容-小强"><span class="nav-number">2.70.</span> <span class="nav-text">69.去除title前面[]内的内容(小强)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#70-Detail里面只有一个链接，链接到另一个页面"><span class="nav-number">2.71.</span> <span class="nav-text">70.Detail里面只有一个链接，链接到另一个页面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#71-入库代码如果是空白页自动跳过-原网站一片的某个Detail页面一片空白"><span class="nav-number">2.72.</span> <span class="nav-text">71.入库代码如果是空白页自动跳过(原网站一片的某个Detail页面一片空白)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#72-入库小发现"><span class="nav-number">2.73.</span> <span class="nav-text">72.入库小发现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#73-Detail补齐图片，和附件链接通用版"><span class="nav-number">2.74.</span> <span class="nav-text">73.Detail补齐图片，和附件链接通用版</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#74-ecplise–运行java类快捷键"><span class="nav-number">2.75.</span> <span class="nav-text">74.ecplise–运行java类快捷键</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#75-遇到网站里List内容是-amp-xxxxx-编码格式的-健俊"><span class="nav-number">2.76.</span> <span class="nav-text">75.遇到网站里List内容是[&#xxxxx];编码格式的 (健俊)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#76-增加变量"><span class="nav-number">2.77.</span> <span class="nav-text">76,增加变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#77-removeChild-方法删除子节点"><span class="nav-number">2.78.</span> <span class="nav-text">77.removeChild()方法删除子节点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#78-获取当前年份"><span class="nav-number">2.79.</span> <span class="nav-text">78.获取当前年份</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#79-URL入库，主要是用ListVO-4"><span class="nav-number">2.80.</span> <span class="nav-text">79.URL入库，主要是用ListVO_4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#80-入库代码开头要注解清晰"><span class="nav-number">2.81.</span> <span class="nav-text">80.入库代码开头要注解清晰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#81-URL地址栏-开启代理后"><span class="nav-number">2.82.</span> <span class="nav-text">81.URL地址栏,开启代理后</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#82-Detail页里面有音频"><span class="nav-number">2.83.</span> <span class="nav-text">82.Detail页里面有音频</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#83-URL转码，List和Detail页面内容编码特殊"><span class="nav-number">2.84.</span> <span class="nav-text">83.URL转码，List和Detail页面内容编码特殊</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#84-List页面抓包下来全是字符串-并且是83的乱码"><span class="nav-number">2.85.</span> <span class="nav-text">84.List页面抓包下来全是字符串[并且是83的乱码]</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#85-Combine增加参数-另一种-健俊"><span class="nav-number">2.86.</span> <span class="nav-text">85.Combine增加参数,另一种(健俊)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#86-iw-ir-2的理解-健俊"><span class="nav-number">2.87.</span> <span class="nav-text">86.iw_ir_2的理解(健俊)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#87-计数判断，选出符合条件的某个Element"><span class="nav-number">2.88.</span> <span class="nav-text">87.计数判断，选出符合条件的某个Element</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#88-在Combine拼接跳转List的URL，因为多了参数，导致无法跳页-加远"><span class="nav-number">2.89.</span> <span class="nav-text">88.在Combine拼接跳转List的URL，因为多了参数，导致无法跳页(加远)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#89-设置执行SQL命名后，查询界面显示的记录数"><span class="nav-number">2.90.</span> <span class="nav-text">89.设置执行SQL命名后，查询界面显示的记录数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#90-Eclipse设置不限制控制台输出"><span class="nav-number">2.91.</span> <span class="nav-text">90.Eclipse设置不限制控制台输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#91-在Eclipse中点代码-包资源管理器自动跳动到该文件"><span class="nav-number">2.92.</span> <span class="nav-text">91.在Eclipse中点代码,包资源管理器自动跳动到该文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#92-List里添加URL跳转到Detail页面"><span class="nav-number">2.93.</span> <span class="nav-text">92.List里添加URL跳转到Detail页面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#93-招标中标的信息在网站同一个页面，不同模块"><span class="nav-number">2.94.</span> <span class="nav-text">93.招标中标的信息在网站同一个页面，不同模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#94-终极暴力Detail抓date-健俊"><span class="nav-number">2.95.</span> <span class="nav-text">94.终极暴力Detail抓date(健俊)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#95-启动reactor后，报错”创建临时文件夹失败”"><span class="nav-number">2.96.</span> <span class="nav-text">95.启动reactor后，报错”创建临时文件夹失败”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#96-URL中文编码问题–URL里面包含中文，只有特定格式才能跳入网站"><span class="nav-number">2.97.</span> <span class="nav-text">96.URL中文编码问题–URL里面包含中文，只有特定格式才能跳入网站</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#97-查询数据库相关语句扩展"><span class="nav-number">2.98.</span> <span class="nav-text">97.查询数据库相关语句扩展</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#98-List页面是特殊格式，用字符串进行截取"><span class="nav-number">2.99.</span> <span class="nav-text">98. List页面是特殊格式，用字符串进行截取</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#99-List和Detail无法拿到日期，入库里使用new-Date-健俊"><span class="nav-number">2.100.</span> <span class="nav-text">99.List和Detail无法拿到日期，入库里使用new Date() [健俊]</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#100-将时Unix时间戳转换为yyyy-MM-dd格式的日期"><span class="nav-number">2.101.</span> <span class="nav-text">100.将时Unix时间戳转换为yyyy-MM-dd格式的日期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#101-谷歌浏览器的版本和燕云dds兼容问题"><span class="nav-number">2.102.</span> <span class="nav-text">101.谷歌浏览器的版本和燕云dds兼容问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#102-燕云dds的eclise无法无法抓包and开启代理"><span class="nav-number">2.103.</span> <span class="nav-text">102.燕云dds的eclise无法无法抓包and开启代理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#103-JSON格式数据解析【使用GSON】"><span class="nav-number">2.104.</span> <span class="nav-text">103.JSON格式数据解析【使用GSON】</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script> <!--博客量统计-->
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liushuwei</span>
</div>


<div class="powered-by">
   
  <!--
    由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
    -->
</div>

<div class="theme-info">
	高调做事,低调做人

  <!-- 主题
    主题 -
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Mist
    </a>
  -->
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
